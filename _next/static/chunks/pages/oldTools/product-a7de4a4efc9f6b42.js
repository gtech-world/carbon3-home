(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{9048:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/oldTools/product",function(){return n(1126)}])},8503:function(e,t,n){"use strict";n.d(t,{P:function(){return u},d:function(){return m}});var s=n(1527),l=n(2132),a=n(4875),o=n.n(a),r=n(959),i=n(7994),c=n(9592),d=n(8723);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n,s]=(0,r.useState)(t);return(0,r.useEffect)((()=>{s(t)}),[e,t]),{onChange:s,items:e,current:n}}function u(e){const{items:t,current:n,onChange:a,className:m}=e,u=t[n]?t[n].text:"",[x,p]=(0,c.Z)(!1),f=(0,r.useCallback)((e=>{n!==e&&a(e)}),[n]),h=(0,l.E)("t-side");return(0,d.Z)(h,(()=>x&&p(!1))),0===t.length?null:(0,s.jsxs)("div",{ref:h,className:o()("bg-white text-black px-5 py-3 text-lg rounded-lg relative w-[31.25rem] cursor-pointer mo:w-full mo:text-sm",m),onClick:()=>p(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:u}),x?(0,s.jsx)(i.pzk,{}):(0,s.jsx)(i._i7,{})]}),x&&(0,s.jsx)("div",{className:"absolute left-0 w-full bg-white rounded-lg overflow-hidden py-3",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:t.map(((e,t)=>(0,s.jsx)("div",{style:{},className:o()("w-full px-5 py-2 text-sm",{"text-green-2":t===n}),onClick:()=>f(t),children:e.text},"select_item_".concat(t))))})]})}},352:function(e,t,n){"use strict";n.d(t,{OZ:function(){return m}});var s=n(1527),l=n(9270),a=n(7361),o=n(4726),r=n(9080),i=n(818),c=n(8633),d=n(7944);function m(e){const t=(0,l.dD)();return(0,s.jsx)("div",{className:"text-lg whitespace-nowrap [&:nth-child(n+2)]:mt-6 mo:!mt-0 mo:text-[.9375rem] mo:whitespace-pre",children:t?(0,s.jsxs)("div",{className:"hidden whitespace-normal mo:block text-gray-6",children:[(0,s.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-black font-bold",children:e.label}),(0,s.jsx)("div",{className:"text-gray-6",children:e.text})]})})}function u(e){return(0,s.jsx)("a",{href:e.to,className:"inline-block underline whitespace-nowrap mr-5 leading-normal text-sm text-blue-0 mt-[.375rem] mo:mt-[.875rem]",children:e.text})}function x(e){const{data:t}=e,{t:n}=(0,c.$G)();return(0,s.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden p-5 pb-8 mo:pb-5",children:[(0,s.jsx)("img",{className:"bg-transparent outline-none border-none w-full aspect-[2/1] object-contain",src:t.imageUrl||r.ES}),(0,s.jsx)("div",{className:"font-semibold text-lg text-black mo:text-base",children:t.displayName}),(0,s.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,s.jsx)(u,{to:"/tools/product?product_id=".concat(t.id),text:n("View Product Definition")}),(0,s.jsx)(u,{to:"/tools/activities?product_id=".concat(t.id),text:n("View PCF Template")}),(0,s.jsx)(u,{to:"/tools/pcf",text:n("Query PCF Data")})]})]})}t.ZP=function(){var e;const{user:t}=(0,l.aF)(),{value:n,loading:u}=(0,a.k)(o.jw),{t:p}=(0,c.$G)();return t?(0,s.jsx)(d.m,{className:"text-black",children:u?(0,s.jsx)(i.g,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("PROFILE")}),(0,s.jsxs)("div",{className:"mt-5 mb-8 w-full bg-white h-[21.5625rem] rounded-lg p-5 flex mo:flex-col mo:h-auto mo:p-[.9375rem] mo:mb-5",children:[(0,s.jsx)("img",{className:"object-scale-down h-full aspect-square bg-transparent rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:t.organization.imageUrl||r.hm}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(m,{label:p("Organization"),text:t.organization.displayName}),(0,s.jsx)(m,{label:p("Orgnization Type"),text:t.organization.type}),(0,s.jsx)(m,{label:p("Site"),text:(null===(e=t.organization.sitList[0])||void 0===e?void 0:e.displayName)||"-"}),(0,s.jsx)(m,{label:p("Account Owner"),text:t.name})]}),(0,s.jsxs)("div",{className:"py-1 ml-[5rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(m,{label:p("Account Role"),text:t.role}),(0,s.jsx)(m,{label:p("Authorization Level"),text:0===t.authLevel?"Read-Only":"Read-Only / Specified Products"}),(0,s.jsx)(m,{label:p("Last Login"),text:t.lastLoginTime})]})]}),(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("TARGET INVENTORIES")}),n&&(0,s.jsx)("div",{className:"mt-5 w-full grid gap-5 grid-cols-[repeat(auto-fill,minmax(21.875rem,1fr))] mo:grid-cols-1",children:n.map(((e,t)=>(0,s.jsx)(x,{data:e},"product_item_".concat(t))))})]})}):null}},8416:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var s=n(8503),l=n(7361),a=n(4726),o=n(3190),r=n(959);function i(){const{value:e,loading:t}=(0,l.k)(a.jw),n=(0,r.useMemo)((()=>(e||[]).map((e=>({...e,text:e.displayName})))),[e]),{query:i}=(0,o.useRouter)(),c=(0,r.useMemo)((()=>{const e=i.product_id;if(e){const t=n.findIndex((t=>"".concat(t.id)==e));if(t>=0)return t}return 0}),[i,n]),{current:d,items:m,onChange:u}=(0,s.d)(n,c),x=n[d];return{products:e,current:d,items:m,onChange:u,current_product:x,loading:t}}},1126:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(1527),l=n(818),a=n(3046),o=n(1004),r=n(7361),i=n(4726),c=n(959),d=n(8633),m=n(7994),u=n(9592),x=n(4186);function p(e){const{node:t,onBack:n}=e,{t:u}=(0,d.$G)(),{value:p,loading:h}=(0,r.k)((()=>(0,i.RN)(t.id)),[t.id]),b=(0,c.useMemo)((()=>p?p.map((e=>({title:e.displayName,sub:e.name}))):[]),[p]);return(0,s.jsxs)(a.u_,{className:"",children:[(0,s.jsxs)("div",{className:"sticky top-0 w-full bg-green-2 flex justify-between items-center h-[4.25rem] px-4 text-white",children:[(0,s.jsx)("button",{className:"text-2xl",onClick:n,children:(0,s.jsx)(m.$Ku,{})}),(0,s.jsx)("span",{className:"flex-grow-0 font-medium overflow-hidden text-ellipsis whitespace-nowrap mx-4",children:t.partDisplayName}),(0,s.jsx)("div",{className:"w-6"})]}),(0,s.jsxs)("div",{className:"p-5",children:[t.children.map(((e,t)=>(0,s.jsx)(f,{node:e},"bomItem_".concat(t)))),t.children.length>0&&(0,s.jsx)("div",{className:"h-5"}),(0,s.jsx)(x.xt,{node:t}),(0,s.jsxs)("div",{className:"text-[.9375rem] font-bold mt-5 mb-[.875rem]",children:[u("Attributable to Carbon Activities"),":"]}),h&&(0,s.jsx)(l.g,{}),b.map(((e,t)=>(0,s.jsx)(o.L6,{...e},"attrs_".concat(t))))]})]})}function f(e){const{node:t}=e,[n,l]=(0,u.Z)(!1);return(0,s.jsxs)("div",{onClick:()=>{l(!0),console.info("open bom modal")},className:"cursor-pointer flex justify-between items-end w-full px-5 py-3 border border-solid border-black rounded-lg [&:nth-child(n+2)]:mt-5",children:[(0,s.jsx)("div",{className:"text-lg flex-grow-0 whitespace-nowrap overflow-hidden text-ellipsis",children:t.partDisplayName}),(0,s.jsx)(m.nQU,{className:"text-2xl flex-shrink-0"}),n&&(0,s.jsx)(p,{node:t,onBack:e=>{l(!1),console.info("close bom modal"),e.stopPropagation()}})]})}function h(e){const{node:t}=e;return(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 text-black",children:[(0,s.jsx)("div",{className:"text-base font-bold",children:t.partDisplayName}),t.children.map(((e,t)=>(0,s.jsx)(f,{node:e},"bomItem_".concat(t))))]})}var b=n(9270),j=n(8503),g=n(8416),v=n(352),N=n(9080),w=n(7944);var y=function(){const{t:e}=(0,d.$G)(),{current:t,items:n,onChange:a,current_product:o,loading:m}=(0,g.a)(),{value:u,loading:p}=(0,r.k)((()=>o?(0,i.RS)(o.id):Promise.resolve(void 0)),[o]),{value:f,loading:y}=(0,r.k)((()=>o?(0,i.eO)(o.id):Promise.resolve(void 0)),[o]),k=(0,c.useMemo)((()=>{if(!f||0===f.length)return;const e={};let t="";f.forEach((n=>{null===n.parentPartNumberId&&(t=n.id+""),n.children=[],e[n.id]||(e[n.id]=[]),e[n.id].push(n)})),f.forEach((t=>{const n=e[t.parentPartNumberId];n&&n.forEach(((e,n)=>{e.children.push(n>0?{...t}:t)}))}));const n=e[t];if(n&&n[0]&&n[0].children.length>0){const e=n[0];e.deep=0;const t=e=>{for(const n of e.children)n.deep=e.deep+1,n.parent=e,t(n)};return t(e),e}}),[f]),O=(0,b.dD)(),_=m||p||void 0==u||y||void 0==f,E=O?h:x.TU;return(0,s.jsx)(w.m,{className:"text-black",children:_?(0,s.jsx)(l.g,{}):(0,s.jsx)(s.Fragment,{children:o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.P,{current:t,items:n,onChange:a}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT INFO")}),(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 flex items-center justify-between mo:flex-col mo:items-start",children:[(0,s.jsx)("img",{className:"object-contain w-[15.625rem] aspect-square rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:o.imageUrl||N.ES}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(v.OZ,{label:e("Product Name"),text:o.name||"-"}),(0,s.jsx)(v.OZ,{label:e("Display Name"),text:o.displayName}),(0,s.jsx)(v.OZ,{label:e("Product UID"),text:o.id+""})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(v.OZ,{label:e("From Organization"),text:o.organization.displayName+""}),(0,s.jsx)(v.OZ,{label:e("Product Type"),text:o.type}),(0,s.jsx)(v.OZ,{label:e("PCF Accountable"),text:void 0===u?"-":u?"YES":"NO"})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(v.OZ,{label:e("Manufacturing Status"),text:1===o.manufacturingStatus?"Active":"Inactive"}),(0,s.jsx)(v.OZ,{label:e("Created At"),text:o.createTime}),(0,s.jsx)(v.OZ,{label:e("Last Update"),text:o.updateTime})]})]}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT BOM")}),k&&(0,s.jsx)(E,{node:k})]})})})}},8723:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(959);function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var o=["mousedown","touchstart"],r=function(e,t,n){void 0===n&&(n=o);var r=(0,s.useRef)(t);(0,s.useEffect)((function(){r.current=t}),[t]),(0,s.useEffect)((function(){for(var t=function(t){var n=e.current;n&&!n.contains(t.target)&&r.current(t)},s=0,o=n;s<o.length;s++){var i=o[s];l(document,i,t)}return function(){for(var e=0,s=n;e<s.length;e++){var l=s[e];a(document,l,t)}}}),[n,e])}}},function(e){e.O(0,[439,489,955,765,774,888,179],(function(){return t=9048,e(e.s=t);var t}));var t=e.O();_N_E=t}]);