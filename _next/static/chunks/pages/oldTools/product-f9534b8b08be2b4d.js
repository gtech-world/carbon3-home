(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{6638:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/oldTools/product",function(){return l(5759)}])},261:function(e,t,l){"use strict";l.d(t,{C6:function(){return b},TU:function(){return v},xt:function(){return N}});var s=l(1527),n=l(1702),a=l(5913),r=l(6699),i=l(4875),c=l.n(i),o=l(959),d=l(2702),m=l(5858),x=l(6529),u=l(8370),h=l(9550);let f=(0,o.createContext)(void 0),p=(e,t)=>({data:{id:e.id.toString(),isLeaf:0===e.children.length,isOpenByDefault:0===t,name:e.partDisplayName,nestingLevel:t,node:e},nestingLevel:t,node:e});function j(e){let{style:t,data:{name:l,nestingLevel:n,isLeaf:a,node:r},isOpen:i,setOpen:m}=e,[x,u]=(0,o.useContext)(f);return(0,s.jsxs)("div",{style:{...t,width:"max-content",marginLeft:"".concat(2.25*n+(a?2.25:0),"rem"),background:r===x?"rgba(34, 122, 48, 0.1)":"none"},className:c()("flex items-center px-5 py-3 rounded-lg",{"text-green-2":r===x}),children:[!a&&(0,s.jsx)("button",{onClick:()=>m(!i),className:"text-2xl mr-3",children:i?(0,s.jsx)(d.qT8,{}):(0,s.jsx)(d.Dwu,{})}),(0,s.jsx)("span",{className:c()("whitespace-nowrap cursor-pointer",{"font-bold":0===n}),onClick:()=>0!==n&&u(r),children:l})]})}function b(e){return(0,s.jsxs)("div",{className:"text-gray-6 text-lg whitespace-nowrap text-ellipsis overflow-hidden [&:nth-child(n+2)]:mt-4 mo:text-[.9375rem] mo:!mt-0",children:[(0,s.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]})}function N(e){var t;let{node:l}=e,{t:n}=(0,x.NT)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{label:n("Part Name"),text:l.partDisplayName}),(0,s.jsx)(b,{label:n("Part Type"),text:l.children.length>0?"Sub-system":"Bom"}),(0,s.jsx)(b,{label:n("BOM Genealogy Level"),text:"".concat(l.deep+1)}),(0,s.jsx)(b,{label:n("Parent"),text:(null===(t=l.parent)||void 0===t?void 0:t.partDisplayName)||"-"}),(0,s.jsx)(b,{label:n("Children"),text:"".concat(l.children.length||"No"," Child")}),(0,s.jsx)(b,{label:n("From Supplier"),text:l.supplierName||"-"}),(0,s.jsx)(b,{label:n("Last Update"),text:l.updateTime})]})}function v(e){let{node:t}=e,{t:l}=(0,x.NT)(),[i,c]=(0,o.useState)(t.children[0]),d=(0,o.useCallback)(function*(){for(yield p(t,0);;){let e=yield;for(let t=0;t<e.node.children.length;t++)yield p(e.node.children[t],e.nestingLevel+1)}},[t]),{value:b,loading:v}=(0,a.k)(()=>(0,r.RN)(i.id),[i]),g=(0,o.useMemo)(()=>b?b.map(e=>({title:e.displayName,sub:e.name})):[],[b]);return(0,s.jsxs)("div",{className:"w-full flex",children:[(0,s.jsx)("div",{className:"p-5 bg-white rounded-l-lg mr-1 w-[20rem] h-[27rem] text-lg text-black",children:(0,s.jsx)(f.Provider,{value:[i,c],children:(0,s.jsx)(u.Z,{disableWidth:!0,children:e=>{let{height:t}=e;return(0,s.jsx)(h.NC,{width:"100%",height:t,itemSize:50,treeWalker:d,children:j})}})})}),(0,s.jsxs)("div",{className:"px-8 pt-[2.125rem] pb-8 flex-1 bg-white rounded-r-lg h-[27rem] flex justify-between",children:[(0,s.jsx)("div",{className:"flex-1 w-0",children:(0,s.jsx)(N,{node:i})}),(0,s.jsx)("div",{className:"w-[3.5rem]"}),(0,s.jsxs)("div",{className:"w-0 flex-1 flex flex-col",children:[(0,s.jsxs)("div",{className:"text-lg font-bold mb-5",children:[l("Attributable to Carbon Activities"),":"]}),v?(0,s.jsx)(m.g,{}):(0,s.jsx)("div",{className:"flex-1 w-full overflow-y-auto",children:g.map((e,t)=>(0,s.jsx)(n.L6,{...e},"attrs_".concat(t)))})]})]})]})}},5858:function(e,t,l){"use strict";l.d(t,{I:function(){return c},g:function(){return i}});var s=l(1527),n=l(4875),a=l.n(n),r=l(1671);function i(e){let{className:t,color:l,size:n="",...i}=e;return(0,s.jsx)("div",{...i,className:a()("text-black w-full h-full flex items-center justify-center",t),children:(0,s.jsx)(r.uur,{color:l,style:n?{fontSize:n}:{},className:"text-[3.125rem] animate-spin"})})}function c(){return(0,s.jsx)(i,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},7390:function(e,t,l){"use strict";l.d(t,{Ph:function(){return x},dW:function(){return m},ub:function(){return u}});var s=l(1527),n=l(765),a=l(4875),r=l.n(a),i=l(959),c=l(7067),o=l(9592),d=l(8723);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[l,s]=(0,i.useState)(t);return(0,i.useEffect)(()=>{s(t)},[e,t]),{onChange:s,items:e,current:l}}function x(e){let{items:t,current:l,onChange:a,className:m="bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm",currentClassName:x="flex justify-between items-center"}=e,u=t[l]?t[l].text:"",[h,f]=(0,o.Z)(!1),p=(0,i.useCallback)(e=>{l!==e&&a(e)},[l]),j=(0,n.E)("t-side");return((0,d.Z)(j,()=>h&&f(!1)),0===t.length)?null:(0,s.jsxs)("div",{ref:j,className:r()("relative cursor-pointer",m),onClick:()=>f(),children:[(0,s.jsxs)("div",{className:x,children:[(0,s.jsx)("span",{className:"truncate",children:u}),h?(0,s.jsx)(c.pzk,{}):(0,s.jsx)(c._i7,{})]}),h&&(0,s.jsx)("div",{className:"max-h-[18rem] absolute left-0 w-full bg-white  rounded-lg py-3 overflow-x-hidden overflow-y-auto",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,s.jsx)("div",{className:"",children:t.map((e,t)=>(0,s.jsx)("div",{style:{},className:r()("w-full break-all px-5 py-2 text-sm",{"text-green-2":t===l}),onClick:()=>p(t),children:e.text},"select_item_".concat(t)))})})]})}let u=e=>(0,s.jsx)(x,{className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center",...e})},1600:function(e,t,l){"use strict";l.d(t,{m:function(){return p}});var s=l(1527),n=l(8948),a=l(7265),r=l(1875),i=l(834),c=l(4875),o=l.n(c),d=l(7478),m=l(2810),x=l(8189),u=l(5487),h=l(5283);function f(e){let{children:t,className:l,tits:a,showQuery:r,isManager:c,...f}=e,{push:p}=(0,n.useRouter)(),j=(0,h.fo)();return(0,i.dD)(),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:o()("w-full relative z-[3] max-w-[90rem] mx-auto text-white flex items-center top-0 px-[7.5rem] h-[4.25rem] justify-between",l),...f,children:[(0,s.jsxs)("div",{className:"flex items-center cursor-pointer ml-[-1rem] mo:ml-0",onClick:()=>p("/"),children:[(0,s.jsx)(d.Z,{className:"h-[2.275rem] mo:h-[2rem]"}),(0,s.jsx)(m.Z,{className:"h-[1.5rem] mt-2.5 ml-3 mo:h-[1.1rem] mo:mt-3"})]}),(0,s.jsx)(x.R,{menus:j,children:(0,s.jsx)("button",{className:"text-[2rem] mo:text-2xl",children:(0,s.jsx)(u.otZ,{})})})]})})}function p(e){let{className:t,canBack:l,children:i,isNew:c,...d}=e,{push:m,pathname:x}=(0,n.useRouter)(),u=(0,a.R)();return(0,s.jsxs)("div",{className:"relative flex flex-col flex-1 w-full h-full min-h-fit bg-gray-16",children:[(0,s.jsx)(f,{showQuery:!0,style:{top:"".concat(u,"px")},className:"!sticky px-[3.125rem] py-4 !max-w-none bg-green-2 mo:px-4 mo:h-[4.25rem]"}),(0,s.jsxs)("div",{className:o()("w-full h-full mx-auto px-[60px] flex flex-col flex-1",{" max-w-[90rem]":!c}),children:[l&&(0,s.jsxs)("div",{className:"flex items-center my-5 text-sm cursor-pointer",onClick:()=>m("/carbon/service"),children:[(0,s.jsx)(r.YFh,{className:"text-lg"}),"返回"]}),(0,s.jsx)("div",{className:o()("flex flex-col ",t),children:i})]})]})}},1702:function(e,t,l){"use strict";l.d(t,{L6:function(){return i},Zx:function(){return c}});var s=l(1527),n=l(4875),a=l.n(n);function r(e){let{txt:t,type:l,className:n,...r}=e;return(0,s.jsx)("div",{...r,className:a()(n,"px-[5px] py-[2px] rounded text-xs text-white",{"bg-blue-0":"blue"===l,"bg-orange-16":"orange"===l}),children:t})}function i(e){let{title:t,sub:l,badge:n=[]}=e;return(0,s.jsxs)("div",{style:{border:"1px solid #000000"},className:a()("rounded-lg py-3 pl-3 pr-4 w-full overflow-hidden [&:nth-child(n+2)]:mt-5"),children:[(0,s.jsx)("div",{className:"text-black text-base w-full overflow-hidden whitespace-nowrap text-ellipsis",children:t}),(0,s.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,s.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:l}),n.map((e,t)=>(0,s.jsx)(r,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t)))]})]})}function c(e){let{title:t,sub:l,badge:n=[],tit_r:i}=e;return(0,s.jsxs)("div",{className:a()("rounded-lg py-3 pl-3 pr-[.4375rem] w-full overflow-hidden [&:nth-child(2n+1)]:bg-gray-16"),children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"text-black text-base overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:t}),(0,s.jsx)("div",{className:"flex-1"}),void 0!==i&&(0,s.jsx)("div",{className:"shrink-0 whitespace-nowrap text-sm font-semibold text-green-2",children:i})]}),(0,s.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,s.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:l}),(0,s.jsx)("div",{className:"flex-1"}),n.map((e,t)=>(0,s.jsx)(r,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t)))]})]})}},2284:function(e,t,l){"use strict";l.d(t,{OZ:function(){return m}});var s=l(1527),n=l(834),a=l(5858),r=l(1600),i=l(9401),c=l(5913),o=l(6529),d=l(6699);function m(e){let t=(0,n.dD)();return(0,s.jsx)("div",{className:"text-lg whitespace-nowrap [&:nth-child(n+2)]:mt-6 mo:!mt-0 mo:text-[.9375rem] mo:whitespace-pre",children:t?(0,s.jsxs)("div",{className:"hidden whitespace-normal mo:block text-gray-6",children:[(0,s.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-black font-bold",children:e.label}),(0,s.jsx)("div",{className:"text-gray-6",children:e.text})]})})}function x(e){return(0,s.jsx)("a",{href:e.to,className:"inline-block underline whitespace-nowrap mr-5 leading-normal text-sm text-blue-0 mt-[.375rem] mo:mt-[.875rem]",children:e.text})}function u(e){let{data:t}=e,{t:l}=(0,o.NT)();return(0,s.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden p-5 pb-8 mo:pb-5",children:[(0,s.jsx)("img",{className:"bg-transparent outline-none border-none w-full aspect-[2/1] object-contain",src:t.imageUrl||i.ES}),(0,s.jsx)("div",{className:"font-semibold text-lg text-black mo:text-base",children:t.displayName}),(0,s.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,s.jsx)(x,{to:"/tools/product?product_id=".concat(t.id),text:l("View Product Definition")}),(0,s.jsx)(x,{to:"/tools/activities?product_id=".concat(t.id),text:l("View PCF Template")}),(0,s.jsx)(x,{to:"/tools/pcf",text:l("Query PCF Data")})]})]})}t.ZP=function(){var e;let{user:t}=(0,n.aF)(),{value:l,loading:x}=(0,c.k)(d.jw),{t:h}=(0,o.NT)();return t?(0,s.jsx)(r.m,{className:"text-black",children:x?(0,s.jsx)(a.g,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:h("PROFILE")}),(0,s.jsxs)("div",{className:"mt-5 mb-8 w-full bg-white h-[21.5625rem] rounded-lg p-5 flex mo:flex-col mo:h-auto mo:p-[.9375rem] mo:mb-5",children:[(0,s.jsx)("img",{className:"object-scale-down h-full aspect-square bg-transparent rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:t.organization.imageUrl||i.hm}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(m,{label:h("Organization"),text:t.organization.displayName}),(0,s.jsx)(m,{label:h("Orgnization Type"),text:t.organization.type}),(0,s.jsx)(m,{label:h("Site"),text:(null===(e=t.organization.sitList[0])||void 0===e?void 0:e.displayName)||"-"}),(0,s.jsx)(m,{label:h("Account Owner"),text:t.name})]}),(0,s.jsxs)("div",{className:"py-1 ml-[5rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(m,{label:h("Account Role"),text:t.role}),(0,s.jsx)(m,{label:h("Authorization Level"),text:0===t.authLevel?"Read-Only":"Read-Only / Specified Products"}),(0,s.jsx)(m,{label:h("Last Login"),text:t.lastLoginTime})]})]}),(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:h("TARGET INVENTORIES")}),l&&(0,s.jsx)("div",{className:"mt-5 w-full grid gap-5 grid-cols-[repeat(auto-fill,minmax(21.875rem,1fr))] mo:grid-cols-1",children:l.map((e,t)=>(0,s.jsx)(u,{data:e},"product_item_".concat(t)))})]})}):null}},5913:function(e,t,l){"use strict";l.d(t,{k:function(){return a}});var s=l(959),n=l(6171);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=(0,s.useRef)(!0),a=(0,s.useRef)(0),[,r]=(0,s.useState)(1),i=(0,s.useCallback)(e=>{l.current=e,r(e=>1-e)},[]),[c,o]=(0,n.Z)(e,t),d=()=>{l.current||i(!0);let e=a.current+1>1e5?0:a.current+1;a.current=e,o().finally(()=>a.current==e&&i(!1))};return(0,s.useEffect)(()=>{d()},t),(0,s.useMemo)(()=>({...c,value:l.current||c.error?void 0:c.value,loading:l.current,req:d}),[c,l.current])}},818:function(e,t,l){"use strict";l.d(t,{a:function(){return c}});var s=l(7390),n=l(5913),a=l(6699),r=l(8948),i=l(959);function c(){let{value:e,loading:t}=(0,n.k)(a.jw),l=(0,i.useMemo)(()=>(e||[]).map(e=>({...e,text:e.displayName})),[e]),{query:c}=(0,r.useRouter)(),o=(0,i.useMemo)(()=>{let e=c.product_id;if(e){let t=l.findIndex(t=>"".concat(t.id)==e);if(t>=0)return t}return 0},[c,l]),{current:d,items:m,onChange:x}=(0,s.dW)(l,o),u=l[d];return{products:e,current:d,items:m,onChange:x,current_product:u,loading:t}}},5759:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return y}});var s=l(1527),n=l(5858),a=l(9049),r=l(1702),i=l(5913),c=l(6529),o=l(6699),d=l(959),m=l(7067),x=l(9592),u=l(261);function h(e){let{node:t,onBack:l}=e,{t:x}=(0,c.NT)(),{value:h,loading:p}=(0,i.k)(()=>(0,o.RN)(t.id),[t.id]),j=(0,d.useMemo)(()=>h?h.map(e=>({title:e.displayName,sub:e.name})):[],[h]);return(0,s.jsxs)(a.u_,{className:"",children:[(0,s.jsxs)("div",{className:"sticky top-0 w-full bg-green-2 flex justify-between items-center h-[4.25rem] px-4 text-white",children:[(0,s.jsx)("button",{className:"text-2xl",onClick:l,children:(0,s.jsx)(m.$Ku,{})}),(0,s.jsx)("span",{className:"flex-grow-0 font-medium overflow-hidden text-ellipsis whitespace-nowrap mx-4",children:t.partDisplayName}),(0,s.jsx)("div",{className:"w-6"})]}),(0,s.jsxs)("div",{className:"p-5",children:[t.children.map((e,t)=>(0,s.jsx)(f,{node:e},"bomItem_".concat(t))),t.children.length>0&&(0,s.jsx)("div",{className:"h-5"}),(0,s.jsx)(u.xt,{node:t}),(0,s.jsxs)("div",{className:"text-[.9375rem] font-bold mt-5 mb-[.875rem]",children:[x("Attributable to Carbon Activities"),":"]}),p&&(0,s.jsx)(n.g,{}),j.map((e,t)=>(0,s.jsx)(r.L6,{...e},"attrs_".concat(t)))]})]})}function f(e){let{node:t}=e,[l,n]=(0,x.Z)(!1);return(0,s.jsxs)("div",{onClick:()=>{n(!0),console.info("open bom modal")},className:"cursor-pointer flex justify-between items-end w-full px-5 py-3 border border-solid border-black rounded-lg [&:nth-child(n+2)]:mt-5",children:[(0,s.jsx)("div",{className:"text-lg flex-grow-0 whitespace-nowrap overflow-hidden text-ellipsis",children:t.partDisplayName}),(0,s.jsx)(m.nQU,{className:"text-2xl flex-shrink-0"}),l&&(0,s.jsx)(h,{node:t,onBack:e=>{n(!1),console.info("close bom modal"),e.stopPropagation()}})]})}function p(e){let{node:t}=e;return(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 text-black",children:[(0,s.jsx)("div",{className:"text-base font-bold",children:t.partDisplayName}),t.children.map((e,t)=>(0,s.jsx)(f,{node:e},"bomItem_".concat(t)))]})}var j=l(834),b=l(7390),N=l(1600),v=l(9401),g=l(818),w=l(2284),y=function(){let{t:e}=(0,c.NT)(),{current:t,items:l,onChange:a,current_product:r,loading:m}=(0,g.a)(),{value:x,loading:h}=(0,i.k)(()=>r?(0,o.RS)(r.id):Promise.resolve(void 0),[r]),{value:f,loading:y}=(0,i.k)(()=>r?(0,o.eO)(r.id):Promise.resolve(void 0),[r]),k=(0,d.useMemo)(()=>{if(!f||0===f.length)return;let e={},t="";f.forEach(l=>{null===l.parentPartNumberId&&(t=l.id+""),l.children=[],e[l.id]||(e[l.id]=[]),e[l.id].push(l)}),f.forEach(t=>{let l=e[t.parentPartNumberId];l&&l.forEach((e,l)=>{e.children.push(l>0?{...t}:t)})});let l=e[t];if(l&&l[0]&&l[0].children.length>0){let e=l[0];e.deep=0;let t=e=>{for(let l of e.children)l.deep=e.deep+1,l.parent=e,t(l)};return t(e),e}},[f]),C=(0,j.dD)(),_=m||h||void 0==x||y||void 0==f,O=C?p:u.TU;return(0,s.jsx)(N.m,{className:"text-black",children:_?(0,s.jsx)(n.g,{}):(0,s.jsx)(s.Fragment,{children:r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Ph,{current:t,items:l,onChange:a}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT INFO")}),(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 flex items-center justify-between mo:flex-col mo:items-start",children:[(0,s.jsx)("img",{className:"object-contain w-[15.625rem] aspect-square rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:r.imageUrl||v.ES}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("Product Name"),text:r.name||"-"}),(0,s.jsx)(w.OZ,{label:e("Display Name"),text:r.displayName}),(0,s.jsx)(w.OZ,{label:e("Product UID"),text:r.id+""})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("From Organization"),text:r.organization.displayName+""}),(0,s.jsx)(w.OZ,{label:e("Product Type"),text:r.type}),(0,s.jsx)(w.OZ,{label:e("PCF Accountable"),text:void 0===x?"-":x?"YES":"NO"})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("Manufacturing Status"),text:1===r.manufacturingStatus?"Active":"Inactive"}),(0,s.jsx)(w.OZ,{label:e("Created At"),text:r.createTime}),(0,s.jsx)(w.OZ,{label:e("Last Update"),text:r.updateTime})]})]}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT BOM")}),k&&(0,s.jsx)(O,{node:k})]})})})}}},function(e){e.O(0,[713,769,307,574,798,699,351,774,888,179],function(){return e(e.s=6638)}),_N_E=e.O()}]);