(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5719],{6638:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/oldTools/product",function(){return l(5759)}])},7390:function(e,t,l){"use strict";l.d(t,{P:function(){return x},d:function(){return m}});var s=l(1527),a=l(765),n=l(4875),i=l.n(n),r=l(959),o=l(7067),c=l(9592),d=l(8723);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[l,s]=(0,r.useState)(t);return(0,r.useEffect)(()=>{s(t)},[e,t]),{onChange:s,items:e,current:l}}function x(e){let{items:t,current:l,onChange:n,className:m}=e,x=t[l]?t[l].text:"",[u,p]=(0,c.Z)(!1),h=(0,r.useCallback)(e=>{l!==e&&n(e)},[l]),f=(0,a.E)("t-side");return((0,d.Z)(f,()=>u&&p(!1)),0===t.length)?null:(0,s.jsxs)("div",{ref:f,className:i()("bg-white text-black px-5 py-3 text-lg rounded-lg relative w-[31.25rem] cursor-pointer mo:w-full mo:text-sm",m),onClick:()=>p(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"truncate",children:x}),u?(0,s.jsx)(o.pzk,{}):(0,s.jsx)(o._i7,{})]}),u&&(0,s.jsx)("div",{className:"max-h-[18rem] absolute left-0 w-full bg-white  rounded-lg py-3 overflow-x-hidden overflow-y-auto",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,s.jsx)("div",{className:"",children:t.map((e,t)=>(0,s.jsx)("div",{style:{},className:i()("w-full break-all px-5 py-2 text-sm",{"text-green-2":t===l}),onClick:()=>h(t),children:e.text},"select_item_".concat(t)))})})]})}},2284:function(e,t,l){"use strict";l.d(t,{OZ:function(){return m}});var s=l(1527),a=l(834),n=l(5858),i=l(1600),r=l(9401),o=l(5913),c=l(6529),d=l(6699);function m(e){let t=(0,a.dD)();return(0,s.jsx)("div",{className:"text-lg whitespace-nowrap [&:nth-child(n+2)]:mt-6 mo:!mt-0 mo:text-[.9375rem] mo:whitespace-pre",children:t?(0,s.jsxs)("div",{className:"hidden whitespace-normal mo:block text-gray-6",children:[(0,s.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-black font-bold",children:e.label}),(0,s.jsx)("div",{className:"text-gray-6",children:e.text})]})})}function x(e){return(0,s.jsx)("a",{href:e.to,className:"inline-block underline whitespace-nowrap mr-5 leading-normal text-sm text-blue-0 mt-[.375rem] mo:mt-[.875rem]",children:e.text})}function u(e){let{data:t}=e,{t:l}=(0,c.NT)();return(0,s.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden p-5 pb-8 mo:pb-5",children:[(0,s.jsx)("img",{className:"bg-transparent outline-none border-none w-full aspect-[2/1] object-contain",src:t.imageUrl||r.ES}),(0,s.jsx)("div",{className:"font-semibold text-lg text-black mo:text-base",children:t.displayName}),(0,s.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,s.jsx)(x,{to:"/tools/product?product_id=".concat(t.id),text:l("View Product Definition")}),(0,s.jsx)(x,{to:"/tools/activities?product_id=".concat(t.id),text:l("View PCF Template")}),(0,s.jsx)(x,{to:"/tools/pcf",text:l("Query PCF Data")})]})]})}t.ZP=function(){var e;let{user:t}=(0,a.aF)(),{value:l,loading:x}=(0,o.k)(d.jw),{t:p}=(0,c.NT)();return t?(0,s.jsx)(i.m,{className:"text-black",children:x?(0,s.jsx)(n.g,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("PROFILE")}),(0,s.jsxs)("div",{className:"mt-5 mb-8 w-full bg-white h-[21.5625rem] rounded-lg p-5 flex mo:flex-col mo:h-auto mo:p-[.9375rem] mo:mb-5",children:[(0,s.jsx)("img",{className:"object-scale-down h-full aspect-square bg-transparent rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:t.organization.imageUrl||r.hm}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(m,{label:p("Organization"),text:t.organization.displayName}),(0,s.jsx)(m,{label:p("Orgnization Type"),text:t.organization.type}),(0,s.jsx)(m,{label:p("Site"),text:(null===(e=t.organization.sitList[0])||void 0===e?void 0:e.displayName)||"-"}),(0,s.jsx)(m,{label:p("Account Owner"),text:t.name})]}),(0,s.jsxs)("div",{className:"py-1 ml-[5rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(m,{label:p("Account Role"),text:t.role}),(0,s.jsx)(m,{label:p("Authorization Level"),text:0===t.authLevel?"Read-Only":"Read-Only / Specified Products"}),(0,s.jsx)(m,{label:p("Last Login"),text:t.lastLoginTime})]})]}),(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("TARGET INVENTORIES")}),l&&(0,s.jsx)("div",{className:"mt-5 w-full grid gap-5 grid-cols-[repeat(auto-fill,minmax(21.875rem,1fr))] mo:grid-cols-1",children:l.map((e,t)=>(0,s.jsx)(u,{data:e},"product_item_".concat(t)))})]})}):null}},818:function(e,t,l){"use strict";l.d(t,{a:function(){return o}});var s=l(7390),a=l(5913),n=l(6699),i=l(8948),r=l(959);function o(){let{value:e,loading:t}=(0,a.k)(n.jw),l=(0,r.useMemo)(()=>(e||[]).map(e=>({...e,text:e.displayName})),[e]),{query:o}=(0,i.useRouter)(),c=(0,r.useMemo)(()=>{let e=o.product_id;if(e){let t=l.findIndex(t=>"".concat(t.id)==e);if(t>=0)return t}return 0},[o,l]),{current:d,items:m,onChange:x}=(0,s.d)(l,c),u=l[d];return{products:e,current:d,items:m,onChange:x,current_product:u,loading:t}}},5759:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return y}});var s=l(1527),a=l(5858),n=l(9049),i=l(1702),r=l(5913),o=l(6529),c=l(6699),d=l(959),m=l(7067),x=l(9592),u=l(261);function p(e){let{node:t,onBack:l}=e,{t:x}=(0,o.NT)(),{value:p,loading:f}=(0,r.k)(()=>(0,c.RN)(t.id),[t.id]),b=(0,d.useMemo)(()=>p?p.map(e=>({title:e.displayName,sub:e.name})):[],[p]);return(0,s.jsxs)(n.u_,{className:"",children:[(0,s.jsxs)("div",{className:"sticky top-0 w-full bg-green-2 flex justify-between items-center h-[4.25rem] px-4 text-white",children:[(0,s.jsx)("button",{className:"text-2xl",onClick:l,children:(0,s.jsx)(m.$Ku,{})}),(0,s.jsx)("span",{className:"flex-grow-0 font-medium overflow-hidden text-ellipsis whitespace-nowrap mx-4",children:t.partDisplayName}),(0,s.jsx)("div",{className:"w-6"})]}),(0,s.jsxs)("div",{className:"p-5",children:[t.children.map((e,t)=>(0,s.jsx)(h,{node:e},"bomItem_".concat(t))),t.children.length>0&&(0,s.jsx)("div",{className:"h-5"}),(0,s.jsx)(u.xt,{node:t}),(0,s.jsxs)("div",{className:"text-[.9375rem] font-bold mt-5 mb-[.875rem]",children:[x("Attributable to Carbon Activities"),":"]}),f&&(0,s.jsx)(a.g,{}),b.map((e,t)=>(0,s.jsx)(i.L6,{...e},"attrs_".concat(t)))]})]})}function h(e){let{node:t}=e,[l,a]=(0,x.Z)(!1);return(0,s.jsxs)("div",{onClick:()=>{a(!0),console.info("open bom modal")},className:"cursor-pointer flex justify-between items-end w-full px-5 py-3 border border-solid border-black rounded-lg [&:nth-child(n+2)]:mt-5",children:[(0,s.jsx)("div",{className:"text-lg flex-grow-0 whitespace-nowrap overflow-hidden text-ellipsis",children:t.partDisplayName}),(0,s.jsx)(m.nQU,{className:"text-2xl flex-shrink-0"}),l&&(0,s.jsx)(p,{node:t,onBack:e=>{a(!1),console.info("close bom modal"),e.stopPropagation()}})]})}function f(e){let{node:t}=e;return(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 text-black",children:[(0,s.jsx)("div",{className:"text-base font-bold",children:t.partDisplayName}),t.children.map((e,t)=>(0,s.jsx)(h,{node:e},"bomItem_".concat(t)))]})}var b=l(834),j=l(7390),g=l(1600),N=l(9401),v=l(818),w=l(2284),y=function(){let{t:e}=(0,o.NT)(),{current:t,items:l,onChange:n,current_product:i,loading:m}=(0,v.a)(),{value:x,loading:p}=(0,r.k)(()=>i?(0,c.RS)(i.id):Promise.resolve(void 0),[i]),{value:h,loading:y}=(0,r.k)(()=>i?(0,c.eO)(i.id):Promise.resolve(void 0),[i]),k=(0,d.useMemo)(()=>{if(!h||0===h.length)return;let e={},t="";h.forEach(l=>{null===l.parentPartNumberId&&(t=l.id+""),l.children=[],e[l.id]||(e[l.id]=[]),e[l.id].push(l)}),h.forEach(t=>{let l=e[t.parentPartNumberId];l&&l.forEach((e,l)=>{e.children.push(l>0?{...t}:t)})});let l=e[t];if(l&&l[0]&&l[0].children.length>0){let e=l[0];e.deep=0;let t=e=>{for(let l of e.children)l.deep=e.deep+1,l.parent=e,t(l)};return t(e),e}},[h]),O=(0,b.dD)(),_=m||p||void 0==x||y||void 0==h,P=O?f:u.TU;return(0,s.jsx)(g.m,{className:"text-black",children:_?(0,s.jsx)(a.g,{}):(0,s.jsx)(s.Fragment,{children:i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.P,{current:t,items:l,onChange:n}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT INFO")}),(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 flex items-center justify-between mo:flex-col mo:items-start",children:[(0,s.jsx)("img",{className:"object-contain w-[15.625rem] aspect-square rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:i.imageUrl||N.ES}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("Product Name"),text:i.name||"-"}),(0,s.jsx)(w.OZ,{label:e("Display Name"),text:i.displayName}),(0,s.jsx)(w.OZ,{label:e("Product UID"),text:i.id+""})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("From Organization"),text:i.organization.displayName+""}),(0,s.jsx)(w.OZ,{label:e("Product Type"),text:i.type}),(0,s.jsx)(w.OZ,{label:e("PCF Accountable"),text:void 0===x?"-":x?"YES":"NO"})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("Manufacturing Status"),text:1===i.manufacturingStatus?"Active":"Inactive"}),(0,s.jsx)(w.OZ,{label:e("Created At"),text:i.createTime}),(0,s.jsx)(w.OZ,{label:e("Last Update"),text:i.updateTime})]})]}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT BOM")}),k&&(0,s.jsx)(P,{node:k})]})})})}}},function(e){e.O(0,[713,769,7307,6574,4798,2699,2351,2969,9774,2888,179],function(){return e(e.s=6638)}),_N_E=e.O()}]);