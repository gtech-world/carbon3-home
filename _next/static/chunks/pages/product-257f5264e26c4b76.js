(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{7394:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product",function(){return s(4448)}])},4186:function(e,t,s){"use strict";s.d(t,{C6:function(){return j},TU:function(){return v},xt:function(){return g}});var l=s(1527),n=s(1004),a=s(7361),i=s(4726),r=s(4875),o=s.n(r),c=s(959),d=s(8334),m=s(8370),x=s(9077),u=s(818),p=s(8633);const h=(0,c.createContext)(void 0),f=(e,t)=>({data:{id:e.id.toString(),isLeaf:0===e.children.length,isOpenByDefault:0===t,name:e.partDisplayName,nestingLevel:t,node:e},nestingLevel:t,node:e});function b(e){const{style:t,data:{name:s,nestingLevel:n,isLeaf:a,node:i},isOpen:r,setOpen:m}=e,[x,u]=(0,c.useContext)(h);return(0,l.jsxs)("div",{style:{...t,width:"max-content",marginLeft:"".concat(2.25*n+(a?2.25:0),"rem"),background:i===x?"rgba(34, 122, 48, 0.1)":"none"},className:o()("flex items-center px-5 py-3 rounded-lg",{"text-green-2":i===x}),children:[!a&&(0,l.jsx)("button",{onClick:()=>m(!r),className:"text-2xl mr-3",children:r?(0,l.jsx)(d.qT8,{}):(0,l.jsx)(d.Dwu,{})}),(0,l.jsx)("span",{className:o()("whitespace-nowrap cursor-pointer",{"font-bold":0===n}),onClick:()=>0!==n&&u(i),children:s})]})}function j(e){return(0,l.jsxs)("div",{className:"text-gray-6 text-lg whitespace-nowrap text-ellipsis overflow-hidden [&:nth-child(n+2)]:mt-4 mo:text-[.9375rem] mo:!mt-0",children:[(0,l.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]})}function g(e){var t;const{node:s}=e,{t:n}=(0,p.$G)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j,{label:n("Part Name"),text:s.partDisplayName}),(0,l.jsx)(j,{label:n("Part Type"),text:s.children.length>0?"Sub-system":"Bom"}),(0,l.jsx)(j,{label:n("BOM Genealogy Level"),text:"".concat(s.deep+1)}),(0,l.jsx)(j,{label:n("Parent"),text:(null===(t=s.parent)||void 0===t?void 0:t.partDisplayName)||"-"}),(0,l.jsx)(j,{label:n("Children"),text:"".concat(s.children.length||"No"," Child")}),(0,l.jsx)(j,{label:n("From Supplier"),text:s.supplierName||"-"}),(0,l.jsx)(j,{label:n("Last Update"),text:s.updateTime})]})}function v(e){const{node:t}=e,{t:s}=(0,p.$G)(),[r,o]=(0,c.useState)(t.children[0]),d=(0,c.useCallback)((function*(){for(yield f(t,0);;){const e=yield;for(let t=0;t<e.node.children.length;t++)yield f(e.node.children[t],e.nestingLevel+1)}}),[t]),{value:j,loading:v}=(0,a.k)((()=>(0,i.RN)(r.id)),[r]),N=(0,c.useMemo)((()=>j?j.map((e=>({title:e.displayName,sub:e.name}))):[]),[j]);return(0,l.jsxs)("div",{className:"w-full flex",children:[(0,l.jsx)("div",{className:"p-5 bg-white rounded-l-lg mr-1 w-[20rem] h-[27rem] text-lg text-black",children:(0,l.jsx)(h.Provider,{value:[r,o],children:(0,l.jsx)(m.Z,{disableWidth:!0,children:e=>{let{height:t}=e;return(0,l.jsx)(x.NC,{width:"100%",height:t,itemSize:50,treeWalker:d,children:b})}})})}),(0,l.jsxs)("div",{className:"px-8 pt-[2.125rem] pb-8 flex-1 bg-white rounded-r-lg h-[27rem] flex justify-between",children:[(0,l.jsx)("div",{className:"flex-1 w-0",children:(0,l.jsx)(g,{node:r})}),(0,l.jsx)("div",{className:"w-[3.5rem]"}),(0,l.jsxs)("div",{className:"w-0 flex-1 flex flex-col",children:[(0,l.jsxs)("div",{className:"text-lg font-bold mb-5",children:[s("Attributable to Carbon Activities"),":"]}),v?(0,l.jsx)(u.g,{}):(0,l.jsx)("div",{className:"flex-1 w-full overflow-y-auto",children:N.map(((e,t)=>(0,l.jsx)(n.L6,{...e},"attrs_".concat(t))))})]})]})]})}},8503:function(e,t,s){"use strict";s.d(t,{P:function(){return x},d:function(){return m}});var l=s(1527),n=s(2132),a=s(4875),i=s.n(a),r=s(959),o=s(7994),c=s(9592),d=s(8723);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[s,l]=(0,r.useState)(t);return(0,r.useEffect)((()=>{l(t)}),[e,t]),{onChange:l,items:e,current:s}}function x(e){const{items:t,current:s,onChange:a,className:m}=e,x=t[s]?t[s].text:"",[u,p]=(0,c.Z)(!1),h=(0,r.useCallback)((e=>{s!==e&&a(e)}),[s]),f=(0,n.E)("t-side");return(0,d.Z)(f,(()=>u&&p(!1))),0===t.length?null:(0,l.jsxs)("div",{ref:f,className:i()("bg-white text-black px-5 py-3 text-lg rounded-lg relative w-[31.25rem] cursor-pointer mo:w-full mo:text-sm",m),onClick:()=>p(),children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:x}),u?(0,l.jsx)(o.pzk,{}):(0,l.jsx)(o._i7,{})]}),u&&(0,l.jsx)("div",{className:"absolute left-0 w-full bg-white rounded-lg overflow-hidden py-3",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:t.map(((e,t)=>(0,l.jsx)("div",{style:{},className:i()("w-full px-5 py-2 text-sm",{"text-green-2":t===s}),onClick:()=>h(t),children:e.text},"select_item_".concat(t))))})]})}},1004:function(e,t,s){"use strict";s.d(t,{L6:function(){return r},Zx:function(){return o}});var l=s(1527),n=s(4875),a=s.n(n);function i(e){const{txt:t,type:s,className:n,...i}=e;return(0,l.jsx)("div",{...i,className:a()(n,"px-[5px] py-[2px] rounded text-xs text-white",{"bg-blue-0":"blue"===s,"bg-orange-16":"orange"===s}),children:t})}function r(e){const{title:t,sub:s,badge:n=[]}=e;return(0,l.jsxs)("div",{style:{border:"1px solid #000000"},className:a()("rounded-lg py-3 pl-3 pr-4 w-full overflow-hidden [&:nth-child(n+2)]:mt-5"),children:[(0,l.jsx)("div",{className:"text-black text-base w-full overflow-hidden whitespace-nowrap text-ellipsis",children:t}),(0,l.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,l.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:s}),n.map(((e,t)=>(0,l.jsx)(i,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t))))]})]})}function o(e){const{title:t,sub:s,badge:n=[],tit_r:r}=e;return(0,l.jsxs)("div",{className:a()("rounded-lg py-3 pl-3 pr-[.4375rem] w-full overflow-hidden [&:nth-child(2n+1)]:bg-gray-16"),children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"text-black text-base overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:t}),(0,l.jsx)("div",{className:"flex-1"}),void 0!==r&&(0,l.jsx)("div",{className:"shrink-0 whitespace-nowrap text-sm font-semibold text-green-2",children:r})]}),(0,l.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,l.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:s}),(0,l.jsx)("div",{className:"flex-1"}),n.map(((e,t)=>(0,l.jsx)(i,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t))))]})]})}},2632:function(e,t,s){"use strict";s.d(t,{OZ:function(){return m}});var l=s(1527),n=s(9270),a=s(5462),i=s(7361),r=s(4726),o=s(9080),c=s(818),d=s(8633);function m(e){const t=(0,n.dD)();return(0,l.jsx)("div",{className:"text-lg whitespace-nowrap [&:nth-child(n+2)]:mt-6 mo:!mt-0 mo:text-[.9375rem] mo:whitespace-pre",children:t?(0,l.jsxs)("div",{className:"hidden whitespace-normal mo:block text-gray-6",children:[(0,l.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-black font-bold",children:e.label}),(0,l.jsx)("div",{className:"text-gray-6",children:e.text})]})})}function x(e){return(0,l.jsx)("a",{href:e.to,className:"inline-block underline whitespace-nowrap mr-5 leading-normal text-sm text-blue-0 mt-[.375rem] mo:mt-[.875rem]",children:e.text})}function u(e){const{data:t}=e,{t:s}=(0,d.$G)();return(0,l.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden p-5 pb-8 mo:pb-5",children:[(0,l.jsx)("img",{className:"bg-transparent outline-none border-none w-full aspect-[2/1] object-contain",src:t.imageUrl||o.ES}),(0,l.jsx)("div",{className:"font-semibold text-lg text-black mo:text-base",children:t.displayName}),(0,l.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,l.jsx)(x,{to:"/product?product_id=".concat(t.id),text:s("View Product Definition")}),(0,l.jsx)(x,{to:"/activities?product_id=".concat(t.id),text:s("View PCF Template")}),(0,l.jsx)(x,{to:"/pcf",text:s("Query PCF Data")})]})]})}t.ZP=function(){var e;const{user:t}=(0,n.aF)(),{value:s,loading:x}=(0,i.k)(r.jw),{t:p}=(0,d.$G)();return t?(0,l.jsx)(a.Z,{className:"text-black",children:x?(0,l.jsx)(c.g,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("PROFILE")}),(0,l.jsxs)("div",{className:"mt-5 mb-8 w-full bg-white h-[21.5625rem] rounded-lg p-5 flex mo:flex-col mo:h-auto mo:p-[.9375rem] mo:mb-5",children:[(0,l.jsx)("img",{className:"object-scale-down h-full aspect-square bg-transparent rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:t.organization.imageUrl||o.hm}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,l.jsx)(m,{label:p("Organization"),text:t.organization.displayName}),(0,l.jsx)(m,{label:p("Orgnization Type"),text:t.organization.type}),(0,l.jsx)(m,{label:p("Site"),text:(null===(e=t.organization.sitList[0])||void 0===e?void 0:e.displayName)||"-"}),(0,l.jsx)(m,{label:p("Account Owner"),text:t.name})]}),(0,l.jsxs)("div",{className:"py-1 ml-[5rem] mo:ml-0 mo:py-0",children:[(0,l.jsx)(m,{label:p("Account Role"),text:t.role}),(0,l.jsx)(m,{label:p("Authorization Level"),text:0===t.authLevel?"Read-Only":"Read-Only / Specified Products"}),(0,l.jsx)(m,{label:p("Last Login"),text:t.lastLoginTime})]})]}),(0,l.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("TARGET INVENTORIES")}),s&&(0,l.jsx)("div",{className:"mt-5 w-full grid gap-5 grid-cols-[repeat(auto-fill,minmax(21.875rem,1fr))] mo:grid-cols-1",children:s.map(((e,t)=>(0,l.jsx)(u,{data:e},"product_item_".concat(t))))})]})}):null}},8416:function(e,t,s){"use strict";s.d(t,{a:function(){return o}});var l=s(8503),n=s(7361),a=s(4726),i=s(3190),r=s(959);function o(){const{value:e,loading:t}=(0,n.k)(a.jw),s=(0,r.useMemo)((()=>(e||[]).map((e=>({...e,text:e.displayName})))),[e]),{query:o}=(0,i.useRouter)(),c=(0,r.useMemo)((()=>{const e=o.product_id;if(e){const t=s.findIndex((t=>"".concat(t.id)==e));if(t>=0)return t}return 0}),[o,s]),{current:d,items:m,onChange:x}=(0,l.d)(s,c),u=s[d];return{products:e,current:d,items:m,onChange:x,current_product:u,loading:t}}},4448:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var l=s(1527),n=s(818),a=s(3046),i=s(1004),r=s(7361),o=s(4726),c=s(959),d=s(8633),m=s(7994),x=s(9592),u=s(4186);function p(e){const{node:t,onBack:s}=e,{t:x}=(0,d.$G)(),{value:p,loading:f}=(0,r.k)((()=>(0,o.RN)(t.id)),[t.id]),b=(0,c.useMemo)((()=>p?p.map((e=>({title:e.displayName,sub:e.name}))):[]),[p]);return(0,l.jsxs)(a.u,{className:"",children:[(0,l.jsxs)("div",{className:"sticky top-0 w-full bg-green-2 flex justify-between items-center h-[4.25rem] px-4 text-white",children:[(0,l.jsx)("button",{className:"text-2xl",onClick:s,children:(0,l.jsx)(m.$Ku,{})}),(0,l.jsx)("span",{className:"flex-grow-0 font-medium overflow-hidden text-ellipsis whitespace-nowrap mx-4",children:t.partDisplayName}),(0,l.jsx)("div",{className:"w-6"})]}),(0,l.jsxs)("div",{className:"p-5",children:[t.children.map(((e,t)=>(0,l.jsx)(h,{node:e},"bomItem_".concat(t)))),t.children.length>0&&(0,l.jsx)("div",{className:"h-5"}),(0,l.jsx)(u.xt,{node:t}),(0,l.jsxs)("div",{className:"text-[.9375rem] font-bold mt-5 mb-[.875rem]",children:[x("Attributable to Carbon Activities"),":"]}),f&&(0,l.jsx)(n.g,{}),b.map(((e,t)=>(0,l.jsx)(i.L6,{...e},"attrs_".concat(t))))]})]})}function h(e){const{node:t}=e,[s,n]=(0,x.Z)(!1);return(0,l.jsxs)("div",{onClick:()=>{n(!0),console.info("open bom modal")},className:"cursor-pointer flex justify-between items-end w-full px-5 py-3 border border-solid border-black rounded-lg [&:nth-child(n+2)]:mt-5",children:[(0,l.jsx)("div",{className:"text-lg flex-grow-0 whitespace-nowrap overflow-hidden text-ellipsis",children:t.partDisplayName}),(0,l.jsx)(m.nQU,{className:"text-2xl flex-shrink-0"}),s&&(0,l.jsx)(p,{node:t,onBack:e=>{n(!1),console.info("close bom modal"),e.stopPropagation()}})]})}function f(e){const{node:t}=e;return(0,l.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 text-black",children:[(0,l.jsx)("div",{className:"text-base font-bold",children:t.partDisplayName}),t.children.map(((e,t)=>(0,l.jsx)(h,{node:e},"bomItem_".concat(t))))]})}var b=s(9270),j=s(5462),g=s(8503),v=s(8416),N=s(2632),w=s(9080);var y=function(){const{t:e}=(0,d.$G)(),{current:t,items:s,onChange:a,current_product:i,loading:m}=(0,v.a)(),{value:x,loading:p}=(0,r.k)((()=>i?(0,o.RS)(i.id):Promise.resolve(void 0)),[i]),{value:h,loading:y}=(0,r.k)((()=>i?(0,o.eO)(i.id):Promise.resolve(void 0)),[i]),k=(0,c.useMemo)((()=>{if(!h||0===h.length)return;const e={};let t="";h.forEach((s=>{null===s.parentPartNumberId&&(t=s.id+""),s.children=[],e[s.id]||(e[s.id]=[]),e[s.id].push(s)})),h.forEach((t=>{const s=e[t.parentPartNumberId];s&&s.forEach(((e,s)=>{e.children.push(s>0?{...t}:t)}))}));const s=e[t];if(s&&s[0]&&s[0].children.length>0){const e=s[0];e.deep=0;const t=e=>{for(const s of e.children)s.deep=e.deep+1,s.parent=e,t(s)};return t(e),e}}),[h]),_=(0,b.dD)(),C=m||p||void 0==x||y||void 0==h,O=_?f:u.TU;return(0,l.jsx)(j.Z,{className:"text-black",children:C?(0,l.jsx)(n.g,{}):(0,l.jsx)(l.Fragment,{children:i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.P,{current:t,items:s,onChange:a}),(0,l.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT INFO")}),(0,l.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 flex items-center justify-between mo:flex-col mo:items-start",children:[(0,l.jsx)("img",{className:"object-contain w-[15.625rem] aspect-square rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:i.imageUrl||w.ES}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,l.jsx)(N.OZ,{label:e("Product Name"),text:i.name||"-"}),(0,l.jsx)(N.OZ,{label:e("Display Name"),text:i.displayName}),(0,l.jsx)(N.OZ,{label:e("Product UID"),text:i.id+""})]}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,l.jsx)(N.OZ,{label:e("From Organization"),text:i.organization.displayName+""}),(0,l.jsx)(N.OZ,{label:e("Product Type"),text:i.type}),(0,l.jsx)(N.OZ,{label:e("PCF Accountable"),text:void 0===x?"-":x?"YES":"NO"})]}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,l.jsx)(N.OZ,{label:e("Manufacturing Status"),text:1===i.manufacturingStatus?"Active":"Inactive"}),(0,l.jsx)(N.OZ,{label:e("Created At"),text:i.createTime}),(0,l.jsx)(N.OZ,{label:e("Last Update"),text:i.updateTime})]})]}),(0,l.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT BOM")}),k&&(0,l.jsx)(O,{node:k})]})})})}}},function(e){e.O(0,[13,439,930,222,489,535,36,774,888,179],(function(){return t=7394,e(e.s=t);var t}));var t=e.O();_N_E=t}]);