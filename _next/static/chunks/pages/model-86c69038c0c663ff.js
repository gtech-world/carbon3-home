(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{8722:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/model",function(){return t(3846)}])},8485:function(e,n,t){"use strict";t.d(n,{T$:function(){return d},T8:function(){return l}});var o=t(1527),r=t(4875),a=t.n(r),c=t(9270),s=t(570),i=t(7007);function l(e){const{className:n,children:t,...r}=e,i=(0,c.dD)();return(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-fit w-full bg-gray-16 relative",children:[i?(0,o.jsxs)("div",{className:"absolute z-0 top-0 w-full h-[43rem] overflow-hidden bg-green-2 ",children:[(0,o.jsx)("img",{className:"object-cover w-full absolute right-0 bottom-0",src:"/home-bg-r.jpg"}),(0,o.jsx)("div",{className:"w-full h-full absolute ssm:top-[calc(21.5rem_-_75vw)]",style:{background:"linear-gradient(180deg, #29953A 48.84%, rgba(34, 122, 48, 0) 96.76%)"}})]}):(0,o.jsxs)("div",{className:"absolute z-0 top-0 w-full h-[48.75rem] bg-green-2 overflow-hidden",children:[(0,o.jsx)("img",{className:"object-cover h-full absolute right-0 top-0",src:"/home-bg-r.jpg"}),(0,o.jsx)("div",{className:"w-full h-full absolute lg:left-[calc(50%_-_45rem)]",style:{background:"linear-gradient(182.16deg, #000000 -4.66%, rgba(0, 0, 0, 0) 17.13%)",transform:"matrix(-1, 0, 0, 1, 0, 0)"}}),(0,o.jsx)("div",{className:"w-full h-full absolute lg:left-[calc(50%_-_45rem)]",style:{background:"linear-gradient(270deg, #29953A 38.28%, rgba(34, 122, 48, 0) 77.8%)",transform:"matrix(-1, 0, 0, 1, 0, 0)"}})]}),(0,o.jsx)(s.h4,{className:"h-[6.75rem] mo:h-[4.25rem] mo:sticky mo:bg-white mo:text-green-2 mo:p-4"}),(0,o.jsx)("div",{className:a()("z-[2] flex-1 relative w-full mx-auto mo:mx-0 mo:flex mo:flex-col",n),...r,children:t})]})}function d(e){const{className:n,tits:t,isManager:r,children:l,...d}=e,u=(0,c.dD)(),f=(0,i.R)();return(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-fit w-full relative",children:[u?(0,o.jsx)(s.DJ,{}):(0,o.jsx)(s.h4,{tits:t,isManager:r,style:{top:"".concat(f,"px")},className:"!sticky px-[3.125rem] py-4 !max-w-none bg-green-2"}),(0,o.jsx)("div",{className:a()("z-[2] flex-1 relative w-full py-6 px-[3.125rem] mx-auto mo:px-5",n),...d,children:l})]})}},7361:function(e,n,t){"use strict";t.d(n,{k:function(){return a}});var o=t(959),r=t(6171);function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const t=(0,o.useRef)(!0),a=(0,o.useRef)(0),[,c]=(0,o.useState)(1),s=(0,o.useCallback)((e=>{t.current=e,c((e=>1-e))}),[]),[i,l]=(0,r.Z)(e,n),d=()=>{t.current||s(!0);const e=a.current+1>1e5?0:a.current+1;a.current=e,l().finally((()=>a.current==e&&s(!1)))};return(0,o.useEffect)((()=>{d()}),n),(0,o.useMemo)((()=>({...i,value:t.current||i.error?void 0:i.value,loading:t.current,req:d})),[i,t.current])}},4726:function(e,n,t){"use strict";t.d(n,{AC:function(){return E},BI:function(){return y},Ii:function(){return h},Iv:function(){return S},Mt:function(){return _},Pf:function(){return l},Ps:function(){return N},RN:function(){return x},RS:function(){return m},SO:function(){return j},Vd:function(){return v},av:function(){return C},eO:function(){return p},ep:function(){return g},fF:function(){return T},jw:function(){return f},pF:function(){return O},vz:function(){return R},x4:function(){return d}});var o=t(9270),r=t(8422),a=t(3993),c=t(3273);function s(e){return"".concat(a.Sg).concat(e)}function i(e){var n;const t=e.data;if(t){if(t.code&&1e5!==t.code)throw t.message;return null===(n=e.data)||void 0===n?void 0:n.data}}function l(e,n){return()=>n.some((e=>!e))?(0,c._v)():e()}async function d(e,n){return i(await r.Z.post(s("/api/base/login"),{name:e,password:n}))}function u(){const e=(0,o.is)();return e?{headers:{Authorization:"Bearer ".concat(e.loginToken)}}:{}}async function f(){return i(await r.Z.get(s("/api/npi/product/list"),u()))}async function m(e){return i(await r.Z.get(s("/api/npi/product/".concat(e,"/pcf_accountable")),u()))}async function p(e){return i(await r.Z.get(s("/api/npi/product/".concat(e,"/bom/list")),u()))}async function x(e){return i(await r.Z.get(s("/api/npi/product_bom/".concat(e,"/activity_types")),u()))}async function v(e){return i(await r.Z.get(s("/api/npi/product_process/query"),{...u(),params:{product_id:e,include_activity_types:!0}}))}async function g(e){return i(await r.Z.get(s("/api/npi/product/serial_number/".concat(e,"/info")),u()))}async function h(e){return i(await r.Z.get(s("/api/inventory/product/".concat(e,"/inventory")),u()))}async function y(e){let{pgNum:n,productId:t}=e;return i(await r.Z.get(s("/api/product-lca/model/query?pageNum=".concat(n,"&pageSize=10&productId=").concat(t>-1?t:"")),u()))}async function j(e){let{pgNum:n}=e;return i(await r.Z.get(s("/api/product-lca/result/query?pageNum=".concat(n,"&pageSize=10")),u()))}async function T(e){return i(await r.Z.get(s("/api/product-lca/result/detail/".concat(e)),u()))}async function O(e,n){return i(await r.Z.post(s("/api/product-lca/model/state/".concat(e,"/update/").concat(n)),null,u()))}async function C(e){let n=u();n.headers&&(n.headers["Content-Type"]="multipart/form-data");try{return await r.Z.post(s("/api/product-lca/model/upload"),e,n)}catch(t){console.log(t)}}async function N(){return i(await r.Z.get(s("/api/product/category/query"),u()))}async function _(e){let{name:n,categoryId:t,orgId:o,description:a}=e;return i(await r.Z.post(s("/api/product/upsert"),{name:n,categoryId:t,orgId:o,partNumber:"1",imageUrl:"",description:a},u()))}async function R(){return i(await r.Z.get(s("/api/product/list"),u()))}async function S(e){const n=await async function(e){const n=await r.Z.get(s("/api/product-lca/model/".concat(e,"/categories")),u());return JSON.parse(i(n))}(e),t=await async function(e){const n=await r.Z.get(s("/api/product-lca/model/".concat(e,"/descriptors")),u());return JSON.parse(i(n))}(e);return[n,t]}async function E(e,n,t){const o=await r.Z.get(s("/api/product-lca/model/".concat(e,"/item/").concat(n,"/").concat(t,"/info")),u());return JSON.parse(i(o))}},3846:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return re}});var o,r=t(1527),a=t(570),c=t(8485),s=t(7007),i=t(818);!function(e){e.PRODUCT_SYSTEM="PRODUCT_SYSTEM",e.PROCESS="PROCESS",e.FLOW="FLOW",e.EPD="EPD",e.IMPACT_METHOD="IMPACT_METHOD",e.IMPACT_CATEGORY="IMPACT_CATEGORY",e.SOCIAL_INDICATOR="SOCIAL_INDICATOR",e.PARAMETER="PARAMETER",e.DQ_SYSTEM="DQ_SYSTEM",e.FLOW_PROPERTY="FLOW_PROPERTY",e.UNIT_GROUP="UNIT_GROUP",e.CURRENCY="CURRENCY",e.ACTOR="ACTOR",e.SOURCE="SOURCE",e.LOCATION="LOCATION"}(o||(o={}));var l=t(4875),d=t.n(l),u=t(959),f=t(1671),m=t(8370),p=t(9077);const x=(0,u.createContext)(void 0);function v(){return(0,u.useContext)(x)}function g(e){const[n,t]=(0,u.useState)([]),[o,a]=(0,u.useState)(),c=(0,u.useCallback)((e=>{n.find((n=>n===e))||(n.length>=20?t([e].concat(n.slice(0,19))):t([e,...n])),a(e)}),[n,o]),s=(0,u.useCallback)((e=>{const r=n.filter((n=>n!==e));t(r),r.find((e=>e===o))||a(r[0])}),[n,o]);return(0,r.jsx)(x.Provider,{value:{navs:n,add:c,del:s,active:o,setActive:a},children:e.children})}const h=(0,u.createContext)({descriptores:{}});var y=t(5591),j=t(1875),T=t(7661),O=t(3967),C=t(5452);const N={Icon:T.G3d,color:"#9C27B0",needFixColor:!0},_={[o.PRODUCT_SYSTEM]:{Icon:y.TdV,color:"#1565C0"},[o.FLOW]:{Icon:j.nbt,color:"#0084FF"},[o.FLOW_PROPERTY]:{Icon:O.KOr,color:"#CE6D2F"},[o.UNIT_GROUP]:{Icon:C.YvB,color:"#1D4F64"},[o.ACTOR]:{Icon:y.Xws,color:"#556164"},[o.SOURCE]:{Icon:y.uYZ,color:"#556164"},[o.LOCATION]:{Icon:y.Nh4,color:"#556164"},[o.DQ_SYSTEM]:{Icon:O.USG,color:"#3A8772"},["folder-".concat(o.PRODUCT_SYSTEM)]:{Icon:y.$nz,color:"#1565C0"},["folder-".concat(o.PROCESS)]:{Icon:y.$nz,color:"#9C27B0"},["folder-".concat(o.FLOW)]:{Icon:y.$nz,color:"#CE6D2F"},["folder-".concat(o.FLOW_PROPERTY)]:{Icon:y.$nz,color:"#CE6D2F"},["folder-".concat(o.EPD)]:{Icon:y.$nz,color:"#21C393"},["folder-".concat(o.IMPACT_METHOD)]:{Icon:y.$nz,color:"#69B13E"},["folder-".concat(o.IMPACT_CATEGORY)]:{Icon:y.$nz,color:"#69B13E"},["folder-".concat(o.SOCIAL_INDICATOR)]:{Icon:y.$nz,color:"#EA9119"},["folder-".concat(o.DQ_SYSTEM)]:{Icon:y.$nz,color:"#37997D"},["folder-".concat(o.PARAMETER)]:{Icon:y.$nz,color:"#C60116"},["folder-".concat(o.UNIT_GROUP)]:{Icon:y.$nz,color:"#2F363A"},["folder-".concat(o.CURRENCY)]:{Icon:y.$nz,color:"#22614E"},["folder-".concat(o.ACTOR)]:{Icon:y.$nz,color:"#3388AF"},["folder-".concat(o.SOURCE)]:{Icon:y.$nz,color:"#577889"},["folder-".concat(o.LOCATION)]:{Icon:y.$nz,color:"#173855"},"folder-Indicators and parameters":{Icon:y.Mp$,color:"#556164"},"folder-Background data":{Icon:C.owA,color:"#999999"}};function R(e){const{Icon:n,color:t,needFixColor:o}=_[e.type]||N;return(0,r.jsx)(n,{color:t,className:d()(e.className,{fixGrColor:o})})}const S=(e,n)=>({data:{id:e.id.toString(),isLeaf:0===e.children.length,isOpenByDefault:e.modelType==o.PRODUCT_SYSTEM||0===n,name:e.name,nestingLevel:n,node:e},nestingLevel:n,node:e});function E(e){const{style:n,data:{name:t,nestingLevel:a,isLeaf:c,node:s},isOpen:i,setOpen:l}=e,u=s,{active:m,add:p}=v();return(0,r.jsxs)("div",{style:{...n,marginLeft:"".concat(20*a,"px"),width:"max-content",paddingRight:20,background:s===m?"rgba(34, 122, 48, 0.1)":"none"},className:d()("flex items-center py-[2px]",{"":s===m}),children:[(0,r.jsx)("button",{onClick:()=>l(!i),className:d()("text-sm mr-[6px]",{invisible:c}),children:i?(0,r.jsx)(f.ZXJ,{}):(0,r.jsx)(f.jfD,{})}),(0,r.jsxs)("div",{onClick:()=>{"content"==u.type&&[o.PRODUCT_SYSTEM.valueOf(),o.PROCESS.valueOf(),o.FLOW.valueOf(),o.FLOW_PROPERTY.valueOf(),o.IMPACT_METHOD.valueOf(),o.IMPACT_CATEGORY.valueOf()].includes(u.modelType)&&p(s),"folder"==u.type&&l(!i)},className:d()("flex text-sm gap-1 items-center cursor-pointer"),children:[(0,r.jsx)(R,{type:"folder"==u.type?"folder-".concat(u.modelType):u.modelType}),(0,r.jsx)("span",{className:d()("text-black whitespace-nowrap"),children:t})]})]})}function b(e){const{node:n}=e,t=(0,u.useCallback)((function*(){for(let e=0;e<n.children.length;e++)yield S(n.children[e],0);for(;;){const e=yield;for(let n=0;n<e.node.children.length;n++)yield S(e.node.children[n],e.nestingLevel+1)}}),[n]);return(0,r.jsx)(m.Z,{children:e=>{let{height:n,width:o}=e;return(0,r.jsx)(p.NC,{useIsScrolling:!0,width:o,height:n,itemSize:18,treeWalker:t,children:E})}})}function I(){const{active:e,navs:n,del:t,setActive:o}=v();return(0,r.jsx)("div",{className:"flex-shrink-0 flex border-b border-solid border-b-gray-16 overflow-x-auto",children:n.map(((n,a)=>(0,r.jsxs)("div",{onClick:()=>o(n),className:d()("flex gap-1 text-sm w-min leading-[14px] p-[.625rem] cursor-pointer",{"bg-gray-bg border border-solid border-gray-14":n===e}),children:[(0,r.jsx)(R,{type:n.modelType}),(0,r.jsx)("span",{className:"text-black whitespace-nowrap overflow-hidden text-ellipsis max-w-[600px]",children:n.name}),(0,r.jsx)(j.q5L,{className:"text-black cursor-pointer",onClick:e=>{t(n),e.stopPropagation()}})]},"tabs_".concat(a))))})}var P=t(4726),w=t(3273),A=t(6101);const D=t.n(A)()((()=>t.e(287).then(t.t.bind(t,9287,23))),{loadableGenerated:{webpack:()=>[9287]},ssr:!1});function F(e){return e.data?(0,r.jsx)(D,{src:e.data,collapsed:2}):null}function M(e){const{map:n,data:t}=e,o=Object.keys(n),[a,c]=(0,u.useState)(o[0]),s=n[a].json,i=s?null:n[a];return(0,r.jsxs)("div",{className:"flex-1 flex flex-col h-0",children:[(0,r.jsx)("div",{className:"h-[calc(100%-34px)] flex-1 flex flex-col overflow-auto p-5 gap-5",children:i?(0,r.jsx)(i,{data:t}):(0,r.jsx)(F,{data:s})}),(0,r.jsxs)("div",{className:"flex flex-shrink-0 overflow-x-auto",children:[o.map(((e,n)=>(0,r.jsx)("div",{onClick:()=>c(e),className:d()("leading-[34px] text-sm px-[10px] border border-solid border-gray-14 cursor-pointer whitespace-nowrap",{"text-green-2 border-transparent":e===a,"text-black":e!==a}),children:e},"type_tab_".concat(n)))),(0,r.jsx)("div",{className:"flex-1 border border-solid border-gray-14"})]})]})}var U=t(9592);function L(e){const{infos:n,title:t}=e,[o,a]=(0,U.Z)(!0);return(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex items-center cursor-pointer text-lg text-black",onClick:()=>a(),children:[t,o?(0,r.jsx)(y.IkZ,{className:"text-2xl "}):(0,r.jsx)(y.qL$,{className:"text-2xl"})]}),o&&(0,r.jsx)("div",{className:"mt-3 grid grid-cols-[auto_1fr] gap-x-5 gap-y-[10px] text-sm text-black",children:n.map(((e,n)=>{if(!e.length)return(0,r.jsx)("div",{className:"col-span-2",children:e},"infomation_".concat(n));const[t,o]=e;return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"font-bold",children:t}),(0,r.jsx)("div",{children:o})]},"infomation_".concat(n))}))})]})}function k(){return(0,r.jsx)("div",{className:"w-full h-[10px] bg-gray-16"})}function Y(e){const{type:n,name:t,def:o=""}=e;return t?n?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(R,{type:n}),t]}):(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(r.Fragment,{children:o})}function z(e){var n,t,a,c,s,i,l,d,u,f;const{data:m}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L,{title:"General information",infos:[["Name",m.name],["Category",(0,r.jsx)(Y,{type:"folder-".concat(o.PROCESS),name:null===(n=m.category)||void 0===n?void 0:n.name,def:"none"},"info_2")],["Description",m.description||"none"],["Tags","none"],["Infrastructure process",m.infrastructureProcess?"true":"false"]]}),(0,r.jsx)(k,{}),(0,r.jsx)(L,{title:"Time",infos:[["Start date",(0,w.pv)(null===(t=m.documentation)||void 0===t?void 0:t.validFrom)],["End date",(0,w.pv)(null===(a=m.documentation)||void 0===a?void 0:a.validUntil)],["Description",(null===(c=m.documentation)||void 0===c?void 0:c.time)||""]]}),(0,r.jsx)(k,{}),(0,r.jsx)(L,{title:"Geography",infos:[["Location",(null===(s=m.location)||void 0===s?void 0:s.name)||"none"],["Description",(null===(i=m.documentation)||void 0===i?void 0:i.geography)||""]]}),(0,r.jsx)(k,{}),(0,r.jsx)(L,{title:"Technology",infos:[["Description",(null===(l=m.documentation)||void 0===l?void 0:l.technology)||""]]}),(0,r.jsx)(k,{}),(0,r.jsx)(L,{title:"Data quality",infos:[["Process schema",(null===(d=m.location)||void 0===d?void 0:d.name)||"none"],["Data quality entry",m.dqEntry||"(not specified)"],["Flow schema",(null===(u=m.exchangeDqSystem)||void 0===u?void 0:u.name)||"none"],["Social schema",(null===(f=m.socialDqSystem)||void 0===f?void 0:f.name)||"none"]]})]})}function Z(e){const{infos:n,title:t,head:o,className:a}=e,[c,s]=(0,U.Z)(!0);return(0,r.jsxs)("div",{className:a,children:[(0,r.jsxs)("div",{className:"flex items-center cursor-pointer text-lg text-black",onClick:()=>s(),children:[t,c?(0,r.jsx)(y.IkZ,{className:"text-2xl "}):(0,r.jsx)(y.qL$,{className:"text-2xl"})]}),c&&(0,r.jsxs)("div",{style:{gridTemplateColumns:"repeat(".concat(o.length,", auto)")},className:"mt-3 grid text-sm text-black overflow-x-auto",children:[o.map(((e,n)=>(0,r.jsx)("div",{className:"px-3 py-2 font-bold text-sm whitespace-nowrap",children:e},"head_"+n))),n.map(((e,n)=>(0,r.jsx)(u.Fragment,{children:e.map(((e,t)=>(0,r.jsx)("div",{className:d()("text-xs px-3 py-[1px] whitespace-nowrap",{"bg-gray-16":n%2===0}),children:e},"body_col_"+t)))},"body_row_"+n)))]})]})}var G=t(2699),W=t.n(G);const $=["Flow","Category","Amount","Unit","Costs/Revenuse","Uncertainty","Avoided waste","Provider","Data quality entry","Location","Description"];function q(e){const{data:n}=e,{descriptores:t}=(0,u.useContext)(h),[a,c]=(0,u.useMemo)((()=>{const e=[],a=[],c=W().chain(t[o.PROCESS]).values().flatten().keyBy("id").value()||{};return n.exchanges.forEach(((n,t)=>{var s;const i=c[n.defaultProviderId];(n.isInput?e:a).push([(0,r.jsx)(Y,{type:o.FLOW,name:n.flow.name},"exchanges_".concat(t,"_1")),n.flow.category.name,n.amount,(0,r.jsx)(Y,{type:o.UNIT_GROUP,name:n.unit.name},"exchanges_".concat(t,"_2")),"","none","",(0,r.jsx)(Y,{type:o.PROCESS,name:null===i||void 0===i?void 0:i.name},"exchanges_".concat(t,"_3")),n.dqEntry||"",(null===(s=n.location)||void 0===s?void 0:s.name)||"",n.description||""])})),[e,a]}),[n,t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z,{title:"Inputs",head:$,infos:a}),(0,r.jsx)(k,{}),(0,r.jsx)(Z,{title:"Outputs",head:$,infos:c})]})}function B(e){var n,t,a,c,s;const{data:i}=e,l=null===(n=i.referenceExchange)||void 0===n?void 0:n.flow;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L,{title:"General information",infos:[["Name",i.name],["Category",(0,r.jsx)(Y,{type:"folder-".concat(o.PRODUCT_SYSTEM),name:null===(t=i.category)||void 0===t?void 0:t.name,def:"none"},"info_2")],["Description",i.description],["Tags","none"]]}),(0,r.jsx)(k,{}),(0,r.jsx)(L,{title:"Reference",infos:[["Process",(0,r.jsx)(Y,{type:o.PROCESS,name:null===(a=i.referenceProcess)||void 0===a?void 0:a.name,def:"none"},"ref_process")],["Product",(0,r.jsx)(Y,{type:"PRODUCT_FLOW"===(null===l||void 0===l?void 0:l.flowType)?o.PRODUCT_SYSTEM:"",name:null===l||void 0===l?void 0:l.name,def:"none"},"ref_product")],["Flow property",(0,r.jsx)(Y,{type:o.FLOW_PROPERTY,name:null===l||void 0===l||null===(c=l.referenceFlowProperty)||void 0===c?void 0:c.name,def:"none"},"ref_flow_pro")],["Unit",(0,r.jsx)(Y,{type:o.UNIT_GROUP,name:null===l||void 0===l||null===(s=l.referenceUnit)||void 0===s?void 0:s.name,def:"none"},"ref_unit")],["Target amount",i.targetAmount+""]]})]})}function H(e){const{data:n}=e,t=(0,u.useMemo)((()=>{var e;let t=null===(e=n.parameterSets)||void 0===e?void 0:e.find((e=>e.isBaseLine));t||(t={name:"Baseline",description:"",head:["Context","Parameter","Amount","Uncertainty","Description"],infos:[]});return W().sortBy((n.parameterSets||[]).filter((e=>e!==t)),["isBaseline","name"]).map((e=>({name:e.name,description:e.description,head:["Context","Parameter","Amount","Uncertainty","Description"],infos:[]})))}),[n]);return(0,r.jsx)(r.Fragment,{children:t.map(((e,n)=>(0,r.jsxs)(u.Fragment,{children:[n>0&&(0,r.jsx)(k,{}),(0,r.jsx)(L,{title:e.name,infos:[["Name",e.name],["Description",e.description],(0,r.jsx)(Z,{className:"ml-5",title:"Parameters",head:e.head,infos:e.infos},1)]})]},"parameter_".concat(n))))})}function Q(e){var n,t;const{data:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L,{title:"General information",infos:[["Name",a.name],["Category",(0,r.jsx)(Y,{type:"folder-".concat(o.FLOW),name:null===(n=a.category)||void 0===n?void 0:n.name,def:"none"},"info_2")],["Description",a.description||"none"],["Tags","none"],["Infrastructure flow",a.infrastructureFlow?"true":"false"]]}),(0,r.jsx)(k,{}),(0,r.jsx)(L,{title:"Additional information",infos:[["CAS Number",a.casNumber||"none"],["Formula",a.formula||"none"],["Synonyms",a.synonyms||"none"],["Location",(null===(t=a.location)||void 0===t?void 0:t.name)||"none"]]})]})}const J={[o.PRODUCT_SYSTEM]:function(e){const{data:n}=e;return(0,r.jsx)(M,{map:{"General information":B,Parameters:H},data:n})},[o.PROCESS]:function(e){const{data:n,json:t}=e;return(0,r.jsx)(M,{map:{"General information":z,"Inputs/Outputs":q,"Administrative information":{json:t},"Modeling and validation":{json:t},Parameters:{json:t},Allocation:{json:t}},data:n})},[o.FLOW]:function(e){const{data:n,json:t}=e;return(0,r.jsx)(M,{map:{"General information":Q,"Flow properties":{json:t}},data:n})}},V={};function X(e){return(0,r.jsx)("div",{className:"flex-1 p-5 overflow-auto",children:(0,r.jsx)(F,{data:e.json})})}function K(e){const{id:n}=e,{active:t}=v(),o=(0,u.useRef)(!0),[[a,c],s]=(0,u.useState)([void 0,void 0]),[l,d]=(0,u.useState)(!1),f=function(){const e=(0,u.useRef)(!0);return(0,u.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}();(0,u.useEffect)((()=>{if(o.current){for(const e in V)delete V[e];o.current=!1}if(!t||!t.data)return()=>{};const e=t.data,r="".concat(t.modelType,"_").concat(e.id);d(!0),V[r]||(V[r]=(0,P.AC)(n,t.modelType,t.data.id).then((e=>[(0,w.tV)(e),e]))),V[r].then((e=>{console.info("value:",e),f.current&&s(e)})).catch((()=>{delete V[r]})).finally((()=>{console.info("first:",f.current),f.current&&d(!1)}))}),[t,n]);const m=J[(null===t||void 0===t?void 0:t.modelType)||""]||X;return t?l?(0,r.jsx)(i.g,{}):a?(0,r.jsx)(m,{data:J[(null===t||void 0===t?void 0:t.modelType)||""]?a:c,json:c}):null:null}var ee=t(7361);const ne={[o.PRODUCT_SYSTEM]:"Product systems",[o.PROCESS]:"Processes",[o.FLOW]:"Flows",[o.EPD]:"EPDs",[o.IMPACT_METHOD]:"Impact assessment methods",[o.IMPACT_CATEGORY]:"Impact categories",[o.SOCIAL_INDICATOR]:"Social indicators",[o.PARAMETER]:"Global parameters",[o.DQ_SYSTEM]:"Data quality systems",[o.FLOW_PROPERTY]:"Flow properties",[o.UNIT_GROUP]:"Unit groups",[o.CURRENCY]:"Currencies",[o.ACTOR]:"Actors",[o.SOURCE]:"Sources",[o.LOCATION]:"Locations"};var te=t(3190),oe=t(2493);var re=function(){const e=(0,te.useRouter)().query.id,{value:n,loading:t}=(0,ee.k)((()=>e?(0,P.Iv)(e):Promise.resolve(void 0)),[e]),l=(0,u.useMemo)((()=>{if(!n)return;const[e,t]=n,r={id:"root",children:[],type:"folder",name:"database",modelType:"database"},a={},c={};(0,w.tV)(e).forEach((e=>{if(e.modelType){a[e.id]=e,c[e.modelType]||(c[e.modelType]={});const n=e.category?e.category.id:"null";c[e.modelType][n]||(c[e.modelType][n]=[]),c[e.modelType][n].push(e)}}));const s=[o.PRODUCT_SYSTEM,o.PROCESS,o.FLOW,o.EPD],i=[o.IMPACT_METHOD,o.IMPACT_CATEGORY,o.DQ_SYSTEM,o.SOCIAL_INDICATOR,o.PARAMETER],l=[o.FLOW_PROPERTY,o.UNIT_GROUP,o.CURRENCY,o.ACTOR,o.SOURCE,o.LOCATION],d=(e,n)=>{const o=e.toString();c[o]||(c[o]={});const r=(c[o][n]||[]).map((n=>({id:n.refId,children:d(e,n.id),name:n.name,type:"folder",modelType:n.modelType,data:n})));t[o.toString()]||(t[o]={});return[...r,...(t[o][n+""]||[]).map((n=>({id:n.refId,children:d(e,n.id),name:n.name,type:"content",modelType:n.type,data:n})))]},u=(e,n)=>{if(null!=e){const t={id:e,name:e,type:"folder",modelType:e,children:[]};r.children.push(t),t.children=n.map((e=>({id:e,name:ne[e],type:"folder",modelType:e,children:d(e,"null")})))}else n.forEach((e=>{r.children.push({id:e,name:ne[e],type:"folder",modelType:e,children:d(e,"null")})}))};return u(null,s),u("Indicators and parameters",i),u("Background data",l),console.info("root:",r),r}),[n]),d=(0,a.to)()+(0,s.R)();return(0,r.jsxs)(c.T$,{isManager:!0,className:"h-0 flex py-0 px-0",style:{maxHeight:"calc(100vh - ".concat(d,"px)")},children:[t&&(0,r.jsx)(i.I,{}),!!l&&(0,r.jsx)(g,{children:(0,r.jsx)(h.Provider,{value:{descriptores:n[1]},children:(0,r.jsxs)(oe.Z,{className:"split flex w-full",sizes:[1,99],minSize:260,snapOffset:1,gutterSize:6,gutterStyle:()=>({backgroundColor:"#f3f3f3",cursor:"col-resize"}),children:[(0,r.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,r.jsx)("div",{className:"border-b border-solid border-b-gray-16",children:(0,r.jsxs)("div",{className:"flex gap-[6px] text-sm w-min leading-[14px] p-[.625rem] bg-gray-bg border border-solid border-gray-14",children:[(0,r.jsx)(T.SxP,{className:"text-gray-9 fixGrColor"}),(0,r.jsx)("span",{className:"text-black",children:"Navigation"})]})}),(0,r.jsx)("div",{className:"flex-1 p-3",children:!!l&&(0,r.jsx)(b,{node:l})})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(I,{}),(0,r.jsx)(K,{id:e})]})]})})})]})}}},function(e){e.O(0,[713,769,307,574,740,758,420,556,509,463,570,774,888,179],(function(){return n=8722,e(e.s=n);var n}));var n=e.O();_N_E=n}]);