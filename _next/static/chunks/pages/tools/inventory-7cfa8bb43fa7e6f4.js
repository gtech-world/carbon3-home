(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4704],{2294:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/inventory",function(){return l(6784)}])},1201:function(e,t,l){"use strict";l.d(t,{u:function(){return o},z:function(){return i}});var n=l(3342),a=l(8591),r=l.n(a),s=l(4209);function i(e){let{children:t,className:l,...a}=e;return(0,n.jsx)("button",{...a,className:r()(l,"hover:bg-green-28"),children:e.children})}function o(e){let{busy:t,disabled:l,className:a,defStyle:i="btn-primary",children:o,...d}=e;return(0,n.jsx)("button",{className:r()(a,{[i]:!l,"btn-disable":l}),...d,children:t?(0,n.jsx)(s.fCD,{className:"animate-spin"}):o})}},4247:function(e,t,l){"use strict";l.d(t,{Ph:function(){return m},dW:function(){return x},ub:function(){return u}});var n=l(3342),a=l(5361),r=l(8591),s=l.n(r),i=l(9685),o=l(5295),d=l(2239),c=l(367);function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[l,n]=(0,i.useState)(t);return(0,i.useEffect)(()=>{n(t)},[e,t]),{onChange:n,items:e,current:l}}function m(e){let{items:t,current:l,onChange:r,className:x="bg-white text-black px-5 py-3 text-lg rounded-lg w-[31.25rem] mo:w-full mo:text-sm",currentClassName:m="flex justify-between items-center",openClassName:u="max-h-[18rem] bg-white  rounded-lg py-3 "}=e,h=t[l]?t[l].text:"",[p,f]=(0,d.Z)(!1),g=(0,i.useCallback)(e=>{l!==e&&r(e)},[l]),N=(0,a.E)("t-side");return((0,c.Z)(N,()=>p&&f(!1)),0===t.length)?null:(0,n.jsxs)("div",{ref:N,className:s()("relative cursor-pointer",x),onClick:()=>f(),children:[(0,n.jsxs)("div",{className:m,children:[(0,n.jsx)("span",{className:"truncate",children:h}),p?(0,n.jsx)(o.pzk,{}):(0,n.jsx)(o._i7,{})]}),p&&(0,n.jsx)("div",{className:s()("absolute z-[100] left-0 w-full overflow-x-hidden overflow-y-auto",u),style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:(0,n.jsx)("div",{className:"",children:t.map((e,t)=>(0,n.jsx)("div",{style:{},className:s()("w-full break-all px-5 py-2 text-sm hover:bg-gray-16",{"text-green-2":t===l}),onClick:()=>g(t),children:e.text},"select_item_".concat(t)))})})]})}let u=e=>(0,n.jsx)(m,{className:"h-[50px] px-5 items-center bg-stone-50 rounded-lg border border-neutral-200",currentClassName:"h-full flex justify-between items-center",...e})},124:function(e,t,l){"use strict";l.d(t,{m:function(){return f}});var n=l(3342),a=l(107),r=l(8996),s=l(1882),i=l(3958),o=l(8591),d=l.n(o),c=l(2577),x=l(3917),m=l(5390),u=l(1608),h=l(8761);function p(e){let{children:t,className:l,tits:r,showQuery:s,isManager:o,...p}=e,{push:f}=(0,a.useRouter)(),g=(0,h.fo)();return(0,i.dD)(),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:d()("w-full relative z-[3] max-w-[90rem] mx-auto text-white flex items-center top-0 px-[7.5rem] h-[4.25rem] justify-between",l),...p,children:[(0,n.jsxs)("div",{className:"flex items-center cursor-pointer ml-[-1rem] mo:ml-0",onClick:()=>f("/"),children:[(0,n.jsx)(c.Z,{className:"h-[2.275rem] mo:h-[2rem]"}),(0,n.jsx)(x.Z,{className:"h-[1.5rem] mt-2.5 ml-3 mo:h-[1.1rem] mo:mt-3"})]}),(0,n.jsx)(m.R,{menus:g,children:(0,n.jsx)("button",{className:"text-[2rem] mo:text-2xl",children:(0,n.jsx)(u.otZ,{})})})]})})}function f(e){let{className:t,canBack:l,children:i,link:o,isNew:c,containerClassName:x,...m}=e,{push:u}=(0,a.useRouter)(),h=(0,r.R)();return(0,n.jsxs)("div",{className:"relative flex flex-col flex-1 w-full h-full min-h-fit bg-gray-16",children:[(0,n.jsx)(p,{showQuery:!0,style:{top:"".concat(h,"px")},className:"!sticky px-[3.125rem] py-4 !max-w-none bg-green-2 mo:px-4 mo:h-[4.25rem]"}),(0,n.jsxs)("div",{className:d()("w-full h-full mx-auto px-[60px] flex flex-col flex-1",x,{" max-w-[90rem]":!c}),children:[l&&(0,n.jsxs)("div",{className:"flex items-center my-5 text-sm ".concat((null==o?void 0:o.pathName)?"cursor-default":"cursor-pointer"),onClick:()=>(null==o?void 0:o.pathName)?void 0:u("/carbon/service"),children:[!o&&(0,n.jsx)(s.YFh,{className:"text-lg"}),o&&"{}"!==JSON.stringify(o)?(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)("span",{className:"text-[#000000] cursor-pointer font-bold  text-[14px]",onClick:()=>u(null==o?void 0:o.pathName),children:o.homeTitle}),(0,n.jsx)("div",{className:"mx-1 ",children:" / "}),(0,n.jsxs)("span",{className:"cu text-[#999999] font-normal text-[14px]",children:[" ",o.currentTitle]})]}):"返回"]}),(0,n.jsx)("div",{className:d()("flex flex-col ",t),children:i})]})]})}},8469:function(e,t,l){"use strict";l.d(t,{d:function(){return x}});var n=l(3342),a=l(9455),r=l(9685);function s(){return(0,n.jsx)("tr",{className:" text-black text-center text-lg font-normal ",children:(0,n.jsx)("td",{colSpan:100,className:"h-[100px] py-5 align-top",children:"无数据"})})}var i=e=>{let{header:t,data:l,empty:a=(0,n.jsx)(s,{}),className:r="min-w-full relative",headerClassName:i="bg-neutral-200 sticky top-0 text-left text-black text-lg font-bold leading-[27px]",headerItemClassName:o="p-3",tbodyClassName:d="bg-white ",rowClassName:c="text-black text-sm font-normal whitespace-nowrap",cellClassName:x="p-3"}=e;return(0,n.jsxs)("table",{className:r,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:i,children:t.map((e,t)=>(0,n.jsx)("th",{scope:"col",className:o,children:e},t))})}),(0,n.jsxs)("tbody",{className:d,children:[l.map((e,t)=>(0,n.jsx)("tr",{className:c,children:e.map((e,t)=>(0,n.jsx)("td",{className:x,children:e},t))},t)),0===l.length&&a]})]})},o=l(5819),d=l(7207),c=l.n(d);function x(e){let{data:t,inputData:l,...s}=e,d=(0,r.useMemo)(()=>{var e;if(!t)return[];let n=l?c().mapKeys("string"==typeof l?(0,o.OA)(l)||[]:l,e=>e.paramName):{},a=(0,o.OA)(t)||[],r=(null===(e=a[0])||void 0===e?void 0:e.parameters)||[];return r.map(e=>{var t;return[e.name,e.context.name,e.value,(null===(t=n[e.name])||void 0===t?void 0:t.paramValue)||""]})},[t,l]);return(0,n.jsx)(a.u_,{title:"实景数据",...s,children:(0,n.jsx)("div",{className:"w-[40rem] px-5 max-h-mc overflow-y-auto",children:(0,n.jsx)(i,{data:d,header:["参数名","过程名称","参考值","输入值"]})})})}},9976:function(e,t,l){"use strict";l.d(t,{b:function(){return r},n:function(){return a}});var n=l(3958);function a(){let{userData:e,inited:t}=(0,n.oR)();return t&&(null==e?void 0:e.role)==="verify"}function r(){let{userData:e,inited:t}=(0,n.oR)();return t&&(null==e?void 0:e.role)!=="verify"}},6784:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return y}});var n=l(3342),a=l(2764),r=l(1201),s=l(3187),i=l(124),o=l(8469),d=l(9976),c=l(1844),x=l(5819),m=l(8591),u=l.n(m),h=l(9685),p=l(9455),f=l(8005),g=e=>{let{onOpenModal:t,realData:l,tableData:a,realArr:i}=e,o=(0,h.useMemo)(()=>null==a?void 0:a.map((e,t)=>{var l;return(null==i?void 0:i.length)&&(null===(l=i[t])||void 0===l?void 0:l.paramName)===e.name?{...e,inputValue:i[t].paramValue}:{...e}}),[a,i]);return(0,n.jsxs)(p.u_,{title:"实景数据填报",containerClassName:"mx-5 max-w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",onClose:"function"==typeof t&&t||void 0,children:[(0,n.jsx)("div",{className:" mx-5 w-[640px] max-h-[400px] overflow-y-auto ",children:(0,n.jsx)(s.i,{columns:[{title:"参数名",dataIndex:"name",width:"3rem",render:e=>(0,n.jsx)("div",{className:" flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:e})},{title:"过程名称",dataIndex:"name",width:"3rem",render:(e,t)=>(0,n.jsx)("div",{className:"flex items-center  h-[33px] font-normal leading-[21px] text-[14px] ",children:t.context.name})},{title:"参考值",width:"3rem",dataIndex:"value",render:e=>(0,n.jsx)("div",{className:"flex items-center h-[33px] font-normal leading-[21px] text-[14px] ",children:e})},{title:"填入值",width:"3rem",dataIndex:"createTime",render:(e,t)=>(0,n.jsx)("input",{defaultValue:t.inputValue,type:"number",className:"font-normal  leading-[21px] text-[14px] w-[10rem] h-[33px] "})}],tableId:"realDataTable",noContainer:!0,data:o,isSetBorder:!0,maxHeight:"calc(100vh - 260px)",headerClassName:{background:"#DDDDDD",position:"sticky",top:"-1px",fontWeight:"700",fontSize:"18px",lineHeight:"30px",height:"50px"}})}),(0,n.jsx)("div",{className:"mx-5 ",children:(0,n.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,n.jsx)(r.u,{onClick:"function"==typeof t&&t||void 0,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"取消"}),(0,n.jsx)(r.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:()=>{var e;let n=null===(e=document)||void 0===e?void 0:e.getElementById("realDataTable"),r=n.getElementsByTagName("tr"),s=[];for(let e=0;e<r.length;e++){let t=[],l=r[e].getElementsByTagName("input");for(let e=0;e<l.length;e++){let n=l[e].value;t.push(n)}s.push(t)}let i=[];i=null==a?void 0:a.map((e,t)=>{let l={processId:e.context["@id"],paramValue:s.slice(1)[t][0]||e.value.toString(),paramName:e.name,dateTime:(0,f.Ux)()};return l});let o={lcaParamList:i};"function"==typeof t&&t(),"function"==typeof l&&l(o)},children:"确定"})]})})]})},N=l(4247);let v={loadName:"",productId:""};var j=e=>{var t;let{openResultModal:l,getList:a}=e,[s,i]=(0,h.useState)(!1),[o,d]=(0,h.useState)([{name:"",id:""}]),[x,m]=(0,h.useState)({lcaParamList:[]}),[u,j]=(0,h.useState)([]),[w,b]=(0,h.useState)(v),y=(0,h.useMemo)(()=>o.map(e=>({...e,text:e.name})),[o]),k=(0,N.dW)(y,-1),C=null===(t=k.items[k.current])||void 0===t?void 0:t.id,[I,S]=(0,h.useState)(!0),D=()=>{(0,c.ev)().then(e=>{d(e||{name:"",id:""}),S(!1)}).catch(e=>{}).finally()};(0,h.useEffect)(()=>{D()},[]);let T=()=>{C&&i(!0)},_=async()=>{(0,c.NF)(C).then(e=>{let t=JSON.parse(e.paramDetail)[0]||[];j("{}"!==JSON.stringify(t)&&(null==t?void 0:t.parameters)?null==t?void 0:t.parameters:[])}).catch(e=>{}).finally()};return(0,h.useEffect)(()=>{C&&_()},[C]),I?null:(0,n.jsxs)(h.Fragment,{children:[(0,n.jsx)(p.u_,{className:"rounded-lg",containerClassName:"mx-5 w-[640px]",titleClassName:"text-[20px] leading-5 font-bold",title:"新建碳足迹结果",onClose:l,children:(0,n.jsxs)("div",{className:"mx-5 w-[640px] ",children:[(0,n.jsx)("span",{className:"font-normal leading-6 ",children:"碳足迹批次："}),(0,n.jsx)("input",{value:w.loadName,onChange:e=>{let{name:t,value:l}=e.target;b(e=>({...e,[t]:l}))},id:"loadName",name:"loadName",maxLength:30,className:"w-full mb-[20px] mt-[10px] px-5 border border-[#DDDDDD]  h-[50px]  bg-[#F8F8F8] rounded-lg"}),(0,n.jsx)("div",{className:"font-normal leading-6  mb-[10px]",children:"产品系统："}),(0,n.jsx)(N.ub,{...k,openClassName:"max-h-[9rem] bg-white  rounded-lg py-3 "}),(0,n.jsx)("div",{className:"mt-5 font-normal leading-6",children:"实景数据填报："}),(0,n.jsx)("div",{onClick:()=>T(),className:" flex cursor-pointer rounded-[4px] leading-4 text-[16px] mt-[10px] bg-[#F1F1F1] w-[84px] h-[24px]  text-center items-center justify-center ",children:"前往填写"}),(0,n.jsxs)("div",{className:"flex flex-row justify-between gap-5 mt-5",children:[(0,n.jsx)(r.u,{onClick:l,defStyle:"btn-primary-1",className:"flex-1  font-normal  h-[50px] border-2 text-[18px]",children:"取消"}),(0,n.jsx)(r.u,{className:"flex-1 h-[50px]  font-normal  text-[18px]",onClick:()=>{var e;let{loadName:t}=w;if(!t||!C)return;let n=null==u?void 0:u.map(e=>({processId:e.context["@id"],paramValue:e.value.toString(),paramName:e.name,dateTime:(0,f.Ux)()})),r=(null===(e=x.lcaParamList)||void 0===e?void 0:e.length)?x:{lcaParamList:n.length?n:void 0},s={...r,loadName:t,productId:C};(0,c.E)(s).then(e=>{"function"==typeof a&&a()}).catch(e=>{}).finally(()=>{"function"==typeof l&&l()})},disabled:!C||!w.loadName,children:"计算碳结果"})]})]})}),s&&(0,n.jsx)(g,{realData:m,tableData:u,realArr:x.lcaParamList,onOpenModal:()=>i(!1)})]})},w=l(8344);let b={[-1]:{color:"text-[red]",text:"计算失败"},0:{color:"text-[#FF9800]",text:"等待计算"},1:{color:"text-green-2",text:"查看结果"},2:{color:"text-blue-600",text:"正在计算"}};var y=function(){let[e,t]=(0,h.useState)(!1),[l,m]=(0,h.useState)(!1),p=(0,h.useRef)({inputData:"",data:""}),f=(0,h.useRef)(),g=(0,d.b)(),N=e=>{let{param:t,paramDetail:l}=e;p.current={inputData:t,data:l},m(!0)};(0,h.useEffect)(()=>{let e=setInterval(()=>{var e;null===(e=f.current)||void 0===e||e.reload()},1e4);return()=>{clearInterval(e)}},[]);let v=[{title:"碳足迹批次",dataIndex:"loadName",width:"L",render:e=>{let t={title:e,arrow:!0,disabled:e.length<9,theme:"light",followCursor:!0,className:"w-[180px] font-normal  text-lg leading-[27px] truncate inline-block"};return(0,n.jsxs)(w.Tooltip,{...t,children:[" ",e]})}},{title:"实景数据",dataIndex:"productName",width:"6rem",render:(e,t)=>(0,n.jsx)("div",{className:"flex justify-center text-lg leading-[27px]  w-[8rem] bg-[#F1F1F1] rounded",onClick:()=>N(t),children:(0,n.jsx)("span",{className:"cursor-pointer ",children:"查看实景数据"})})},{title:"批次结果ID",dataIndex:"loadNumber",width:"XXXL",render:e=>(0,n.jsx)(w.Tooltip,{title:e,arrow:!0,theme:"light",followCursor:!0,className:"text-lg leading-[27px] max-w-[15rem]  truncate inline-block",children:(0,x.lS)(e,8,8)})},{title:"产品系统名称",width:"2rem",dataIndex:"productName",render:e=>{let t={title:e,arrow:!0,disabled:e.length<15,followCursor:!0,theme:"light",className:"text-lg  truncate inline-block leading-[27px] max-w-[14rem]"};return(0,n.jsx)(w.Tooltip,{...t,children:e})}},{title:"系统产品ID",width:"7rem",dataIndex:"productUuid",render:e=>(0,n.jsxs)(w.Tooltip,{title:e,arrow:!0,followCursor:!0,theme:"light",className:"w-[13rem] text-lg leading-[27px]  truncate inline-block",children:[" ",(0,x.lS)(e,8,8)]})},{title:"产品系统版本",width:"1rem",dataIndex:"productVersion",render:e=>(0,n.jsx)("span",{className:" text-lg leading-[27px] max-w-[1rem] ",children:e})},{title:"描述",dataIndex:"productDescription",width:"13rem",render:e=>{let t={title:e,arrow:!0,disabled:e.length<11,theme:"light",followCursor:!0,className:"w-[11rem]  text-lg leading-[27px] truncate inline-block"};return(0,n.jsxs)(w.Tooltip,{...t,children:[" ",e||"-"]})}},{title:"操作人",dataIndex:"operator",width:"6.25rem",render:e=>{let t={title:e,arrow:!0,disabled:e.length<19,followCursor:!0,theme:"light"};return(0,n.jsxs)(w.Tooltip,{...t,children:[" ",e]})}},{title:"生成时间",dataIndex:"calculateSuccessTime",width:"18.625rem",render:e=>(0,n.jsx)("span",{className:"max-w-[13rem] text-lg leading-[27px]  truncate inline-block",children:e})},{title:"碳足迹结果",dataIndex:"description",width:"8.125rem",render:(e,t)=>{var l,r;return(0,n.jsx)("div",{className:u()("flex justify-between ".concat(null===(l=b[null==t?void 0:t.state])||void 0===l?void 0:l.color)),children:(0,n.jsx)(a.Z,{className:"cursor-pointer text-lg leading-[27px]",href:1===t.state&&"/tools/inventoryResult?id=".concat(t.loadNumber),children:null===(r=b[null==t?void 0:t.state])||void 0===r?void 0:r.text})})}},{title:"组织名称",dataIndex:"orgName",width:"8.125rem",render:e=>{let t={title:e,arrow:!0,theme:"light",followCursor:!0,disabled:e.length<11,className:"truncate inline-block text-lg leading-[27px] max-w-[14rem] "};return(0,n.jsxs)(w.Tooltip,{...t,children:[" ",e]})}},{title:"组织编号",dataIndex:"orgSerialNumber",width:"8.125rem",render:e=>{let t={title:e,disabled:e.length<11,arrow:!0,followCursor:!0,theme:"light",className:"truncate inline-block text-lg leading-[27px] max-w-[14rem] "};return(0,n.jsxs)(w.Tooltip,{...t,children:[" ",e]})}}];return(0,n.jsxs)(i.m,{isNew:!0,className:"flex flex-col justify-between flex-1 text-black ",canBack:!0,link:{pathName:"/tools/tools",homeTitle:"产品碳足迹工具集",currentTitle:"产品碳足迹实景清单工具"},children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(s.i,{headerTitle:(0,n.jsxs)("h3",{className:"flex items-center justify-between text-2xl font-semibold",children:[(0,n.jsx)("span",{children:"我的产品碳足迹结果"}),g&&(0,n.jsx)(r.z,{onClick:()=>t(!0),className:u()("w-40 text-lg font-normal text-white rounded-lg bg-green-2 h-11"),children:"新建碳足迹结果"})]}),noLoading:!0,tableRef:f,columns:v,api:c.h4,columnsHeight:"h-[3.125rem] ",mouseHoverKey:"loadNumber",columnsClassName:" cursor-default ",className:"",headerClassName:{background:"#fff",fontWeight:"700",fontSize:"18px",lineHeight:"27px",height:"3.125rem"}})}),e&&(0,n.jsx)(j,{openResultModal:()=>t(!1),getList:()=>{var e;null===(e=f.current)||void 0===e||e.reload(1)}}),l&&(0,n.jsx)(o.d,{...p.current,onClose:()=>m(!1)})]})}}},function(e){e.O(0,[3268,1271,7588,7038,8635,5070,8761,3187,9774,2888,179],function(){return e(e.s=2294)}),_N_E=e.O()}]);