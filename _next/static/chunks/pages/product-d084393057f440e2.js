(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{7394:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product",function(){return n(4448)}])},4186:function(e,t,n){"use strict";n.d(t,{C6:function(){return b},TU:function(){return v},xt:function(){return j}});var s=n(1527),a=n(1004),l=n(7361),r=n(4726),i=n(4875),c=n.n(i),o=n(959),d=n(8334),u=n(8370),m=n(9077),x=n(818),p=n(8633);const f=(0,o.createContext)(void 0),h=(e,t)=>({data:{id:e.id.toString(),isLeaf:0===e.children.length,isOpenByDefault:0===t,name:e.partDisplayName,nestingLevel:t,node:e},nestingLevel:t,node:e});function g(e){const{style:t,data:{name:n,nestingLevel:a,isLeaf:l,node:r},isOpen:i,setOpen:u}=e,[m,x]=(0,o.useContext)(f);return(0,s.jsxs)("div",{style:{...t,width:"max-content",marginLeft:"".concat(2.25*a+(l?2.25:0),"rem"),background:r===m?"rgba(34, 122, 48, 0.1)":"none"},className:c()("flex items-center px-5 py-3 rounded-lg",{"text-green-2":r===m}),children:[!l&&(0,s.jsx)("button",{onClick:()=>u(!i),className:"text-2xl mr-3",children:i?(0,s.jsx)(d.qT8,{}):(0,s.jsx)(d.Dwu,{})}),(0,s.jsx)("span",{className:c()("whitespace-nowrap cursor-pointer",{"font-bold":0===a}),onClick:()=>0!==a&&x(r),children:n})]})}function b(e){return(0,s.jsxs)("div",{className:"text-gray-6 text-lg whitespace-nowrap text-ellipsis overflow-hidden [&:nth-child(n+2)]:mt-4 mo:text-[.9375rem] mo:!mt-0",children:[(0,s.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]})}function j(e){var t;const{node:n}=e,{t:a}=(0,p.$G)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{label:a("Part Name"),text:n.partDisplayName}),(0,s.jsx)(b,{label:a("Part Type"),text:n.children.length>0?"Sub-system":"Bom"}),(0,s.jsx)(b,{label:a("BOM Genealogy Level"),text:"".concat(n.deep+1)}),(0,s.jsx)(b,{label:a("Parent"),text:(null===(t=n.parent)||void 0===t?void 0:t.partDisplayName)||"-"}),(0,s.jsx)(b,{label:a("Children"),text:"".concat(n.children.length||"No"," Child")}),(0,s.jsx)(b,{label:a("From Supplier"),text:n.supplierName||"-"}),(0,s.jsx)(b,{label:a("Last Update"),text:n.updateTime})]})}function v(e){const{node:t}=e,{t:n}=(0,p.$G)(),[i,c]=(0,o.useState)(t.children[0]),d=(0,o.useCallback)((function*(){for(yield h(t,0);;){const e=yield;for(let t=0;t<e.node.children.length;t++)yield h(e.node.children[t],e.nestingLevel+1)}}),[t]),{value:b,loading:v}=(0,l.k)((()=>(0,r.RN)(i.id)),[i]),w=(0,o.useMemo)((()=>b?b.map((e=>({title:e.displayName,sub:e.name}))):[]),[b]);return(0,s.jsxs)("div",{className:"w-full flex",children:[(0,s.jsx)("div",{className:"p-5 bg-white rounded-l-lg mr-1 w-[20rem] h-[27rem] text-lg text-black",children:(0,s.jsx)(f.Provider,{value:[i,c],children:(0,s.jsx)(u.Z,{disableWidth:!0,children:e=>{let{height:t}=e;return(0,s.jsx)(m.NC,{width:"100%",height:t,itemSize:50,treeWalker:d,children:g})}})})}),(0,s.jsxs)("div",{className:"px-8 pt-[2.125rem] pb-8 flex-1 bg-white rounded-r-lg h-[27rem] flex justify-between",children:[(0,s.jsx)("div",{className:"flex-1 w-0",children:(0,s.jsx)(j,{node:i})}),(0,s.jsx)("div",{className:"w-[3.5rem]"}),(0,s.jsxs)("div",{className:"w-0 flex-1 flex flex-col",children:[(0,s.jsxs)("div",{className:"text-lg font-bold mb-5",children:[n("Attributable to Carbon Activities"),":"]}),v?(0,s.jsx)(x.g,{}):(0,s.jsx)("div",{className:"flex-1 w-full overflow-y-auto",children:w.map(((e,t)=>(0,s.jsx)(a.L6,{...e},"attrs_".concat(t))))})]})]})]})}},5462:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var s=n(1527),a=n(9080),l=n(2132),r=n(4875),i=n.n(r),c=n(3190),o=n(959),d=n(8633),u=n(3961),m=n(7007);function x(e){const{className:t,children:n,...r}=e,{push:x,pathname:p}=(0,c.useRouter)(),f=function(){const{t:e}=(0,d.$G)();return(0,o.useMemo)((()=>a.aj.map((t=>({...t,txt:e(t.txt)})))),[e])}(),h=(0,l.E)(),g=(0,m.R)();return(0,s.jsxs)(u.se,{className:"flex text-black bg-white",children:[(0,s.jsx)("div",{className:"self-start relative w-[16.25rem] p-5 min-h-full mo:hidden",children:(0,s.jsx)("div",{style:{top:"calc(5.5rem + ".concat(g,"px)")},className:"w-full sticky top-[5.5rem]",children:f.map(((e,t)=>(0,s.jsxs)("div",{onClick:t=>{t.preventDefault(),x(e.to)},className:i()("cursor-pointer w-full py-3 pl-4 flex items-center flex-nowrap text-black rounded-lg",{"!text-green-2 bg-green-2/10":e.to===p}),children:[(0,s.jsx)(e.icon,{className:"mr-3 text-2xl"}),(0,s.jsx)("span",{className:"whitespace-nowrap text-lg font-medium",children:e.txt})]},"menus-".concat(t))))})}),(0,s.jsx)("div",{ref:h,className:i()("flex-1 p-5 bg-gray-16 mo:w-full",t),...r,children:n})]})}},8503:function(e,t,n){"use strict";n.d(t,{P:function(){return m},d:function(){return u}});var s=n(1527),a=n(2132),l=n(4875),r=n.n(l),i=n(959),c=n(7994),o=n(9592),d=n(8723);function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n,s]=(0,i.useState)(t);return(0,i.useEffect)((()=>{s(t)}),[e,t]),{onChange:s,items:e,current:n}}function m(e){const{items:t,current:n,onChange:l,className:u}=e,m=t[n]?t[n].text:"",[x,p]=(0,o.Z)(!1),f=(0,i.useCallback)((e=>{n!==e&&l(e)}),[n]),h=(0,a.E)("t-side");return(0,d.Z)(h,(()=>x&&p(!1))),0===t.length?null:(0,s.jsxs)("div",{ref:h,className:r()("bg-white text-black px-5 py-3 text-lg rounded-lg relative w-[31.25rem] cursor-pointer mo:w-full mo:text-sm",u),onClick:()=>p(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:m}),x?(0,s.jsx)(c.pzk,{}):(0,s.jsx)(c._i7,{})]}),x&&(0,s.jsx)("div",{className:"absolute left-0 w-full bg-white rounded-lg overflow-hidden py-3",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:t.map(((e,t)=>(0,s.jsx)("div",{style:{},className:r()("w-full px-5 py-2 text-sm",{"text-green-2":t===n}),onClick:()=>f(t),children:e.text},"select_item_".concat(t))))})]})}},1004:function(e,t,n){"use strict";n.d(t,{L6:function(){return i},Zx:function(){return c}});var s=n(1527),a=n(4875),l=n.n(a);function r(e){const{txt:t,type:n,className:a,...r}=e;return(0,s.jsx)("div",{...r,className:l()(a,"px-[5px] py-[2px] rounded text-xs text-white",{"bg-blue-0":"blue"===n,"bg-orange-16":"orange"===n}),children:t})}function i(e){const{title:t,sub:n,badge:a=[]}=e;return(0,s.jsxs)("div",{style:{border:"1px solid #000000"},className:l()("rounded-lg py-3 pl-3 pr-4 w-full overflow-hidden [&:nth-child(n+2)]:mt-5"),children:[(0,s.jsx)("div",{className:"text-black text-base w-full overflow-hidden whitespace-nowrap text-ellipsis",children:t}),(0,s.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,s.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:n}),a.map(((e,t)=>(0,s.jsx)(r,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t))))]})]})}function c(e){const{title:t,sub:n,badge:a=[],tit_r:i}=e;return(0,s.jsxs)("div",{className:l()("rounded-lg py-3 pl-3 pr-[.4375rem] w-full overflow-hidden [&:nth-child(2n+1)]:bg-gray-16"),children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"text-black text-base overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:t}),(0,s.jsx)("div",{className:"flex-1"}),void 0!==i&&(0,s.jsx)("div",{className:"shrink-0 whitespace-nowrap text-sm font-semibold text-green-2",children:i})]}),(0,s.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,s.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:n}),(0,s.jsx)("div",{className:"flex-1"}),a.map(((e,t)=>(0,s.jsx)(r,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t))))]})]})}},2632:function(e,t,n){"use strict";n.d(t,{OZ:function(){return u}});var s=n(1527),a=n(9270),l=n(5462),r=n(7361),i=n(4726),c=n(9080),o=n(818),d=n(8633);function u(e){const t=(0,a.dD)();return(0,s.jsx)("div",{className:"text-lg whitespace-nowrap [&:nth-child(n+2)]:mt-6 mo:!mt-0 mo:text-[.9375rem] mo:whitespace-pre",children:t?(0,s.jsxs)("div",{className:"hidden whitespace-normal mo:block text-gray-6",children:[(0,s.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-black font-bold",children:e.label}),(0,s.jsx)("div",{className:"text-gray-6",children:e.text})]})})}function m(e){return(0,s.jsx)("a",{href:e.to,className:"inline-block underline whitespace-nowrap mr-5 leading-normal text-sm text-blue-0 mt-[.375rem] mo:mt-[.875rem]",children:e.text})}function x(e){const{data:t}=e,{t:n}=(0,d.$G)();return(0,s.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden p-5 pb-8 mo:pb-5",children:[(0,s.jsx)("img",{className:"bg-transparent outline-none border-none w-full aspect-[2/1] object-contain",src:t.imageUrl||c.ES}),(0,s.jsx)("div",{className:"font-semibold text-lg text-black mo:text-base",children:t.displayName}),(0,s.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,s.jsx)(m,{to:"/product?product_id=".concat(t.id),text:n("View Product Definition")}),(0,s.jsx)(m,{to:"/activities?product_id=".concat(t.id),text:n("View PCF Template")}),(0,s.jsx)(m,{to:"/pcf",text:n("Query PCF Data")})]})]})}t.ZP=function(){var e;const{user:t}=(0,a.aF)(),{value:n,loading:m}=(0,r.k)(i.jw),{t:p}=(0,d.$G)();return t?(0,s.jsx)(l.Z,{className:"text-black",children:m?(0,s.jsx)(o.g,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("PROFILE")}),(0,s.jsxs)("div",{className:"mt-5 mb-8 w-full bg-white h-[21.5625rem] rounded-lg p-5 flex mo:flex-col mo:h-auto mo:p-[.9375rem] mo:mb-5",children:[(0,s.jsx)("img",{className:"object-scale-down h-full aspect-square bg-transparent rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:t.organization.imageUrl||c.hm}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(u,{label:p("Organization"),text:t.organization.displayName}),(0,s.jsx)(u,{label:p("Orgnization Type"),text:t.organization.type}),(0,s.jsx)(u,{label:p("Site"),text:(null===(e=t.organization.sitList[0])||void 0===e?void 0:e.displayName)||"-"}),(0,s.jsx)(u,{label:p("Account Owner"),text:t.name})]}),(0,s.jsxs)("div",{className:"py-1 ml-[5rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(u,{label:p("Account Role"),text:t.role}),(0,s.jsx)(u,{label:p("Authorization Level"),text:0===t.authLevel?"Read-Only":"Read-Only / Specified Products"}),(0,s.jsx)(u,{label:p("Last Login"),text:t.lastLoginTime})]})]}),(0,s.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:p("TARGET INVENTORIES")}),n&&(0,s.jsx)("div",{className:"mt-5 w-full grid gap-5 grid-cols-[repeat(auto-fill,minmax(21.875rem,1fr))] mo:grid-cols-1",children:n.map(((e,t)=>(0,s.jsx)(x,{data:e},"product_item_".concat(t))))})]})}):null}},7361:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var s=n(959),a=n(7077);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,s.useRef)(!0),l=(0,s.useRef)(0),[,r]=(0,s.useState)(1),i=(0,s.useCallback)((e=>{n.current=e,r((e=>1-e))}),[]),[c,o]=(0,a.Z)(e,t),d=()=>{n.current||i(!0);const e=l.current+1>1e5?0:l.current+1;l.current=e,o().finally((()=>l.current==e&&i(!1)))};return(0,s.useEffect)((()=>{d()}),t),(0,s.useMemo)((()=>({...c,value:n.current||c.error?void 0:c.value,loading:n.current,req:d})),[c,n.current])}},8416:function(e,t,n){"use strict";n.d(t,{a:function(){return c}});var s=n(8503),a=n(7361),l=n(4726),r=n(3190),i=n(959);function c(){const{value:e,loading:t}=(0,a.k)(l.jw),n=(0,i.useMemo)((()=>(e||[]).map((e=>({...e,text:e.displayName})))),[e]),{query:c}=(0,r.useRouter)(),o=(0,i.useMemo)((()=>{const e=c.product_id;if(e){const t=n.findIndex((t=>"".concat(t.id)==e));if(t>=0)return t}return 0}),[c,n]),{current:d,items:u,onChange:m}=(0,s.d)(n,o),x=n[d];return{products:e,current:d,items:u,onChange:m,current_product:x,loading:t}}},4726:function(e,t,n){"use strict";n.d(t,{Cd:function(){return w},Ii:function(){return b},Pf:function(){return o},RN:function(){return f},RS:function(){return x},Vd:function(){return h},Xg:function(){return j},aA:function(){return v},eO:function(){return p},ep:function(){return g},jw:function(){return m},x4:function(){return d}});var s=n(9270),a=n(8422),l=n(3993),r=n(3273);function i(e){return"".concat(l.Sg).concat(e)}function c(e){const t=e.data;if(t){if(t.code&&200!==t.code)throw t.msg;return e.data}}function o(e,t){return()=>t.some((e=>!e))?(0,r._v)():e()}async function d(e,t){return c(await a.Z.post(i("/api/v1/base/login"),{name:e,password:t}))}function u(){const e=(0,s.is)();return e?{headers:{Authorization:"Bearer ".concat(e.loginToken)}}:{}}async function m(){return c(await a.Z.get(i("/api/v1/npi/product/list"),u()))}async function x(e){return c(await a.Z.get(i("/api/v1/npi/product/".concat(e,"/pcf_accountable")),u()))}async function p(e){return c(await a.Z.get(i("/api/v1/npi/product/".concat(e,"/bom/list")),u()))}async function f(e){return c(await a.Z.get(i("/api/v1/npi/product_bom/".concat(e,"/activity_types")),u()))}async function h(e){return c(await a.Z.get(i("/api/v1/npi/product_process/query"),{...u(),params:{product_id:e,include_activity_types:!0}}))}async function g(e){return c(await a.Z.get(i("/api/v1/npi/product/serial_number/".concat(e,"/info")),u()))}async function b(e){return c(await a.Z.get(i("/api/v1/inventory/product/".concat(e,"/inventory")),u()))}async function j(e){return c(await a.Z.get(i("/api/v1/sbt/".concat(e,"/info"))))}async function v(e){return c(await a.Z.get(i("/api/v1/sbt/".concat(e,"/emission/inventory"))))}async function w(e){return c(await a.Z.get(i("/api/v1/sbt/token/".concat(e,"/detail"))))}},4448:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(1527),a=n(818),l=n(3046),r=n(1004),i=n(7361),c=n(4726),o=n(959),d=n(8633),u=n(7994),m=n(9592),x=n(4186);function p(e){const{node:t,onBack:n}=e,{t:m}=(0,d.$G)(),{value:p,loading:h}=(0,i.k)((()=>(0,c.RN)(t.id)),[t.id]),g=(0,o.useMemo)((()=>p?p.map((e=>({title:e.displayName,sub:e.name}))):[]),[p]);return(0,s.jsxs)(l.u,{className:"",children:[(0,s.jsxs)("div",{className:"sticky top-0 w-full bg-green-2 flex justify-between items-center h-[4.25rem] px-4 text-white",children:[(0,s.jsx)("button",{className:"text-2xl",onClick:n,children:(0,s.jsx)(u.$Ku,{})}),(0,s.jsx)("span",{className:"flex-grow-0 font-medium overflow-hidden text-ellipsis whitespace-nowrap mx-4",children:t.partDisplayName}),(0,s.jsx)("div",{className:"w-6"})]}),(0,s.jsxs)("div",{className:"p-5",children:[t.children.map(((e,t)=>(0,s.jsx)(f,{node:e},"bomItem_".concat(t)))),t.children.length>0&&(0,s.jsx)("div",{className:"h-5"}),(0,s.jsx)(x.xt,{node:t}),(0,s.jsxs)("div",{className:"text-[.9375rem] font-bold mt-5 mb-[.875rem]",children:[m("Attributable to Carbon Activities"),":"]}),h&&(0,s.jsx)(a.g,{}),g.map(((e,t)=>(0,s.jsx)(r.L6,{...e},"attrs_".concat(t))))]})]})}function f(e){const{node:t}=e,[n,a]=(0,m.Z)(!1);return(0,s.jsxs)("div",{onClick:()=>{a(!0),console.info("open bom modal")},className:"cursor-pointer flex justify-between items-end w-full px-5 py-3 border border-solid border-black rounded-lg [&:nth-child(n+2)]:mt-5",children:[(0,s.jsx)("div",{className:"text-lg flex-grow-0 whitespace-nowrap overflow-hidden text-ellipsis",children:t.partDisplayName}),(0,s.jsx)(u.nQU,{className:"text-2xl flex-shrink-0"}),n&&(0,s.jsx)(p,{node:t,onBack:e=>{a(!1),console.info("close bom modal"),e.stopPropagation()}})]})}function h(e){const{node:t}=e;return(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 text-black",children:[(0,s.jsx)("div",{className:"text-base font-bold",children:t.partDisplayName}),t.children.map(((e,t)=>(0,s.jsx)(f,{node:e},"bomItem_".concat(t))))]})}var g=n(9270),b=n(5462),j=n(8503),v=n(8416),w=n(2632),N=n(9080);var y=function(){const{t:e}=(0,d.$G)(),{current:t,items:n,onChange:l,current_product:r,loading:u}=(0,v.a)(),{value:m,loading:p}=(0,i.k)((()=>r?(0,c.RS)(r.id):Promise.resolve(void 0)),[r]),{value:f,loading:y}=(0,i.k)((()=>r?(0,c.eO)(r.id):Promise.resolve(void 0)),[r]),k=(0,o.useMemo)((()=>{if(!f||0===f.length)return;const e={};let t="";f.forEach((n=>{null===n.parentPartNumberId&&(t=n.id+""),n.children=[],e[n.id]||(e[n.id]=[]),e[n.id].push(n)})),f.forEach((t=>{const n=e[t.parentPartNumberId];n&&n.forEach(((e,n)=>{e.children.push(n>0?{...t}:t)}))}));const n=e[t];if(n&&n[0]&&n[0].children.length>0){const e=n[0];e.deep=0;const t=e=>{for(const n of e.children)n.deep=e.deep+1,n.parent=e,t(n)};return t(e),e}}),[f]),_=(0,g.dD)(),C=u||p||void 0==m||y||void 0==f,O=_?h:x.TU;return(0,s.jsx)(b.Z,{className:"text-black",children:C?(0,s.jsx)(a.g,{}):(0,s.jsx)(s.Fragment,{children:r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.P,{current:t,items:n,onChange:l}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT INFO")}),(0,s.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 flex items-center justify-between mo:flex-col mo:items-start",children:[(0,s.jsx)("img",{className:"object-contain w-[15.625rem] aspect-square rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:r.imageUrl||N.ES}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("Product Name"),text:r.name||"-"}),(0,s.jsx)(w.OZ,{label:e("Display Name"),text:r.displayName}),(0,s.jsx)(w.OZ,{label:e("Product UID"),text:r.id+""})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("From Organization"),text:r.organization.displayName+""}),(0,s.jsx)(w.OZ,{label:e("Product Type"),text:r.type}),(0,s.jsx)(w.OZ,{label:e("PCF Accountable"),text:void 0===m?"-":m?"YES":"NO"})]}),(0,s.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,s.jsx)(w.OZ,{label:e("Manufacturing Status"),text:1===r.manufacturingStatus?"Active":"Inactive"}),(0,s.jsx)(w.OZ,{label:e("Created At"),text:r.createTime}),(0,s.jsx)(w.OZ,{label:e("Last Update"),text:r.updateTime})]})]}),(0,s.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:e("PRODUCT BOM")}),k&&(0,s.jsx)(O,{node:k})]})})})}}},function(e){e.O(0,[13,439,930,222,489,535,961,774,888,179],(function(){return t=7394,e(e.s=t);var t}));var t=e.O();_N_E=t}]);