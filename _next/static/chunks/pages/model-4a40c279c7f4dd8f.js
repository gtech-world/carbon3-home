(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{8722:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/model",function(){return n(6606)}])},7361:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var o=n(959),r=n(6171);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,o.useRef)(!0),a=(0,o.useRef)(0),[,s]=(0,o.useState)(1),c=(0,o.useCallback)((e=>{n.current=e,s((e=>1-e))}),[]),[i,l]=(0,r.Z)(e,t),d=()=>{n.current||c(!0);const e=a.current+1>1e5?0:a.current+1;a.current=e,l().finally((()=>a.current==e&&c(!1)))};return(0,o.useEffect)((()=>{d()}),t),(0,o.useMemo)((()=>({...i,value:n.current||i.error?void 0:i.value,loading:n.current,req:d})),[i,n.current])}},4726:function(e,t,n){"use strict";n.d(t,{AC:function(){return j},BI:function(){return _},Ii:function(){return v},Iv:function(){return O},Pf:function(){return l},RN:function(){return x},RS:function(){return p},SO:function(){return g},Vd:function(){return h},av:function(){return C},eO:function(){return m},ep:function(){return y},jw:function(){return f},pF:function(){return T},x4:function(){return d}});var o=n(9270),r=n(8422),a=n(3993),s=n(3273);function c(e){return"".concat(a.Sg).concat(e)}function i(e){var t;const n=e.data;if(n){if(n.code&&1e5!==n.code)throw n.message;return null===(t=e.data)||void 0===t?void 0:t.data}}function l(e,t){return()=>t.some((e=>!e))?(0,s._v)():e()}async function d(e,t){return i(await r.Z.post(c("/api/base/login"),{name:e,password:t}))}function u(){const e=(0,o.is)();return e?{headers:{Authorization:"Bearer ".concat(e.loginToken)}}:{}}async function f(){return i(await r.Z.get(c("/api/npi/product/list"),u()))}async function p(e){return i(await r.Z.get(c("/api/npi/product/".concat(e,"/pcf_accountable")),u()))}async function m(e){return i(await r.Z.get(c("/api/npi/product/".concat(e,"/bom/list")),u()))}async function x(e){return i(await r.Z.get(c("/api/npi/product_bom/".concat(e,"/activity_types")),u()))}async function h(e){return i(await r.Z.get(c("/api/npi/product_process/query"),{...u(),params:{product_id:e,include_activity_types:!0}}))}async function y(e){return i(await r.Z.get(c("/api/npi/product/serial_number/".concat(e,"/info")),u()))}async function v(e){return i(await r.Z.get(c("/api/inventory/product/".concat(e,"/inventory")),u()))}async function _(e){let{pgNum:t}=e;return i(await r.Z.get(c("/api/product-lca/model/query?pageNum=".concat(t,"&pageSize=10")),u()))}async function g(e){let{pgNum:t}=e;return i(await r.Z.get(c("/api/product-lca/result/query?pageNum=".concat(t,"&pageSize=10")),u()))}async function T(e,t){return i(await r.Z.post(c("/api/product-lca/model/state/".concat(e,"/update/").concat(t)),null,u()))}async function C(e){let t=u();t.headers&&(t.headers["Content-Type"]="multipart/form-data");try{return await r.Z.post(c("/api/product-lca/model/upload"),e,t)}catch(n){console.log(n)}}async function O(e){const t=await async function(e){const t=await r.Z.get(c("/api/product-lca/model/".concat(e,"/categories")),u());return JSON.parse(i(t))}(e),n=await async function(e){const t=await r.Z.get(c("/api/product-lca/model/".concat(e,"/descriptors")),u());return JSON.parse(i(t))}(e);return[t,n]}async function j(e,t,n){const o=await r.Z.get(c("/api/product-lca/model/".concat(e,"/item/").concat(t,"/").concat(n,"/info")),u());return JSON.parse(i(o))}},5891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t}=e;0;return t},t.suspense=function(){const e=new Error(o.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=o.NEXT_DYNAMIC_NO_SSR_CODE,e};(0,n(1322).Z)(n(959));var o=n(5542)},4545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let n=s.default,r={loading:e=>{let{error:t,isLoading:n,pastDelay:o}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"===typeof e?r.loader=e:"object"===typeof e&&(r=o({},r,e));r=o({},r,t);const a=r.loader,c=()=>a().then(i);r.loadableGenerated&&(r=o({},r,r.loadableGenerated,{loader:c}),delete r.loadableGenerated);if("boolean"===typeof r.ssr){if(!r.ssr)return delete r.ssr,l(c,r);delete r.ssr}return n(r)},t.noSSR=l;var o=n(5321).Z,r=n(1322).Z,a=(0,n(6687).Z)(n(959)),s=r(n(4786)),c=r(n(5891));function i(e){return{default:e.default||e}}function l(e,t){delete t.webpack,delete t.modules;const n=a.lazy(e),o=t.loading,r=a.default.createElement(o,{error:null,isLoading:!0,pastDelay:!1,timedOut:!1});return e=>a.default.createElement(a.Suspense,{fallback:r},a.default.createElement(c.default,null,a.default.createElement(n,Object.assign({},e))))}("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;const o=(0,n(1322).Z)(n(959)).default.createContext(null);t.LoadableContext=o},4786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(5321).Z,r=(0,n(1322).Z)(n(959)),a=n(624);const s=[],c=[];let i=!1;function l(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((e=>(n.loading=!1,n.loaded=e,e))).catch((e=>{throw n.loading=!1,n.error=e,e})),n}function d(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t);n.lazy=r.default.lazy(n.loader);let o=null;function s(){if(!o){const t=new u(e,n);o={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return o.promise()}if(!i){const e=n.webpack?n.webpack():n.modules;e&&c.push((t=>{for(const n of e)if(-1!==t.indexOf(n))return s()}))}function l(e){!function(){s();const e=r.default.useContext(a.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach((t=>{e(t)}))}();const t=r.default.createElement(n.loading,{isLoading:!0,pastDelay:!0,error:null});return r.default.createElement(r.default.Suspense,{fallback:t},r.default.createElement(n.lazy,e))}return l.preload=()=>s(),l.displayName="LoadableComponent",l}class u{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};const{_res:e,_opts:t}=this;e.loading&&("number"===typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout((()=>{this._update({pastDelay:!0})}),t.delay)),"number"===typeof t.timeout&&(this._timeout=setTimeout((()=>{this._update({timedOut:!0})}),t.timeout))),this._res.promise.then((()=>{this._update({}),this._clearTimeouts()})).catch((e=>{this._update({}),this._clearTimeouts()})),this._update({})}_update(e){this._state=o({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((e=>e()))}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function f(e){return d(l,e)}function p(e,t){let n=[];for(;e.length;){let o=e.pop();n.push(o(t))}return Promise.all(n).then((()=>{if(e.length)return p(e,t)}))}f.preloadAll=()=>new Promise(((e,t)=>{p(s).then(e,t)})),f.preloadReady=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((t=>{const n=()=>(i=!0,t());p(c,e).then(n,n)}))},window.__NEXT_PRELOADREADY=f.preloadReady;var m=f;t.default=m},6606:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ne}});var o,r=n(1527),a=n(570),s=n(8485),c=n(7007),i=n(818);!function(e){e.PRODUCT_SYSTEM="PRODUCT_SYSTEM",e.PROCESS="PROCESS",e.FLOW="FLOW",e.EPD="EPD",e.IMPACT_METHOD="IMPACT_METHOD",e.IMPACT_CATEGORY="IMPACT_CATEGORY",e.SOCIAL_INDICATOR="SOCIAL_INDICATOR",e.PARAMETER="PARAMETER",e.DQ_SYSTEM="DQ_SYSTEM",e.FLOW_PROPERTY="FLOW_PROPERTY",e.UNIT_GROUP="UNIT_GROUP",e.CURRENCY="CURRENCY",e.ACTOR="ACTOR",e.SOURCE="SOURCE",e.LOCATION="LOCATION"}(o||(o={}));var l=n(4875),d=n.n(l),u=n(959),f=n(1671),p=n(8370),m=n(9077);const x=(0,u.createContext)(void 0);function h(){return(0,u.useContext)(x)}function y(e){const[t,n]=(0,u.useState)([]),[o,a]=(0,u.useState)(),s=(0,u.useCallback)((e=>{t.find((t=>t===e))||(t.length>=20?n([e].concat(t.slice(0,19))):n([e,...t])),a(e)}),[t,o]),c=(0,u.useCallback)((e=>{const r=t.filter((t=>t!==e));n(r),r.find((e=>e===o))||a(r[0])}),[t,o]);return(0,r.jsx)(x.Provider,{value:{navs:t,add:s,del:c,active:o,setActive:a},children:e.children})}const v=(0,u.createContext)({descriptores:{}});var _=n(5591),g=n(1875),T=n(7661),C=n(3967),O=n(5452);const j={Icon:T.G3d,color:"#9C27B0",needFixColor:!0},b={[o.PRODUCT_SYSTEM]:{Icon:_.TdV,color:"#1565C0"},[o.FLOW]:{Icon:g.nbt,color:"#0084FF"},[o.FLOW_PROPERTY]:{Icon:C.KOr,color:"#CE6D2F"},[o.UNIT_GROUP]:{Icon:O.YvB,color:"#1D4F64"},[o.ACTOR]:{Icon:_.Xws,color:"#556164"},[o.SOURCE]:{Icon:_.uYZ,color:"#556164"},[o.LOCATION]:{Icon:_.Nh4,color:"#556164"},[o.DQ_SYSTEM]:{Icon:C.USG,color:"#3A8772"},["folder-".concat(o.PRODUCT_SYSTEM)]:{Icon:_.$nz,color:"#1565C0"},["folder-".concat(o.PROCESS)]:{Icon:_.$nz,color:"#9C27B0"},["folder-".concat(o.FLOW)]:{Icon:_.$nz,color:"#CE6D2F"},["folder-".concat(o.FLOW_PROPERTY)]:{Icon:_.$nz,color:"#CE6D2F"},["folder-".concat(o.EPD)]:{Icon:_.$nz,color:"#21C393"},["folder-".concat(o.IMPACT_METHOD)]:{Icon:_.$nz,color:"#69B13E"},["folder-".concat(o.IMPACT_CATEGORY)]:{Icon:_.$nz,color:"#69B13E"},["folder-".concat(o.SOCIAL_INDICATOR)]:{Icon:_.$nz,color:"#EA9119"},["folder-".concat(o.DQ_SYSTEM)]:{Icon:_.$nz,color:"#37997D"},["folder-".concat(o.PARAMETER)]:{Icon:_.$nz,color:"#C60116"},["folder-".concat(o.UNIT_GROUP)]:{Icon:_.$nz,color:"#2F363A"},["folder-".concat(o.CURRENCY)]:{Icon:_.$nz,color:"#22614E"},["folder-".concat(o.ACTOR)]:{Icon:_.$nz,color:"#3388AF"},["folder-".concat(o.SOURCE)]:{Icon:_.$nz,color:"#577889"},["folder-".concat(o.LOCATION)]:{Icon:_.$nz,color:"#173855"},"folder-Indicators and parameters":{Icon:_.Mp$,color:"#556164"},"folder-Background data":{Icon:O.owA,color:"#999999"}};function E(e){const{Icon:t,color:n,needFixColor:o}=b[e.type]||j;return(0,r.jsx)(t,{color:n,className:d()(e.className,{fixGrColor:o})})}const S=(e,t)=>({data:{id:e.id.toString(),isLeaf:0===e.children.length,isOpenByDefault:e.modelType==o.PRODUCT_SYSTEM||0===t,name:e.name,nestingLevel:t,node:e},nestingLevel:t,node:e});function R(e){const{style:t,data:{name:n,nestingLevel:o,isLeaf:a,node:s},isOpen:c,setOpen:i}=e,l=s,{active:u,add:p}=h();return(0,r.jsxs)("div",{style:{...t,marginLeft:"".concat(20*o,"px"),width:"max-content",paddingRight:20,background:s===u?"rgba(34, 122, 48, 0.1)":"none"},className:d()("flex items-center py-[2px]",{"":s===u}),children:[(0,r.jsx)("button",{onClick:()=>i(!c),className:d()("text-sm mr-[6px]",{invisible:a}),children:c?(0,r.jsx)(f.ZXJ,{}):(0,r.jsx)(f.jfD,{})}),(0,r.jsxs)("div",{onClick:()=>{"content"==l.type&&p(s),"folder"==l.type&&i(!c)},className:d()("flex text-sm gap-1 items-center cursor-pointer"),children:[(0,r.jsx)(E,{type:"folder"==l.type?"folder-".concat(l.modelType):l.modelType}),(0,r.jsx)("span",{className:d()("text-black whitespace-nowrap"),children:n})]})]})}function P(e){const{node:t}=e,n=(0,u.useCallback)((function*(){for(let e=0;e<t.children.length;e++)yield S(t.children[e],0);for(;;){const e=yield;for(let t=0;t<e.node.children.length;t++)yield S(e.node.children[t],e.nestingLevel+1)}}),[t]);return(0,r.jsx)(p.Z,{children:e=>{let{height:t,width:o}=e;return(0,r.jsx)(m.NC,{useIsScrolling:!0,width:o,height:t,itemSize:18,treeWalker:n,children:R})}})}function N(){const{active:e,navs:t,del:n,setActive:o}=h();return(0,r.jsx)("div",{className:"flex-shrink-0 flex border-b border-solid border-b-gray-16 overflow-x-auto",children:t.map(((t,a)=>(0,r.jsxs)("div",{onClick:()=>o(t),className:d()("flex gap-1 text-sm w-min leading-[14px] p-[.625rem] cursor-pointer",{"bg-gray-bg border border-solid border-gray-14":t===e}),children:[(0,r.jsx)(E,{type:t.modelType}),(0,r.jsx)("span",{className:"text-black whitespace-nowrap overflow-hidden text-ellipsis max-w-[600px]",children:t.name}),(0,r.jsx)(g.q5L,{className:"text-black cursor-pointer",onClick:e=>{n(t),e.stopPropagation()}})]},"tabs_".concat(a))))})}var I=n(4726),w=n(3273),A=n(6101);const D=n.n(A)()((()=>n.e(287).then(n.t.bind(n,9287,23))),{loadableGenerated:{webpack:()=>[9287]},ssr:!1});function M(e){return e.data?(0,r.jsx)(D,{src:e.data,collapsed:2}):null}function L(e){const{map:t,data:n}=e,o=Object.keys(t),[a,s]=(0,u.useState)(o[0]),c=t[a].json,i=c?null:t[a];return(0,r.jsxs)("div",{className:"flex-1 flex flex-col h-0",children:[(0,r.jsx)("div",{className:"h-[calc(100%-34px)] flex-1 flex flex-col overflow-auto p-5 gap-5",children:i?(0,r.jsx)(i,{data:n}):(0,r.jsx)(M,{data:c})}),(0,r.jsxs)("div",{className:"flex flex-shrink-0 overflow-x-auto",children:[o.map(((e,t)=>(0,r.jsx)("div",{onClick:()=>s(e),className:d()("leading-[34px] text-sm px-[10px] border border-solid border-gray-14 cursor-pointer whitespace-nowrap",{"text-green-2 border-transparent":e===a,"text-black":e!==a}),children:e},"type_tab_".concat(t)))),(0,r.jsx)("div",{className:"flex-1 border border-solid border-gray-14"})]})]})}var k=n(9592);function F(e){const{infos:t,title:n}=e,[o,a]=(0,k.Z)(!0);return(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex items-center cursor-pointer text-lg text-black",onClick:()=>a(),children:[n,o?(0,r.jsx)(_.IkZ,{className:"text-2xl "}):(0,r.jsx)(_.qL$,{className:"text-2xl"})]}),o&&(0,r.jsx)("div",{className:"mt-3 grid grid-cols-[auto_1fr] gap-x-5 gap-y-[10px] text-sm text-black",children:t.map(((e,t)=>{let[n,o]=e;return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"font-bold",children:n}),(0,r.jsx)("div",{children:o})]},"infomation_".concat(t))}))})]})}function U(){return(0,r.jsx)("div",{className:"w-full h-[10px] bg-gray-16"})}function Y(e){const{type:t,name:n,def:o=""}=e;return n?t?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(E,{type:t}),n]}):(0,r.jsx)(r.Fragment,{children:n}):(0,r.jsx)(r.Fragment,{children:o})}function Z(e){var t,n,a,s,c,i,l,d,u;const{data:f}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F,{title:"General information",infos:[["Name",f.name],["Category",(0,r.jsx)(Y,{type:"folder-".concat(o.PROCESS),name:null===(t=f.category)||void 0===t?void 0:t.name,def:"none"},"info_2")],["Description",f.description||"none"],["Tags","none"],["Infrastructure process",f.infrastructureProcess||"none"]]}),(0,r.jsx)(U,{}),(0,r.jsx)(F,{title:"Time",infos:[["Start date",(0,w.pv)(null===(n=f.documentation)||void 0===n?void 0:n.validFrom)],["End date",(0,w.pv)(null===(a=f.documentation)||void 0===a?void 0:a.validUntil)],["Description",(null===(s=f.documentation)||void 0===s?void 0:s.time)||""]]}),(0,r.jsx)(U,{}),(0,r.jsx)(F,{title:"Geography",infos:[["Location",f.location||"none"],["Description",(null===(c=f.documentation)||void 0===c?void 0:c.geography)||""]]}),(0,r.jsx)(U,{}),(0,r.jsx)(F,{title:"Technology",infos:[["Description",(null===(i=f.documentation)||void 0===i?void 0:i.technology)||""]]}),(0,r.jsx)(U,{}),(0,r.jsx)(F,{title:"Data quality",infos:[["Process schema",(null===(l=f.location)||void 0===l?void 0:l.name)||"none"],["Data quality entry",f.dqEntry||"(not specified)"],["Flow schema",(null===(d=f.exchangeDqSystem)||void 0===d?void 0:d.name)||"none"],["Social schema",(null===(u=f.socialDqSystem)||void 0===u?void 0:u.name)||"none"]]})]})}function G(e){const{infos:t,title:n,head:o}=e,[a,s]=(0,k.Z)(!0);return(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex items-center cursor-pointer text-lg text-black",onClick:()=>s(),children:[n,a?(0,r.jsx)(_.IkZ,{className:"text-2xl "}):(0,r.jsx)(_.qL$,{className:"text-2xl"})]}),a&&(0,r.jsxs)("div",{style:{gridTemplateColumns:"repeat(".concat(o.length,", auto)")},className:"mt-3 grid text-sm text-black overflow-x-auto",children:[o.map(((e,t)=>(0,r.jsx)("div",{className:"px-3 py-2 font-bold text-sm whitespace-nowrap",children:e},"head_"+t))),t.map(((e,t)=>(0,r.jsx)(u.Fragment,{children:e.map(((e,n)=>(0,r.jsx)("div",{className:d()("text-xs px-3 py-[1px] whitespace-nowrap",{"bg-gray-16":t%2===0}),children:e},"body_col_"+n)))},"body_row_"+t)))]})]})}var z=n(2699),$=n.n(z);const W=["Flow","Category","Amount","Unit","Costs/Revenuse","Uncertainty","Avoided waste","Provider","Data quality entry","Location","Description"];function q(e){const{data:t}=e,{descriptores:n}=(0,u.useContext)(v),[a,s]=(0,u.useMemo)((()=>{const e=[],a=[],s=$().chain(n[o.PROCESS]).values().flatten().keyBy("id").value()||{};return t.exchanges.forEach(((t,n)=>{var c;const i=s[t.defaultProviderId];(t.isInput?e:a).push([(0,r.jsx)(Y,{type:o.FLOW,name:t.flow.name},"exchanges_".concat(n,"_1")),t.flow.category.name,t.amount,(0,r.jsx)(Y,{type:o.UNIT_GROUP,name:t.unit.name},"exchanges_".concat(n,"_2")),"","none","",(0,r.jsx)(Y,{type:o.PROCESS,name:null===i||void 0===i?void 0:i.name},"exchanges_".concat(n,"_3")),t.dqEntry||"",(null===(c=t.location)||void 0===c?void 0:c.name)||"",t.description||""])})),[e,a]}),[t,n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{title:"Inputs",head:W,infos:a}),(0,r.jsx)(U,{}),(0,r.jsx)(G,{title:"Outputs",head:W,infos:s})]})}function B(e){var t,n,a,s,c;const{data:i}=e,l=null===(t=i.referenceExchange)||void 0===t?void 0:t.flow;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F,{title:"General information",infos:[["Name",i.name],["Category",(0,r.jsx)(Y,{type:"folder-".concat(o.PRODUCT_SYSTEM),name:null===(n=i.category)||void 0===n?void 0:n.name,def:"none"},"info_2")],["Description",i.description],["Tags","none"]]}),(0,r.jsx)(U,{}),(0,r.jsx)(F,{title:"Reference",infos:[["Process",(0,r.jsx)(Y,{type:o.PROCESS,name:null===(a=i.referenceProcess)||void 0===a?void 0:a.name,def:"none"},"ref_process")],["Product",(0,r.jsx)(Y,{type:"PRODUCT_FLOW"===(null===l||void 0===l?void 0:l.flowType)?o.PRODUCT_SYSTEM:"",name:null===l||void 0===l?void 0:l.name,def:"none"},"ref_product")],["Flow property",(0,r.jsx)(Y,{type:o.FLOW_PROPERTY,name:null===l||void 0===l||null===(s=l.referenceFlowProperty)||void 0===s?void 0:s.name,def:"none"},"ref_flow_pro")],["Unit",(0,r.jsx)(Y,{type:o.UNIT_GROUP,name:null===l||void 0===l||null===(c=l.referenceUnit)||void 0===c?void 0:c.name,def:"none"},"ref_unit")],["Target amount",i.targetAmount+""]]})]})}function V(e){var t,n;const{data:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F,{title:"General information",infos:[["Name",a.name],["Category",(0,r.jsx)(Y,{type:"folder-".concat(o.FLOW),name:null===(t=a.category)||void 0===t?void 0:t.name,def:"none"},"info_2")],["Description",a.description||"none"],["Tags","none"],["Infrastructure flow",a.infrastructureFlow?"true":"false"]]}),(0,r.jsx)(U,{}),(0,r.jsx)(F,{title:"Additional information",infos:[["CAS Number",a.casNumber||"none"],["Formula",a.formula||"none"],["Synonyms",a.synonyms||"none"],["Location",(null===(n=a.location)||void 0===n?void 0:n.name)||"none"]]})]})}const X={[o.PRODUCT_SYSTEM]:function(e){const{data:t,json:n}=e;return(0,r.jsx)(L,{map:{"General information":B,Parameters:{json:t.parameterSets},"Model graph":{json:n},Statistics:{json:n}},data:t})},[o.PROCESS]:function(e){const{data:t,json:n}=e;return(0,r.jsx)(L,{map:{"General information":Z,"Inputs/Outputs":q,"Administrative information":{json:n},"Modeling and validation":{json:n},Parameters:{json:n},Allocation:{json:n},"Social aspects":{json:n},"Impact analysis":{json:n}},data:t})},[o.FLOW]:function(e){const{data:t,json:n}=e;return(0,r.jsx)(L,{map:{"General information":V,"Flow properties":{json:n}},data:t})}},H={};function Q(e){return(0,r.jsx)("div",{className:"flex-1 p-5 overflow-auto",children:(0,r.jsx)(M,{data:e.json})})}function J(e){const{id:t}=e,{active:n}=h(),o=(0,u.useRef)(!0),[[a,s],c]=(0,u.useState)([void 0,void 0]),[l,d]=(0,u.useState)(!1),f=function(){const e=(0,u.useRef)(!0);return(0,u.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}();(0,u.useEffect)((()=>{if(o.current){for(const e in H)delete H[e];o.current=!1}if(!n||!n.data)return()=>{};const e=n.data,r="".concat(n.modelType,"_").concat(e.id);d(!0),H[r]||(H[r]=(0,I.AC)(t,n.modelType,n.data.id).then((e=>[(0,w.tV)(e),e]))),H[r].then((e=>{f.current&&c(e)})).catch((()=>{delete H[r]})).finally((()=>{console.info("first:",f.current),f.current&&d(!1)}))}),[n,t]);const p=X[(null===n||void 0===n?void 0:n.modelType)||""]||Q;return n?l?(0,r.jsx)(i.g,{}):a?(0,r.jsx)(p,{data:X[(null===n||void 0===n?void 0:n.modelType)||""]?a:s,json:s}):null:null}var K=n(7361);const ee={[o.PRODUCT_SYSTEM]:"Product systems",[o.PROCESS]:"Processes",[o.FLOW]:"Flows",[o.EPD]:"EPDs",[o.IMPACT_METHOD]:"Impact assessment methods",[o.IMPACT_CATEGORY]:"Impact categories",[o.SOCIAL_INDICATOR]:"Social indicators",[o.PARAMETER]:"Global parameters",[o.DQ_SYSTEM]:"Data quality systems",[o.FLOW_PROPERTY]:"Flow properties",[o.UNIT_GROUP]:"Unit groups",[o.CURRENCY]:"Currencies",[o.ACTOR]:"Actors",[o.SOURCE]:"Sources",[o.LOCATION]:"Locations"};var te=n(3190);var ne=function(){const e=(0,te.useRouter)().query.id,{value:t,loading:n}=(0,K.k)((()=>e?(0,I.Iv)(e):Promise.resolve(void 0)),[e]),l=(0,u.useMemo)((()=>{if(!t)return;const[e,n]=t,r={id:"root",children:[],type:"folder",name:"database",modelType:"database"},a={},s={};(0,w.tV)(e).forEach((e=>{if(e.modelType){a[e.id]=e,s[e.modelType]||(s[e.modelType]={});const t=e.category?e.category.id:"null";s[e.modelType][t]||(s[e.modelType][t]=[]),s[e.modelType][t].push(e)}}));const c=[o.PRODUCT_SYSTEM,o.PROCESS,o.FLOW,o.EPD],i=[o.IMPACT_METHOD,o.IMPACT_CATEGORY,o.DQ_SYSTEM,o.SOCIAL_INDICATOR,o.PARAMETER],l=[o.FLOW_PROPERTY,o.UNIT_GROUP,o.CURRENCY,o.ACTOR,o.SOURCE,o.LOCATION],d=(e,t)=>{const o=e.toString();s[o]||(s[o]={});const r=(s[o][t]||[]).map((t=>({id:t.refId,children:d(e,t.id),name:t.name,type:"folder",modelType:t.modelType,data:t})));n[o.toString()]||(n[o]={});return[...r,...(n[o][t+""]||[]).map((t=>({id:t.refId,children:d(e,t.id),name:t.name,type:"content",modelType:t.type,data:t})))]},u=(e,t)=>{if(null!=e){const n={id:e,name:e,type:"folder",modelType:e,children:[]};r.children.push(n),n.children=t.map((e=>({id:e,name:ee[e],type:"folder",modelType:e,children:d(e,"null")})))}else t.forEach((e=>{r.children.push({id:e,name:ee[e],type:"folder",modelType:e,children:d(e,"null")})}))};return u(null,c),u("Indicators and parameters",i),u("Background data",l),console.info("root:",r),r}),[t]),d=(0,a.to)()+(0,c.R)();return(0,r.jsxs)(s.T$,{isManager:!0,className:"h-0 flex py-0 px-0",style:{maxHeight:"calc(100vh - ".concat(d,"px)")},children:[n&&(0,r.jsx)(i.I,{}),!!l&&(0,r.jsx)(y,{children:(0,r.jsxs)(v.Provider,{value:{descriptores:t[1]},children:[(0,r.jsxs)("div",{className:"w-[266px] min-w-[266px] max-w-[50%] border-r-[6px] border-solid border-r-gray-16 flex flex-col resize-x overflow-hidden",children:[(0,r.jsx)("div",{className:"border-b border-solid border-b-gray-16",children:(0,r.jsxs)("div",{className:"flex gap-[6px] text-sm w-min leading-[14px] p-[.625rem] bg-gray-bg border border-solid border-gray-14",children:[(0,r.jsx)(T.SxP,{className:"text-gray-9 fixGrColor"}),(0,r.jsx)("span",{className:"text-black",children:"Navigation"})]})}),(0,r.jsx)("div",{className:"flex-1 p-3",children:!!l&&(0,r.jsx)(P,{node:l})})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col w-0",children:[(0,r.jsx)(N,{}),(0,r.jsx)(J,{id:e})]})]})})]})}},6101:function(e,t,n){e.exports=n(4545)}},function(e){e.O(0,[574,713,769,307,740,758,420,556,509,485,774,888,179],(function(){return t=8722,e(e.s=t);var t}));var t=e.O();_N_E=t}]);