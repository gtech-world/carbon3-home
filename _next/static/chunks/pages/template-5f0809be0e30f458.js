(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[239],{1381:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/template",function(){return n(1705)}])},7921:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var r=n(1527),l=n(4875),s=n.n(l);function a(e){const{children:t,className:n,...l}=e;return(0,r.jsx)("button",{...l,className:s()(n,"hover:bg-green-28"),children:e.children})}},8503:function(e,t,n){"use strict";n.d(t,{P:function(){return x},d:function(){return u}});var r=n(1527),l=n(2132),s=n(4875),a=n.n(s),i=n(959),c=n(7994),o=n(9592),d=n(8723);function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n,r]=(0,i.useState)(t);return(0,i.useEffect)((()=>{r(t)}),[e,t]),{onChange:r,items:e,current:n}}function x(e){const{items:t,current:n,onChange:s,className:u}=e,x=t[n]?t[n].text:"",[m,f]=(0,o.Z)(!1),h=(0,i.useCallback)((e=>{n!==e&&s(e)}),[n]),p=(0,l.E)("t-side");return(0,d.Z)(p,(()=>m&&f(!1))),0===t.length?null:(0,r.jsxs)("div",{ref:p,className:a()("bg-white text-black px-5 py-3 text-lg rounded-lg relative w-[31.25rem] cursor-pointer mo:w-full mo:text-sm",u),onClick:()=>f(),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{children:x}),m?(0,r.jsx)(c.pzk,{}):(0,r.jsx)(c._i7,{})]}),m&&(0,r.jsx)("div",{className:"absolute left-0 w-full bg-white rounded-lg overflow-hidden py-3",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:t.map(((e,t)=>(0,r.jsx)("div",{style:{},className:a()("w-full px-5 py-2 text-sm",{"text-green-2":t===n}),onClick:()=>h(t),children:e.text},"select_item_".concat(t))))})]})}},7361:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(959),l=n(7077);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,r.useRef)(!0),s=(0,r.useRef)(0),[,a]=(0,r.useState)(1),i=(0,r.useCallback)((e=>{n.current=e,a((e=>1-e))}),[]),[c,o]=(0,l.Z)(e,t),d=()=>{n.current||i(!0);const e=s.current+1>1e5?0:s.current+1;s.current=e,o().finally((()=>s.current==e&&i(!1)))};return(0,r.useEffect)((()=>{d()}),t),(0,r.useMemo)((()=>({...c,value:n.current||c.error?void 0:c.value,loading:n.current,req:d})),[c,n.current])}},8416:function(e,t,n){"use strict";n.d(t,{a:function(){return c}});var r=n(8503),l=n(7361),s=n(4726),a=n(3190),i=n(959);function c(){const{value:e,loading:t}=(0,l.k)(s.jw),n=(0,i.useMemo)((()=>(e||[]).map((e=>({...e,text:e.displayName})))),[e]),{query:c}=(0,a.useRouter)(),o=(0,i.useMemo)((()=>{const e=c.product_id;if(e){const t=n.findIndex((t=>"".concat(t.id)==e));if(t>=0)return t}return 0}),[c,n]),{current:d,items:u,onChange:x}=(0,r.d)(n,o),m=n[d];return{products:e,current:d,items:u,onChange:x,current_product:m,loading:t}}},1705:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r,l=n(1527),s=n(9299),a=n(3702),i=n(9270),c=n(959);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var d=function(e){return c.createElement("svg",o({width:"1em",viewBox:"0 0 18 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{d:"M10.5 2a1.5 1.5 0 1 0-3 0h3ZM9 32l8.66-15H.34L9 32ZM7.5 2v16.5h3V2h-3Z"})))},u=n(4875),x=n.n(u),m=n(8633),f=n(9592);function h(e){const{data:t}=e,{activity:n,update:r}=(0,s.vz)(),a=n===t,{t:i}=(0,m.$G)();return(0,l.jsxs)("div",{className:"w-full h-[6.875rem] pr-[.625rem] relative cursor-pointer ",onClick:()=>r({activity:t,sourcing:0}),children:[(0,l.jsx)("div",{style:{border:a?"1px solid #29953A":"1px solid transparent"},className:x()("bg-white w-full h-full px-5 rounded-lg flex items-center justify-center"),children:(0,l.jsx)("div",{className:x()("font-bold grow-0 text-xl w-full whitespace-normal text-center break-words overflow-hidden",{"text-green-2":a}),children:i(t.name)})}),(0,l.jsx)("div",{style:{borderTop:"1px solid #29953A",borderRight:"1px solid #29953A",display:a?"block":"none"},className:"w-[.8839rem] h-[.8839rem] bg-white absolute right-[.1875rem] top-[2.99555rem] rotate-45"})]})}function p(e){const{data:t}=e,{t:n}=(0,m.$G)(),[r,s]=(0,f.Z)(!1);return(0,l.jsxs)("div",{className:"bg-white grow-0 w-full h-[6.875rem] cursor-pointer px-5 rounded-lg flex items-center justify-center",onClick:()=>s(!0),children:[(0,l.jsx)("div",{className:x()("font-bold grow-0 text-xl whitespace-normal text-center break-words overflow-hidden"),children:n(t.name)}),r&&(0,l.jsx)(a.f,{data:t,onBack:e=>{s(!1),e.stopPropagation()}})]})}function g(e){const{data:t}=e,n=(0,i.dD)(),{t:r}=(0,m.$G)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h5",{className:"text-center font-medium text-xl mb-2.5 mo:w-full mo:text-left mo:text-base mo:mb-5",children:r("Life Cycle Stages")}),t.map(((e,r)=>(0,l.jsxs)(c.Fragment,{children:[n?(0,l.jsx)(p,{data:e}):(0,l.jsx)(h,{data:e}),r<t.length-1&&(0,l.jsx)(d,{className:"text-green-2 text-lg my-[.625rem]"})]},"activites_root_".concat(r))))]})}function v(e){const{data:t}=e;return(0,l.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,l.jsx)(g,{data:t})})}var b=n(1004);function w(e){const{data:t,index:n}=e,{sourcing:r,update:a}=(0,s.vz)(),i=r===n;return(0,l.jsxs)("div",{className:"w-full h-[4.5rem] pr-[.625rem] relative cursor-pointer",style:{marginTop:n>0?"1.25rem":"0px"},onClick:()=>a({sourcing:n}),children:[(0,l.jsx)("div",{className:x()("bg-white w-full h-full px-3 rounded-lg flex items-center border border-solid border-black",{"border-green-2":i}),children:(0,l.jsx)("div",{style:{WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical"},className:x()(" grow-0 text-base w-full whitespace-normal break-words overflow-hidden text-ellipsis",{"text-green-2":i}),children:t.name})}),i&&(0,l.jsx)("div",{style:{borderTop:"1px solid #29953A",borderRight:"1px solid #29953A"},className:"w-[.8839rem] h-[.8839rem] bg-white absolute right-[.1875rem] top-[1.81rem] rotate-45"})]})}function j(e){const{data:t}=e,{t:n}=(0,m.$G)();return(0,l.jsxs)("div",{className:"flex-1 w-0 h-full overflow-y-auto ml-[.625rem]",children:[(0,l.jsx)("h5",{className:"text-center font-medium text-xl mb-2.5",children:n("Processes")}),(0,l.jsx)("div",{className:"bg-white p-5 rounded-lg",children:t.map(((e,t)=>(0,l.jsx)(c.Fragment,{children:(0,l.jsx)(w,{data:e,index:t})},"sourcing_item_".concat(t))))})]})}function N(e){const{data:t}=e,{t:n}=(0,m.$G)();return(0,l.jsxs)("div",{className:"flex-1 w-0 h-full ml-[.625rem] ",children:[(0,l.jsx)("h5",{className:"text-center font-medium text-xl mb-2.5",children:n("Emission Sources")}),(0,l.jsxs)("div",{className:"flex flex-col bg-white p-5 rounded-lg overflow-y-auto",children:[(0,l.jsx)("div",{className:"bg-white shrink-0 leading-normal text-black text-base font-semibold w-full whitespace-normal pb-5",children:(null===t||void 0===t?void 0:t.name)||""}),(0,l.jsx)("div",{className:"w-full h-0 flex-1 overflow-y-auto",children:null===t||void 0===t?void 0:t.activityTypes.map(((e,t)=>(0,l.jsx)(b.Zx,{title:"#".concat(t+1," ").concat(e.displayName),sub:e.description},"attrs_source_".concat(t))))})]})]})}function y(e){const{data:t}=e;return(0,l.jsx)(s.Wc,{init:{activity:t[0]},children:(0,l.jsx)(s.cM.Consumer,{children:e=>{let{activity:n,sourcing:r}=e;return(0,l.jsxs)("div",{className:"flex w-full h-full max-h-[36.9375rem]",children:[(0,l.jsx)("div",{className:"w-[15rem] shrink-0 flex flex-col items-center",children:(0,l.jsx)(g,{data:t})}),(0,l.jsx)(j,{data:n.processList}),(0,l.jsx)(N,{data:n.processList[r]})]})}})})}var k=n(5462),C=n(8503),T=n(9080),E=n(7361),_=n(8416),P=n(4726),O=n(818),D=n(7819),M=n(7921),F=n(3046);function A(){const{t:e}=(0,m.$G)(),t=(0,i.dD)();return(0,l.jsxs)("div",{children:[(0,l.jsx)(D.D,{text:e("TEMPLATE INFORMATION")}),(0,l.jsx)("div",{className:"bg-white rounded-lg flex-wrap flex justify-between px-10 py-8 mo:flex-col mo:px-4 mo:py-5",children:[[{title:"Product",text:"xxxx"},{title:"Template Name",text:"xxxx"}],[{title:"Template Status",text:"xxxx"},{title:"Template Type",text:"xxxx"}],[{title:"Boundary",text:"xxxx"},{title:"GWP Version",text:"xxxx"}]].map(((e,n)=>(0,l.jsx)("div",{className:"flex flex-col",children:e.map(((n,r)=>(0,l.jsxs)("div",{className:x()("flex flex-col mo:flex-row mo:leading-[1.725rem]",r===e.length-1&&"mt-6 mo:mt-0"),children:[(0,l.jsxs)("span",{className:"font-bold",children:[n.title,t&&":"]}),(0,l.jsx)("span",{className:"text-gray-6 mo:ml-1",children:n.text})]},"v".concat(r))))},"data".concat(n))))})]})}var I=function(){const{t:e}=(0,m.$G)(),[t,n]=(0,c.useState)(""),r=(0,c.useRef)(null),s=(0,c.useMemo)((()=>{let e={title:"",content:"",btn:[]};switch(t){case"create":e={title:"Create New Draft",content:"To create a new template draft, please upload a template file.",btn:[{text:"Upload File",onClick:()=>{var e;r.current&&(null===(e=r.current)||void 0===e||e.click())}}]};break;case"update":e={title:"Update Template",content:"To update a template draft, please upload a new template file.",btn:[{text:"Upload File",onClick:()=>{}}]};break;case"publish":e={title:"Publish Template",content:"To update a template draft, please upload a new template file.",btn:[{text:"Confirm Publish",onClick:()=>{}},{text:"Cancel",onClick:()=>n("")}]};break;case"disable":e={title:"Disable Template",content:"Disable this template and this template will be set to INACTIVE for PCF accounting. You cannot undo Disable.",btn:[{text:"Disable Template",onClick:()=>{}},{text:"Cancel",onClick:()=>n("")}]}}return e}),[t]),{current:a,items:o,onChange:d,current_product:u,loading:f}=(0,_.a)(),h=(0,i.dD)(),{value:p,loading:g}=(0,E.k)((()=>u?(0,P.Vd)(u.id):Promise.resolve(void 0)),[u]),b=(0,c.useMemo)((()=>{if(!p)return;const e=(0,T.AR)(),t={};return e.forEach((e=>t[e.name]=e)),p.forEach((e=>{var n,r;return null===(n=t[e.phase])||void 0===n||null===(r=n.processList)||void 0===r?void 0:r.push(e)})),e}),[p]),w=f||g||void 0==p;return(0,l.jsxs)(k.Z,{className:"text-black",children:[w?(0,l.jsx)(O.g,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between mo:flex-col-reverse",children:[(0,l.jsx)(D.D,{className:"mt-3",text:e("SELECT FROM PCF TEMPLATE")}),(0,l.jsx)(M.z,{onClick:()=>n("create"),className:"w-full w-[11.625rem] mo:w-full h-[2.8126rem] text-white text-center text-lg text-white bg-green-2 rounded-lg mo:text-base",children:"Create New Draft"})]}),(0,l.jsxs)("div",{className:"flex mo:flex-col",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h5",{className:"mb-2 text-gray-6",children:"Product"}),(0,l.jsx)(C.P,{className:"!w-full",current:a,onChange:d,items:o})]}),(0,l.jsxs)("div",{className:"flex-1 ml-5 mo:ml-0 mo:mt-5",children:[(0,l.jsx)("h5",{className:"mb-2 text-gray-6",children:"PCF Template"}),(0,l.jsx)(C.P,{className:"!w-full",current:a,onChange:d,items:o})]})]}),(0,l.jsx)(A,{}),(0,l.jsx)(D.D,{text:e("ACTIVITY DEFINITION")}),b&&(0,l.jsx)(l.Fragment,{children:h?(0,l.jsx)(v,{data:b}):(0,l.jsx)(y,{data:b})}),(0,l.jsx)(D.D,{text:e("SET THIS TEMPLATE")}),(0,l.jsxs)("div",{className:"flex mo:flex-col text-lg mo:text-base",children:[(0,l.jsx)(M.z,{onClick:()=>{},className:"w-full w-[11.25rem] mo:w-full h-[2.8126rem] text-white text-center text-white bg-green-2 rounded-lg",children:"Export Template"}),(0,l.jsx)(M.z,{onClick:()=>n("disable"),className:"w-full ml-5 w-[11.25rem] mo:w-full h-[2.8126rem] border border-green-2 text-green-2 text-center bg-green-2/10 rounded-lg hover:text-white mo:ml-0 mo:mt-5",children:"Disable Template"})]})]}),!!t&&(0,l.jsx)(F.u_,{className:"bg-opacity-50 bg-black mo:px-5 flex flex-col justify-center items-center",children:(0,l.jsxs)(F.fe,{className:"text-lg mo:text-base",children:[(0,l.jsx)(F.Io,{onClose:()=>{n("")},children:e(s.title)}),(0,l.jsx)("div",{className:"py-6",children:(0,l.jsx)("p",{children:e(s.content)})}),(0,l.jsx)("div",{className:"flex mo:flex-col",children:s.btn.map(((t,n)=>(0,l.jsx)(M.z,{onClick:()=>t.onClick&&t.onClick(),className:x()("w-full h-[2.8126rem] text-white text-center text-white bg-green-2 rounded-lg",n>0&&"ml-5 border border-green-2 text-green-2 bg-green-2/10 hover:text-white mo:ml-0 mo:mt-5"),children:e(t.text)},"".concat(n))))})]})}),(0,l.jsx)("input",{ref:r,onChange:e=>{console.log(e.target.files[0])},type:"file",hidden:!0})]})}},7077:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},r.apply(this,arguments)};Object.create;Object.create;var l=n(959);function s(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var s=(0,l.useRef)(0),a=function(){var e=(0,l.useRef)(!1),t=(0,l.useCallback)((function(){return e.current}),[]);return(0,l.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t}(),i=(0,l.useState)(n),c=i[0],o=i[1],d=(0,l.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var l=++s.current;return c.loading||o((function(e){return r(r({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return a()&&l===s.current&&o({value:e,loading:!1}),e}),(function(e){return a()&&l===s.current&&o({error:e,loading:!1}),e}))}),t);return[c,d]}}},function(e){e.O(0,[13,439,930,222,961,364,774,888,179],(function(){return t=1381,e(e.s=t);var t}));var t=e.O();_N_E=t}]);