(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{871:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product",function(){return n(165)}])},2458:function(e,t,n){"use strict";n.d(t,{C6:function(){return b},TU:function(){return j},xt:function(){return v}});var l=n(1527),a=n(6131),i=n(5912),s=n(5666),r=n(4875),o=n.n(r),c=n(959),d=n(8501),u=n(7223),m=n(1290),x=n(7162);let p=(0,c.createContext)(void 0),f=(e,t)=>({data:{id:e.id.toString(),isLeaf:0===e.children.length,isOpenByDefault:0===t,name:e.partDisplayName,nestingLevel:t,node:e},nestingLevel:t,node:e});function h(e){let{style:t,data:{name:n,nestingLevel:a,isLeaf:i,node:s},isOpen:r,setOpen:u}=e,[m,x]=(0,c.useContext)(p);return(0,l.jsxs)("div",{style:{...t,width:"max-content",marginLeft:"".concat(2.25*a+(i?2.25:0),"rem"),background:s===m?"rgba(34, 122, 48, 0.1)":"none"},className:o()("flex items-center px-5 py-3 rounded-lg",{"text-green-2":s===m}),children:[!i&&(0,l.jsx)("button",{onClick:()=>u(!r),className:"text-2xl mr-3",children:r?(0,l.jsx)(d.qT8,{}):(0,l.jsx)(d.Dwu,{})}),(0,l.jsx)("span",{className:o()("whitespace-nowrap cursor-pointer",{"font-bold":0===a}),onClick:()=>0!==a&&x(s),children:n})]})}function b(e){return(0,l.jsxs)("div",{className:"text-gray-6 text-lg whitespace-nowrap text-ellipsis overflow-hidden [&:nth-child(n+2)]:mt-4 mo:text-[.9375rem] mo:!mt-0",children:[(0,l.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]})}function v(e){var t;let{node:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b,{label:"Part Name",text:n.partDisplayName}),(0,l.jsx)(b,{label:"Part Type",text:n.children.length>0?"Sub-system":"Bom"}),(0,l.jsx)(b,{label:"BOM Genealogy Level",text:"".concat(n.deep+1)}),(0,l.jsx)(b,{label:"Parent",text:(null===(t=n.parent)||void 0===t?void 0:t.partDisplayName)||"-"}),(0,l.jsx)(b,{label:"Children",text:"".concat(n.children.length||"No"," Child")}),(0,l.jsx)(b,{label:"From Supplier",text:n.supplierName||"-"}),(0,l.jsx)(b,{label:"Last Update",text:n.updateTime})]})}function j(e){let{node:t}=e,[n,r]=(0,c.useState)(t.children[0]),o=(0,c.useCallback)(function*(){for(yield f(t,0);;){let e=yield;for(let n=0;n<e.node.children.length;n++)yield f(e.node.children[n],e.nestingLevel+1)}},[t]),{value:d,loading:b}=(0,i.k)(()=>(0,s.RN)(n.id),[n]),j=(0,c.useMemo)(()=>d?d.map(e=>({title:e.displayName,sub:e.name})):[],[d]);return(0,l.jsxs)("div",{className:"w-full flex",children:[(0,l.jsx)("div",{className:"p-5 bg-white rounded-l-lg mr-1 w-[20rem] h-[27rem] text-lg text-black",children:(0,l.jsx)(p.Provider,{value:[n,r],children:(0,l.jsx)(u.Z,{disableWidth:!0,children:e=>{let{height:t}=e;return(0,l.jsx)(m.NC,{width:"100%",height:t,itemSize:50,treeWalker:o,children:h})}})})}),(0,l.jsxs)("div",{className:"px-8 pt-[2.125rem] pb-8 flex-1 bg-white rounded-r-lg h-[27rem] flex justify-between",children:[(0,l.jsx)("div",{className:"flex-1 w-0",children:(0,l.jsx)(v,{node:n})}),(0,l.jsx)("div",{className:"w-[3.5rem]"}),(0,l.jsxs)("div",{className:"w-0 flex-1 flex flex-col",children:[(0,l.jsx)("div",{className:"text-lg font-bold mb-5",children:"Attributable to Carbon Activities:"}),b?(0,l.jsx)(x.g,{}):(0,l.jsx)("div",{className:"flex-1 w-full overflow-y-auto",children:j.map((e,t)=>(0,l.jsx)(a.L6,{...e},"attrs_".concat(t)))})]})]})]})}},5726:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var l=n(1527),a=n(5084),i=n(7008),s=n(4875),r=n.n(s),o=n(4166),c=n(959),d=n(3341),u=n(1917),m=n(6274),x=n(6261);let p=[{icon:d.nf1,txt:"User Dashboard",to:"/dashboard"},{icon:u.Sx5,txt:"Product Definition",to:"/product"},{icon:i.Z,txt:"Carbon Activities",to:"/activities"},{icon:m.C4h,txt:"PCF Inventories",to:"/pcf"}];function f(e){let{className:t,children:n,...i}=e,{push:s,pathname:d}=(0,o.useRouter)(),u=(0,c.useRef)(null);return(0,a.E)(u),(0,l.jsxs)(x.se,{className:"flex text-black !p-0 bg-white",children:[(0,l.jsx)("div",{className:"sticky self-start top-[4.25rem] w-[16.25rem] p-5 min-h-full mo:hidden",children:p.map((e,t)=>(0,l.jsxs)("div",{onClick:t=>{t.preventDefault(),s(e.to)},className:r()("cursor-pointer w-full py-3 pl-4 flex items-center flex-nowrap text-black rounded-lg",{"!text-green-2 bg-green-2/10":e.to===d}),children:[(0,l.jsx)(e.icon,{className:"mr-3 text-2xl"}),(0,l.jsx)("span",{className:"whitespace-nowrap text-lg font-medium",children:e.txt})]},"menus-".concat(t)))}),(0,l.jsx)("div",{ref:u,className:r()("flex-1 p-5 min-h-full bg-gray-16 mo:w-full",t),...i,children:n})]})}},4631:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var l=n(1527),a=n(4875),i=n.n(a),s=n(959),r=n(2888);function o(e){let{className:t,children:n,...a}=e,[o,c]=(0,s.useState)();return((0,s.useEffect)(()=>{let e=document.getElementById("__app");e&&c(e)},[]),o)?(0,r.createPortal)((0,l.jsx)("div",{...a,className:i()("fixed left-0 top-0 w-full h-full overflow-auto z-50 bg-white",t),children:n}),o):null}},6816:function(e,t,n){"use strict";n.d(t,{P:function(){return m},d:function(){return u}});var l=n(1527),a=n(5084),i=n(4875),s=n.n(i),r=n(959),o=n(1917),c=n(5309),d=n(2053);function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[n,l]=(0,r.useState)(t);return(0,r.useEffect)(()=>{l(t)},[e,t]),{onChange:l,items:e,current:n}}function m(e){let{items:t,current:n,onChange:i,className:u}=e,m=t[n]?t[n].text:"",[x,p]=(0,c.Z)(!1),f=(0,r.useCallback)(e=>{n!==e&&i(e)},[n]),h=(0,r.useRef)(null);return((0,a.E)(h,"t-side"),(0,d.Z)(h,()=>x&&p(!1)),0===t.length)?null:(0,l.jsxs)("div",{ref:h,className:s()("bg-white text-black px-5 py-3 text-lg rounded-lg relative w-[31.25rem] cursor-pointer mo:w-full mo:text-sm",u),onClick:()=>p(),children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:m}),x?(0,l.jsx)(o.pzk,{}):(0,l.jsx)(o._i7,{})]}),x&&(0,l.jsx)("div",{className:"absolute left-0 w-full bg-white rounded-lg overflow-hidden py-3",style:{boxShadow:"0px 5px 15px rgba(0, 0, 0, 0.15)",top:"calc(100% + 8px)"},children:t.map((e,t)=>(0,l.jsx)("div",{style:{},className:s()("w-full px-5 py-2 text-sm",{"text-green-2":t===n}),onClick:()=>f(t),children:e.text},"select_item_".concat(t)))})]})}},6558:function(e,t,n){"use strict";n.d(t,{AR:function(){return i},ES:function(){return r},GF:function(){return s},RG:function(){return l},hm:function(){return o},z5:function(){return a}});let l=["Sourcing & Pre-treatment","Production","Distribution","Use & Disposal"];function a(){return l.map(e=>({name:e,processList:[],progress:0,carbon_emission:0}))}function i(){return l.map(e=>({name:e,processList:[]}))}function s(){return l.map(e=>({name:e,progress:0,carbon_emission:0,verified:!1}))}let r="/car.png",o="/org.png"},6131:function(e,t,n){"use strict";n.d(t,{L6:function(){return r},Zx:function(){return o}});var l=n(1527),a=n(4875),i=n.n(a);function s(e){let{txt:t,type:n,className:a,...s}=e;return(0,l.jsx)("div",{...s,className:i()(a,"px-[5px] py-[2px] rounded text-xs text-white",{"bg-blue-0":"blue"===n,"bg-orange-16":"orange"===n}),children:t})}function r(e){let{title:t,sub:n,badge:a=[]}=e;return(0,l.jsxs)("div",{style:{border:"1px solid #000000"},className:i()("rounded-lg py-3 pl-3 pr-4 w-full overflow-hidden [&:nth-child(n+2)]:mt-5"),children:[(0,l.jsx)("div",{className:"text-black text-base w-full overflow-hidden whitespace-nowrap text-ellipsis",children:t}),(0,l.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,l.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:n}),a.map((e,t)=>(0,l.jsx)(s,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t)))]})]})}function o(e){let{title:t,sub:n,badge:a=[],tit_r:r}=e;return(0,l.jsxs)("div",{className:i()("rounded-lg py-3 pl-3 pr-[.4375rem] w-full overflow-hidden [&:nth-child(2n+1)]:bg-gray-16"),children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"text-black text-base overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:t}),(0,l.jsx)("div",{className:"flex-1"}),void 0!==r&&(0,l.jsx)("div",{className:"shrink-0 whitespace-nowrap text-sm font-semibold text-green-2",children:r})]}),(0,l.jsxs)("div",{className:"flex mt-[.625rem]",children:[(0,l.jsx)("div",{className:"text-gray-9 text-sm overflow-hidden whitespace-nowrap text-ellipsis mr-2",children:n}),(0,l.jsx)("div",{className:"flex-1"}),a.map((e,t)=>(0,l.jsx)(s,{style:{marginLeft:6},className:"shrink-0",...e},"attrs1_badge_".concat(t)))]})]})}},9218:function(e,t,n){"use strict";n.d(t,{OZ:function(){return d}});var l=n(1527),a=n(5032),i=n(5726),s=n(5912),r=n(5666),o=n(6558),c=n(7162);function d(e){let t=(0,a.dD)();return(0,l.jsx)("div",{className:"text-lg whitespace-nowrap [&:nth-child(n+2)]:mt-6 mo:!mt-0 mo:text-[.9375rem] mo:whitespace-pre",children:t?(0,l.jsxs)("div",{className:"hidden whitespace-normal mo:block text-gray-6",children:[(0,l.jsxs)("span",{className:"text-black font-bold",children:[e.label,":"]})," ",e.text]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-black font-bold",children:e.label}),(0,l.jsx)("div",{className:"text-gray-6",children:e.text})]})})}function u(e){return(0,l.jsx)("a",{href:e.to,className:"inline-block underline whitespace-nowrap mr-5 leading-normal text-sm text-blue-0 mt-[.375rem] mo:mt-[.875rem]",children:e.text})}function m(e){let{data:t}=e;return(0,l.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden p-5 pb-8 mo:pb-5",children:[(0,l.jsx)("img",{className:"bg-transparent outline-none border-none w-full aspect-[2/1] object-contain",src:t.imageUrl||o.ES}),(0,l.jsx)("div",{className:"font-semibold text-lg text-black mo:text-base",children:t.displayName}),(0,l.jsxs)("div",{className:"w-full flex flex-wrap",children:[(0,l.jsx)(u,{to:"/product?product_id=".concat(t.id),text:"View Product Definition"}),(0,l.jsx)(u,{to:"/activities?product_id=".concat(t.id),text:"View PCF Template"}),(0,l.jsx)(u,{to:"/pcf",text:"Query PCF Data"})]})]})}t.ZP=function(){var e;let{user:t}=(0,a.aF)(),{value:n,loading:u}=(0,s.k)(r.jw);return t?(0,l.jsx)(i.Z,{className:"text-black",children:u?(0,l.jsx)(c.g,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:"PROFILE"}),(0,l.jsxs)("div",{className:"mt-5 mb-8 w-full bg-white h-[21.5625rem] rounded-lg p-5 flex mo:flex-col mo:h-auto mo:p-[.9375rem] mo:mb-5",children:[(0,l.jsx)("img",{className:"object-scale-down h-full aspect-square bg-transparent rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:t.organization.imageUrl||o.hm}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,l.jsx)(d,{label:"Organization",text:t.organization.displayName}),(0,l.jsx)(d,{label:"Orgnization Type",text:t.organization.type}),(0,l.jsx)(d,{label:"Site",text:(null===(e=t.organization.sitList[0])||void 0===e?void 0:e.displayName)||"-"}),(0,l.jsx)(d,{label:"Account Owner",text:t.name})]}),(0,l.jsxs)("div",{className:"py-1 ml-[5rem] mo:ml-0 mo:py-0",children:[(0,l.jsx)(d,{label:"Account Role",text:t.role}),(0,l.jsx)(d,{label:"Authorization Level",text:0===t.authLevel?"Read-Only":"Read-Only / Specified Products"}),(0,l.jsx)(d,{label:"Last Login",text:t.lastLoginTime})]})]}),(0,l.jsx)("span",{className:"text-2xl font-bold mo:text-lg",children:"TARGET INVENTORIES"}),n&&(0,l.jsx)("div",{className:"mt-5 w-full grid gap-5 grid-cols-[repeat(auto-fill,minmax(21.875rem,1fr))] mo:grid-cols-1",children:n.map((e,t)=>(0,l.jsx)(m,{data:e},"product_item_".concat(t)))})]})}):null}},5912:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var l=n(1851);function a(e,t){let n=(0,l.Z)(e,t);return(n.error||n.loading)&&(n.value=void 0),n}},561:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var l=n(6816),a=n(5912),i=n(5666),s=n(4166),r=n(959);function o(){let{value:e,loading:t}=(0,a.k)(i.jw),n=(0,r.useMemo)(()=>(e||[]).map(e=>({...e,text:e.displayName})),[e]),{query:o}=(0,s.useRouter)(),c=(0,r.useMemo)(()=>{let e=o.product_id;if(e){let t=n.findIndex(t=>"".concat(t.id)==e);if(t>=0)return t}return 0},[o,n]),{current:d,items:u,onChange:m}=(0,l.d)(n,c),x=n[d];return{products:e,current:d,items:u,onChange:m,current_product:x,loading:t}}},5666:function(e,t,n){"use strict";n.d(t,{Ii:function(){return f},RN:function(){return m},RS:function(){return d},Vd:function(){return x},Xg:function(){return h},aA:function(){return b},eO:function(){return u},ep:function(){return p},jw:function(){return c},x4:function(){return r}});var l=n(5032),a=n(8422),i=n(8622);function s(e){return"".concat(i.Sg).concat(e)}async function r(e,t){let n=await a.Z.post(s("/api/v1/base/login"),{name:e,password:t});return n.data}function o(){let e=(0,l.is)();return e?{headers:{Authorization:"Bearer ".concat(e.loginToken)}}:{}}async function c(){let e=await a.Z.get(s("/api/v1/npi/product/list"),o());return e.data||void 0}async function d(e){let t=await a.Z.get(s("/api/v1/npi/product/".concat(e,"/pcf_accountable")),o());return t.data||void 0}async function u(e){let t=await a.Z.get(s("/api/v1/npi/product/".concat(e,"/bom/list")),o());return t.data||void 0}async function m(e){let t=await a.Z.get(s("/api/v1/npi/product_bom/".concat(e,"/activity_types")),o());return t.data||void 0}async function x(e){let t=await a.Z.get(s("/api/v1/npi/product_process/query"),{...o(),params:{product_id:e,include_activity_types:!0}});return t.data||void 0}async function p(e){let t=await a.Z.get(s("/api/v1/npi/product/serial_number/".concat(e,"/info")),o());return t.data||void 0}async function f(e){let t=await a.Z.get(s("/api/v1/inventory/product/".concat(e,"/inventory")),o());return t.data||void 0}async function h(e){let t=await a.Z.get(s("/api/v1/sbt/".concat(e,"/info")));return t.data||void 0}async function b(e){let t=await a.Z.get(s("/api/v1/sbt/".concat(e,"/emission/inventory")));return t.data||void 0}},165:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var l=n(1527),a=n(7162),i=n(4631),s=n(6131),r=n(5912),o=n(5666),c=n(959),d=n(1917),u=n(5309),m=n(2458);function x(e){let{node:t,onBack:n}=e,{value:u,loading:x}=(0,r.k)(()=>(0,o.RN)(t.id),[t.id]),f=(0,c.useMemo)(()=>u?u.map(e=>({title:e.displayName,sub:e.name})):[],[u]);return(0,l.jsxs)(i.u,{className:"",children:[(0,l.jsxs)("div",{className:"sticky top-0 w-full bg-green-2 flex justify-between items-center h-[4.25rem] px-4 text-white",children:[(0,l.jsx)("button",{className:"text-2xl",onClick:n,children:(0,l.jsx)(d.$Ku,{})}),(0,l.jsx)("span",{className:"flex-grow-0 font-medium overflow-hidden text-ellipsis whitespace-nowrap mx-4",children:t.partDisplayName}),(0,l.jsx)("div",{className:"w-6"})]}),(0,l.jsxs)("div",{className:"p-5",children:[t.children.map((e,t)=>(0,l.jsx)(p,{node:e},"bomItem_".concat(t))),t.children.length>0&&(0,l.jsx)("div",{className:"h-5"}),(0,l.jsx)(m.xt,{node:t}),(0,l.jsx)("div",{className:"text-[.9375rem] font-bold mt-5 mb-[.875rem]",children:"Attributable to Carbon Activities:"}),x&&(0,l.jsx)(a.g,{}),f.map((e,t)=>(0,l.jsx)(s.L6,{...e},"attrs_".concat(t)))]})]})}function p(e){let{node:t}=e,[n,a]=(0,u.Z)(!1);return(0,l.jsxs)("div",{onClick:()=>{a(!0),console.info("open bom modal")},className:"cursor-pointer flex justify-between items-end w-full px-5 py-3 border border-solid border-black rounded-lg [&:nth-child(n+2)]:mt-5",children:[(0,l.jsx)("div",{className:"text-lg flex-grow-0 whitespace-nowrap overflow-hidden text-ellipsis",children:t.partDisplayName}),(0,l.jsx)(d.nQU,{className:"text-2xl flex-shrink-0"}),n&&(0,l.jsx)(x,{node:t,onBack:e=>{a(!1),console.info("close bom modal"),e.stopPropagation()}})]})}function f(e){let{node:t}=e;return(0,l.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 text-black",children:[(0,l.jsx)("div",{className:"text-base font-bold",children:t.partDisplayName}),t.children.map((e,t)=>(0,l.jsx)(p,{node:e},"bomItem_".concat(t)))]})}var h=n(5032),b=n(5726),v=n(6816),j=n(561),g=n(9218),w=n(6558),N=function(){let{current:e,items:t,onChange:n,current_product:i,loading:s}=(0,j.a)(),{value:d,loading:u}=(0,r.k)(()=>i?(0,o.RS)(i.id):Promise.resolve(void 0),[i]),{value:x,loading:p}=(0,r.k)(()=>i?(0,o.eO)(i.id):Promise.resolve(void 0),[i]),N=(0,c.useMemo)(()=>{if(!x||0===x.length)return;let e={},t="";x.forEach(n=>{null===n.parentPartNumberId&&(t=n.id+""),n.children=[],e[n.id]||(e[n.id]=[]),e[n.id].push(n)}),x.forEach(t=>{let n=e[t.parentPartNumberId];n&&n.forEach((e,n)=>{e.children.push(n>0?{...t}:t)})});let n=e[t];if(n&&n[0]&&n[0].children.length>0){let l=n[0];l.deep=0;let a=e=>{for(let t of e.children)t.deep=e.deep+1,t.parent=e,a(t)};return a(l),l}},[x]),y=(0,h.dD)(),k=y?f:m.TU;return(0,l.jsx)(b.Z,{className:"text-black",children:s||u||void 0==d||p||void 0==x?(0,l.jsx)(a.g,{}):(0,l.jsx)(l.Fragment,{children:i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.P,{current:e,items:t,onChange:n}),(0,l.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:"PRODUCT INFO"}),(0,l.jsxs)("div",{className:"w-full bg-white rounded-lg p-5 flex items-center justify-between mo:flex-col mo:items-start",children:[(0,l.jsx)("img",{className:"object-contain w-[15.625rem] aspect-square rounded-lg border border-black border-solid mo:w-full mo:aspect-[3/2]",src:i.imageUrl||w.ES}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:mt-5 mo:ml-0 mo:py-0",children:[(0,l.jsx)(g.OZ,{label:"Product Name",text:i.name||"-"}),(0,l.jsx)(g.OZ,{label:"Display Name",text:i.displayName}),(0,l.jsx)(g.OZ,{label:"Product UID",text:i.id+""})]}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,l.jsx)(g.OZ,{label:"From Organization",text:i.organization.displayName+""}),(0,l.jsx)(g.OZ,{label:"Product Type",text:i.type}),(0,l.jsx)(g.OZ,{label:"PCF Accountable",text:void 0===d?"-":d?"YES":"NO"})]}),(0,l.jsxs)("div",{className:"py-1 ml-[3.75rem] mo:ml-0 mo:py-0",children:[(0,l.jsx)(g.OZ,{label:"Manufacturing Status",text:1===i.manufacturingStatus?"Active":"Inactive"}),(0,l.jsx)(g.OZ,{label:"Created At",text:i.createTime}),(0,l.jsx)(g.OZ,{label:"Last Update",text:i.updateTime})]})]}),(0,l.jsx)("div",{className:"text-2xl font-bold my-5 mo:text-lg",children:"PRODUCT BOM"}),N&&(0,l.jsx)(k,{node:N})]})})})}}},function(e){e.O(0,[893,439,54,57,507,845,575,901,261,774,888,179],function(){return e(e.s=871)}),_N_E=e.O()}]);