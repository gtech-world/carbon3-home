(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1704],{8722:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/model",function(){return t(4327)}])},8485:function(e,n,t){"use strict";t.d(n,{T$:function(){return d},T8:function(){return s}});var o=t(1527),r=t(4875),a=t.n(r),i=t(9270),l=t(570),c=t(7007);function s(e){let{className:n,children:t,...r}=e,c=(0,i.dD)();return(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-fit w-full bg-gray-16 relative",children:[c?(0,o.jsxs)("div",{className:"absolute z-0 top-0 w-full h-[43rem] overflow-hidden bg-green-2 ",children:[(0,o.jsx)("img",{className:"object-cover w-full absolute right-0 bottom-0",src:"/home-bg-r.jpg"}),(0,o.jsx)("div",{className:"w-full h-full absolute ssm:top-[calc(21.5rem_-_75vw)]",style:{background:"linear-gradient(180deg, #29953A 48.84%, rgba(34, 122, 48, 0) 96.76%)"}})]}):(0,o.jsxs)("div",{className:"absolute z-0 top-0 w-full h-[48.75rem] bg-green-2 overflow-hidden",children:[(0,o.jsx)("img",{className:"object-cover h-full absolute right-0 top-0",src:"/home-bg-r.jpg"}),(0,o.jsx)("div",{className:"w-full h-full absolute lg:left-[calc(50%_-_45rem)]",style:{background:"linear-gradient(182.16deg, #000000 -4.66%, rgba(0, 0, 0, 0) 17.13%)",transform:"matrix(-1, 0, 0, 1, 0, 0)"}}),(0,o.jsx)("div",{className:"w-full h-full absolute lg:left-[calc(50%_-_45rem)]",style:{background:"linear-gradient(270deg, #29953A 38.28%, rgba(34, 122, 48, 0) 77.8%)",transform:"matrix(-1, 0, 0, 1, 0, 0)"}})]}),(0,o.jsx)(l.h4,{className:"h-[6.75rem] mo:h-[4.25rem] mo:sticky mo:bg-white mo:text-green-2 mo:p-4"}),(0,o.jsx)("div",{className:a()("z-[2] flex-1 relative w-full mx-auto mo:mx-0 mo:flex mo:flex-col",n),...r,children:t})]})}function d(e){let{className:n,tits:t,isManager:r,children:s,...d}=e,u=(0,i.dD)(),m=(0,c.R)();return(0,o.jsxs)("div",{className:"flex-1 flex flex-col min-h-fit w-full relative",children:[u?(0,o.jsx)(l.DJ,{}):(0,o.jsx)(l.h4,{tits:t,isManager:r,style:{top:"".concat(m,"px")},className:"!sticky px-[3.125rem] py-4 !max-w-none bg-green-2"}),(0,o.jsx)("div",{className:a()("z-[2] flex-1 relative w-full py-6 px-[3.125rem] mx-auto mo:px-5",n),...d,children:s})]})}},818:function(e,n,t){"use strict";t.d(n,{I:function(){return c},g:function(){return l}});var o=t(1527),r=t(4875),a=t.n(r),i=t(1671);function l(e){let{className:n,color:t,size:r="",...l}=e;return(0,o.jsx)("div",{...l,className:a()("text-black w-full h-full flex items-center justify-center",n),children:(0,o.jsx)(i.uur,{color:t,style:{fontSize:r},className:"text-[3.125rem] animate-spin"})})}function c(){return(0,o.jsx)(l,{className:"fixed z-50 left-0 top-0 w-full !h-full bg-black/25"})}},7361:function(e,n,t){"use strict";t.d(n,{k:function(){return a}});var o=t(959),r=t(6171);function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,o.useRef)(!0),a=(0,o.useRef)(0),[,i]=(0,o.useState)(1),l=(0,o.useCallback)(e=>{t.current=e,i(e=>1-e)},[]),[c,s]=(0,r.Z)(e,n),d=()=>{t.current||l(!0);let e=a.current+1>1e5?0:a.current+1;a.current=e,s().finally(()=>a.current==e&&l(!1))};return(0,o.useEffect)(()=>{d()},n),(0,o.useMemo)(()=>({...c,value:t.current||c.error?void 0:c.value,loading:t.current,req:d}),[c,t.current])}},4726:function(e,n,t){"use strict";t.d(n,{AC:function(){return I},BI:function(){return h},Ii:function(){return g},Iv:function(){return P},LW:function(){return S},Mt:function(){return R},Pf:function(){return s},Ps:function(){return w},RN:function(){return x},RS:function(){return f},SO:function(){return j},Vd:function(){return v},av:function(){return O},eO:function(){return p},ep:function(){return y},fF:function(){return T},jw:function(){return m},pF:function(){return C},vz:function(){return _},x4:function(){return d}});var o=t(9270),r=t(8422),a=t(3993),i=t(3273);function l(e){return"".concat(a.Sg).concat(e)}function c(e){var n;let t=e.data;if(t){if(t.code&&1e5!==t.code)throw t.message;return null===(n=e.data)||void 0===n?void 0:n.data}}function s(e,n){return()=>n.some(e=>!e)?(0,i._v)():e()}async function d(e,n){let t=await r.Z.post(l("/api/base/login"),{name:e,password:n});return c(t)}function u(){let e=(0,o.is)();return e?{headers:{Authorization:"Bearer ".concat(e.loginToken)}}:{}}async function m(){let e=await r.Z.get(l("/api/npi/product/list"),u());return c(e)}async function f(e){let n=await r.Z.get(l("/api/npi/product/".concat(e,"/pcf_accountable")),u());return c(n)}async function p(e){let n=await r.Z.get(l("/api/npi/product/".concat(e,"/bom/list")),u());return c(n)}async function x(e){let n=await r.Z.get(l("/api/npi/product_bom/".concat(e,"/activity_types")),u());return c(n)}async function v(e){let n=await r.Z.get(l("/api/npi/product_process/query"),{...u(),params:{product_id:e,include_activity_types:!0}});return c(n)}async function y(e){let n=await r.Z.get(l("/api/npi/product/serial_number/".concat(e,"/info")),u());return c(n)}async function g(e){let n=await r.Z.get(l("/api/inventory/product/".concat(e,"/inventory")),u());return c(n)}async function h(e){let{pgNum:n,productId:t}=e,o=await r.Z.get(l("/api/product-lca/model/query?pageNum=".concat(n,"&pageSize=10&productId=").concat(t>-1?t:"")),u());return c(o)}async function j(e){let{pgNum:n}=e,t=await r.Z.get(l("/api/product-lca/result/query?pageNum=".concat(n,"&pageSize=10")),u());return c(t)}async function T(e){let n=await r.Z.get(l("/api/product-lca/result/detail/".concat(e)),u());return c(n)}async function C(e,n){let t=await r.Z.post(l("/api/product-lca/model/state/".concat(e,"/update/").concat(n)),null,u());return c(t)}async function O(e){let n=u();n.headers&&(n.headers["Content-Type"]="multipart/form-data");try{return await r.Z.post(l("/api/product-lca/model/upload"),e,n)}catch(t){console.log(t)}}async function w(){let e=await r.Z.get(l("/api/product/category/query"),u());return c(e)}async function R(e){let{name:n,categoryId:t,orgId:o,description:a}=e,i=await r.Z.post(l("/api/product/upsert"),{name:n,categoryId:t,orgId:o,partNumber:"1",imageUrl:"",description:a},u());return c(i)}async function _(){let e=await r.Z.get(l("/api/product/list?pageSize=500"),u());return c(e)}async function E(e){let n=await r.Z.get(l("/api/product-lca/model/".concat(e,"/descriptors")),u());return JSON.parse(c(n))}async function N(e){let n=await r.Z.get(l("/api/product-lca/model/".concat(e,"/categories")),u());return JSON.parse(c(n))}async function P(e){let n=await N(e),t=await E(e);return[n,t]}async function I(e,n,t){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=await r.Z.get(l("/api/product-lca/model/".concat(e,"/item/").concat(n,"/").concat(t,"/info?fromMethod=").concat(o)),u());return JSON.parse(c(a))}async function S(e){let n=u(),t=await r.Z.get(l("/api/product-lca/result/".concat(e,"/export")),Object.assign(n,{responseType:"blob"}));return t}},4327:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ej}});var o,r,a=t(1527),i=t(570),l=t(8485),c=t(7007),s=t(818);(o=r||(r={})).PRODUCT_SYSTEM="PRODUCT_SYSTEM",o.PROCESS="PROCESS",o.FLOW="FLOW",o.EPD="EPD",o.IMPACT_METHOD="IMPACT_METHOD",o.IMPACT_CATEGORY="IMPACT_CATEGORY",o.SOCIAL_INDICATOR="SOCIAL_INDICATOR",o.PARAMETER="PARAMETER",o.DQ_SYSTEM="DQ_SYSTEM",o.FLOW_PROPERTY="FLOW_PROPERTY",o.UNIT_GROUP="UNIT_GROUP",o.CURRENCY="CURRENCY",o.ACTOR="ACTOR",o.SOURCE="SOURCE",o.LOCATION="LOCATION";var d=t(4875),u=t.n(d),m=t(959),f=t(1671),p=t(8370),x=t(9077);let v=(0,m.createContext)(void 0);function y(){return(0,m.useContext)(v)}function g(e){let[n,t]=(0,m.useState)([]),[o,r]=(0,m.useState)(),i=(0,m.useCallback)(e=>{n.find(n=>n===e)||(n.length>=20?t([e].concat(n.slice(0,19))):t([e,...n])),r(e)},[n,o]),l=(0,m.useCallback)(e=>{let a=n.filter(n=>n!==e);t(a),a.find(e=>e===o)||r(a[0])},[n,o]);return(0,a.jsx)(v.Provider,{value:{navs:n,add:i,del:l,active:o,setActive:r},children:e.children})}let h=(0,m.createContext)({descriptores:{}});var j=t(5591),T=t(1875),C=t(7661),O=t(3967),w=t(5452),R=t(5462);let _={Icon:C.G3d,color:"#9C27B0",needFixColor:!0},E={[r.PRODUCT_SYSTEM]:{Icon:j.TdV,color:"#1565C0"},[r.FLOW]:{Icon:T.nbt,color:"#0084FF"},[r.FLOW_PROPERTY]:{Icon:O.KOr,color:"#CE6D2F"},[r.UNIT_GROUP]:{Icon:w.YvB,color:"#1D4F64"},[r.ACTOR]:{Icon:j.Xws,color:"#556164"},[r.SOURCE]:{Icon:j.uYZ,color:"#556164"},[r.LOCATION]:{Icon:j.Nh4,color:"#556164"},[r.DQ_SYSTEM]:{Icon:O.USG,color:"#3A8772"},[r.IMPACT_METHOD]:{Icon:O.MnU,color:"#69B13E"},[r.IMPACT_CATEGORY]:{Icon:O.eG4,color:"#69B13E"},["folder-".concat(r.PRODUCT_SYSTEM)]:{Icon:j.$nz,color:"#1565C0"},["folder-".concat(r.PROCESS)]:{Icon:j.$nz,color:"#9C27B0"},["folder-".concat(r.FLOW)]:{Icon:j.$nz,color:"#CE6D2F"},["folder-".concat(r.FLOW_PROPERTY)]:{Icon:j.$nz,color:"#CE6D2F"},["folder-".concat(r.EPD)]:{Icon:j.$nz,color:"#21C393"},["folder-".concat(r.IMPACT_METHOD)]:{Icon:j.$nz,color:"#69B13E"},["folder-".concat(r.IMPACT_CATEGORY)]:{Icon:j.$nz,color:"#69B13E"},["folder-".concat(r.SOCIAL_INDICATOR)]:{Icon:j.$nz,color:"#EA9119"},["folder-".concat(r.DQ_SYSTEM)]:{Icon:j.$nz,color:"#37997D"},["folder-".concat(r.PARAMETER)]:{Icon:j.$nz,color:"#C60116"},["folder-".concat(r.UNIT_GROUP)]:{Icon:j.$nz,color:"#2F363A"},["folder-".concat(r.CURRENCY)]:{Icon:j.$nz,color:"#22614E"},["folder-".concat(r.ACTOR)]:{Icon:j.$nz,color:"#3388AF"},["folder-".concat(r.SOURCE)]:{Icon:j.$nz,color:"#577889"},["folder-".concat(r.LOCATION)]:{Icon:j.$nz,color:"#173855"},"folder-Indicators and parameters":{Icon:j.Mp$,color:"#556164"},"folder-Background data":{Icon:w.owA,color:"#999999"},PRODUCT_FLOW:{Icon:T.nbt,color:"#0084FF"},ELEMENTARY_FLOW:{Icon:R.jRM,color:"#2F5F39"},WASTE_FLOW:{Icon:R.SW4,color:"#9C462E"}};function N(e){let{Icon:n,color:t,needFixColor:o}=E[e.type]||_;return(0,a.jsx)(n,{color:t,className:u()(e.className,{fixGrColor:o})})}var P=t(4726),I=t(3273),S=t(6101),b=t.n(S);let A=b()(()=>t.e(9287).then(t.t.bind(t,9287,23)),{loadableGenerated:{webpack:()=>[9287]},ssr:!1});function F(e){return e.data?(0,a.jsx)(A,{src:e.data,collapsed:2}):null}function D(e){let{map:n,data:t}=e,o=Object.keys(n),[r,i]=(0,m.useState)(o[0]),l=n[r].json,c=l?null:n[r];return(0,a.jsxs)("div",{className:"flex-1 flex flex-col h-0",children:[(0,a.jsx)("div",{className:"h-[calc(100%-34px)] flex-1 flex flex-col overflow-auto p-5 gap-5",children:c?(0,a.jsx)(c,{data:t}):(0,a.jsx)(F,{data:l})}),(0,a.jsxs)("div",{className:"flex flex-shrink-0 overflow-x-auto",children:[o.map((e,n)=>(0,a.jsx)("div",{onClick:()=>i(e),className:u()("leading-[34px] text-sm px-[10px] border border-solid border-gray-14 cursor-pointer whitespace-nowrap",{"text-green-2 border-transparent":e===r,"text-black":e!==r}),children:e},"type_tab_".concat(n))),(0,a.jsx)("div",{className:"flex-1 border border-solid border-gray-14"})]})]})}var M=t(9592);function U(e){let{infos:n,title:t}=e,[o,r]=(0,M.Z)(!0);return(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"flex items-center font-bold cursor-pointer text-lg text-black",onClick:()=>r(),children:[t,o?(0,a.jsx)(j.IkZ,{className:"text-2xl "}):(0,a.jsx)(j.qL$,{className:"text-2xl"})]}),o&&(0,a.jsx)("div",{className:"mt-3 grid grid-cols-[auto_1fr] gap-x-5 gap-y-[10px] text-sm text-black",children:n.map((e,n)=>{let t=!e.length;if(t)return(0,a.jsx)("div",{className:"col-span-2",children:e},"infomation_".concat(n));let[o,r]=e;return(0,a.jsxs)(m.Fragment,{children:[(0,a.jsx)("div",{className:"font-bold",children:o}),(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:r||"none"})]},"infomation_".concat(n))})})]})}function L(){return(0,a.jsx)("div",{className:"w-full h-[6px] flex-shrink-0 bg-gray-16"})}function k(e){let{type:n,name:t,def:o=""}=e;return t?n?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(N,{type:n}),t]}):(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(a.Fragment,{children:o})}let G={[r.PRODUCT_SYSTEM]:"Product systems",[r.PROCESS]:"Processes",[r.FLOW]:"Flows",[r.EPD]:"EPDs",[r.IMPACT_METHOD]:"Impact assessment methods",[r.IMPACT_CATEGORY]:"Impact categories",[r.SOCIAL_INDICATOR]:"Social indicators",[r.PARAMETER]:"Global parameters",[r.DQ_SYSTEM]:"Data quality systems",[r.FLOW_PROPERTY]:"Flow properties",[r.UNIT_GROUP]:"Unit groups",[r.CURRENCY]:"Currencies",[r.ACTOR]:"Actors",[r.SOURCE]:"Sources",[r.LOCATION]:"Locations"};function Y(e){if(!e)return"none";let{parameter1:n,parameter2:t,parameter3:o}=e;switch(e.distributionType){case"LOG_NORMAL":return"lognormal: gmean=".concat(n," gsigma=").concat(t);case"NORMAL":return"normal: mean=".concat(n," sigma=").concat(t);case"UNIFORM":return"uniform: min=".concat(n," max=").concat(t);case"TRIANGLE":return"triangular: min=".concat(n," mode=").concat(t," max=").concat(o);default:return"none"}}function W(e){if(!e)return"";let n=(e,t)=>{if(!t||!t.name)return e;let o=e?t.name+"/"+e:t.name;return t.category?n(o,t.category):o};return n("",e)}function z(e){var n,t,o,i,l,c,s,d,u;let{data:m}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{title:"General information",infos:[["Name",m.name],["Category",(0,a.jsx)(k,{type:"folder-".concat(r.PROCESS),name:W(m.category),def:"none"},"info_2")],["Description",m.description||""],["Tags",m.tags||""],["Infrastructure process",m.infrastructureProcess?"true":"false"]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Time",infos:[["Start date",(0,I.pv)(null===(n=m.documentation)||void 0===n?void 0:n.validFrom)],["End date",(0,I.pv)(null===(t=m.documentation)||void 0===t?void 0:t.validUntil)],["Description",(null===(o=m.documentation)||void 0===o?void 0:o.time)||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Geography",infos:[["Location",(null===(i=m.location)||void 0===i?void 0:i.name)||"none"],["Description",(null===(l=m.documentation)||void 0===l?void 0:l.geography)||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Technology",infos:[["Description",(null===(c=m.documentation)||void 0===c?void 0:c.technology)||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Data quality",infos:[["Process schema",(null===(s=m.location)||void 0===s?void 0:s.name)||"none"],["Data quality entry",m.dqEntry||"(not specified)"],["Flow schema",(null===(d=m.exchangeDqSystem)||void 0===d?void 0:d.name)||"none"],["Social schema",(null===(u=m.socialDqSystem)||void 0===u?void 0:u.name)||"none"]]})]})}var Z=t(2699),B=t.n(Z);function q(e){let{head:n,className:t,infos:o}=e;return(0,a.jsxs)("div",{style:{gridTemplateColumns:"repeat(".concat(n.length,", auto)")},className:u()("grid text-sm text-black overflow-x-auto",t),children:[n.map((e,n)=>(0,a.jsx)("div",{className:"px-3 py-2 font-bold text-sm whitespace-nowrap",children:e},"head_"+n)),o.map((e,n)=>(0,a.jsx)(m.Fragment,{children:e.map((t,o)=>(0,a.jsx)("div",{className:u()("text-xs leading-normal px-3 py-[1px] whitespace-nowrap",{"bg-gray-16":n%2==0,"rounded-l-[4px]":0===o,"rounded-r-[4px]":o===e.length-1}),children:t},"body_col_"+o))},"body_row_"+n))]})}function $(e){let{infos:n,title:t,head:o,className:r}=e,[i,l]=(0,M.Z)(!0);return(0,a.jsxs)("div",{className:r,children:[(0,a.jsxs)("div",{className:"flex items-center font-bold cursor-pointer text-lg text-black",onClick:()=>l(),children:[t,i?(0,a.jsx)(j.IkZ,{className:"text-2xl "}):(0,a.jsx)(j.qL$,{className:"text-2xl"})]}),i&&(0,a.jsx)(q,{head:o,infos:n,className:"mt-3"})]})}let H=["Flow","Category","Amount","Unit","Costs/Revenuse","Uncertainty","Avoided waste","Provider","Data quality entry","Location","Description"];function Q(e){let{data:n}=e,{descriptores:t}=(0,m.useContext)(h),[o,i]=(0,m.useMemo)(()=>{let e=[],o=[],i=B().chain(t[r.PROCESS]).values().flatten().keyBy("id").value()||{};return n.exchanges.forEach((n,t)=>{var l,c,s,d;let u=i[n.defaultProviderId];(n.isInput?e:o).push([(0,a.jsx)(k,{type:(null===(l=n.flow)||void 0===l?void 0:l.flowType)||r.FLOW,name:n.flow.name},"exchanges_".concat(t,"_1")),W(null===(c=n.flow)||void 0===c?void 0:c.category),n.amount,(0,a.jsx)(k,{type:r.UNIT_GROUP,name:null===(s=n.unit)||void 0===s?void 0:s.name},"exchanges_".concat(t,"_2")),"",Y(n.uncertainty),"",(0,a.jsx)(k,{type:r.PROCESS,name:null==u?void 0:u.name},"exchanges_".concat(t,"_3")),n.dqEntry||"",(null===(d=n.location)||void 0===d?void 0:d.name)||"",n.description||""])}),[e,o]},[n,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($,{title:"Inputs",head:H,infos:o}),(0,a.jsx)(L,{}),(0,a.jsx)($,{title:"Outputs",head:H,infos:i})]})}function V(e){var n,t,o,i,l,c,s,d,u,m,f,p;let{data:x}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(U,{title:"Administrative infomation",infos:[["Intended application",(null===(n=x.documentation)||void 0===n?void 0:n.intendedApplication)||""],["Data set owner",(0,a.jsx)(k,{def:"none",type:r.ACTOR,name:null===(t=x.documentation)||void 0===t?void 0:null===(o=t.dataSetOwner)||void 0===o?void 0:o.name},1)],["Data generator",(0,a.jsx)(k,{def:"none",type:r.ACTOR,name:null===(i=x.documentation)||void 0===i?void 0:null===(l=i.dataGenerator)||void 0===l?void 0:l.name},2)],["Data documentor",(0,a.jsx)(k,{def:"none",type:r.ACTOR,name:null===(c=x.documentation)||void 0===c?void 0:null===(s=c.dataDocumentor)||void 0===s?void 0:s.name},3)],["Publication",(0,a.jsx)(k,{def:"none",type:r.SOURCE,name:null===(d=x.documentation)||void 0===d?void 0:null===(u=d.publication)||void 0===u?void 0:u.name},4)||""],["Access and use restrictions",(null===(m=x.documentation)||void 0===m?void 0:m.restrictions)||""],["Creation date",(0,I.pv)(null===(f=x.documentation)||void 0===f?void 0:f.creationDate)],["Copyright ",(null===(p=x.documentation)||void 0===p?void 0:p.copyright)?"true":"false"]]})})}function J(e){var n,t,o,i,l,c,s,d,u,m,f;let{data:p}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{title:"Modeling and validation",infos:[["Process type",(0,a.jsx)(k,{type:r.PROCESS,name:p.processType},1)],["LCI method",(null===(n=p.documentation)||void 0===n?void 0:n.inventoryMethod)||""],["Modeling constants",(null===(t=p.documentation)||void 0===t?void 0:t.modelingConstants)||""],["Data completeness",(null===(o=p.documentation)||void 0===o?void 0:o.completeness)||""],["Data selection",(null===(i=p.documentation)||void 0===i?void 0:i.dataSelection)||""],["Data treatment",(null===(l=p.documentation)||void 0===l?void 0:l.dataTreatment)||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Data source infomation",infos:[["Simpling procedure",(null===(c=p.documentation)||void 0===c?void 0:c.sampling)||""],["Data collection period",(null===(s=p.documentation)||void 0===s?void 0:s.dataCollectionPeriod)||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Process evaluation and validation",infos:[["Reviewer",(null===(d=p.documentation)||void 0===d?void 0:null===(u=d.reviewer)||void 0===u?void 0:u.name)||""],["Data set other evaluation",(null===(m=p.documentation)||void 0===m?void 0:m.reviewDetails)||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Sources",infos:[(0,a.jsx)("div",{className:"flex flex-col px-3",children:((null===(f=p.documentation)||void 0===f?void 0:f.sources)||[]).map((e,n)=>(0,a.jsx)(k,{type:r.SOURCE,name:e.name},"source_".concat(n)))},1)]})]})}function X(e){let{data:n}=e,[t,o]=(0,m.useMemo)(()=>{let e=B().chain(n.parameters||[]).sortBy("name").groupBy(e=>e.isInputParameter?"input":"depend").value(),t=(e.input||[]).map(e=>[e.name||"",e.value||"",Y(e.uncertainty),e.description||""]),o=(e.depend||[]).map(e=>[e.name||"",e.formula||"",e.value||"",e.description||""]);return[t,o]},[n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($,{title:"Input parameters",head:["Name","Value","Uncertainty","Description"],infos:t}),(0,a.jsx)(L,{}),(0,a.jsx)($,{title:"Dependent parameters",head:["Name","Formula","Value","Description"],infos:o})]})}function K(e){let{data:n}=e,[t,o]=(0,m.useMemo)(()=>{let e=B().groupBy(n.exchanges||[],e=>!function(e){if(!e||e.isAvoided||!e.flow)return!1;let n=e.flow.flowType;return!!n&&"ELEMENTARY_FLOW"!==n&&"PRODUCT_FLOW"==n!=e.isInput}(e)?"false":"true"),t=e.true.length<2;if(t)return[[],[]];let o=e.true.map(e=>{var n,t;return[(0,a.jsx)(k,{type:(null===(n=e.flow)||void 0===n?void 0:n.flowType)||r.FLOW,name:null===(t=e.flow)||void 0===t?void 0:t.name},1),"",""]}),i=e.false.map(e=>{var n,t,o,i;return[(0,a.jsx)(k,{type:(null===(n=e.flow)||void 0===n?void 0:n.flowType)||r.FLOW,name:null===(t=e.flow)||void 0===t?void 0:t.name},1),e.isInput?"Input":"Output",W(null===(o=e.flow)||void 0===o?void 0:o.category),e.amount+""+(null===(i=e.unit)||void 0===i?void 0:i.name),"",""]});return[o,i]},[n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,a.jsx)("div",{className:"font-bold",children:"Default method"}),(0,a.jsx)("div",{children:"None"})]}),(0,a.jsx)($,{title:"Pyhsical & economic allocation",head:["Product","Physical","Economic"],infos:t}),(0,a.jsx)(L,{}),(0,a.jsx)($,{title:"Causal allocation",head:["Flow","Direction","Category","Amount","Overburden(deposited)","transport in t*km"],infos:o})]})}function ee(e){var n,t,o,i;let{data:l}=e,c=null===(n=l.referenceExchange)||void 0===n?void 0:n.flow;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{title:"General information",infos:[["Name",l.name],["Category",(0,a.jsx)(k,{type:"folder-".concat(r.PRODUCT_SYSTEM),name:W(l.category),def:"none"},"info_2")],["Description",l.description],["Tags",l.tags||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Reference",infos:[["Process",(0,a.jsx)(k,{type:r.PROCESS,name:null===(t=l.referenceProcess)||void 0===t?void 0:t.name,def:"none"},"ref_process")],["Product",(0,a.jsx)(k,{type:(null==c?void 0:c.flowType)==="PRODUCT_FLOW"?r.PRODUCT_SYSTEM:"",name:null==c?void 0:c.name,def:"none"},"ref_product")],["Flow property",(0,a.jsx)(k,{type:r.FLOW_PROPERTY,name:null==c?void 0:null===(o=c.referenceFlowProperty)||void 0===o?void 0:o.name,def:"none"},"ref_flow_pro")],["Unit",(0,a.jsx)(k,{type:r.UNIT_GROUP,name:null==c?void 0:null===(i=c.referenceUnit)||void 0===i?void 0:i.name,def:"none"},"ref_unit")],["Target amount",l.targetAmount+""]]})]})}function en(e){let{data:n}=e,{descriptores:t}=(0,m.useContext)(h),o=(0,m.useMemo)(()=>{var e;let o=null===(e=n.parameterSets)||void 0===e?void 0:e.find(e=>e.isBaseline);o||(o={name:"Baseline",description:"",parameters:[]});let r=B().sortBy((n.parameterSets||[]).filter(e=>e!==o),["isBaseline","name"]),a=(e,n)=>B().chain(t[e]).values().flatten().find(e=>e.id===n).value;return[o].concat(r).map(e=>({name:e.name,description:e.description,head:["Context","Parameter","Amount","Uncertainty","Description"],infos:(e.parameters||[]).map(n=>{var t;return[(null===(t=a(n.contextType,n.contextId))||void 0===t?void 0:t.name)||"",n.name||"",n.value||"",Y(e.uncertainty),n.description||""]})}))},[n]);return(0,a.jsx)(a.Fragment,{children:o.map((e,n)=>(0,a.jsxs)(m.Fragment,{children:[n>0&&(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:e.name,infos:[["Name",e.name],["Description",e.description],(0,a.jsx)($,{className:"ml-5",title:"Parameters",head:e.head,infos:e.infos},1)]})]},"parameter_".concat(n)))})}function et(e){var n,t;let{data:o}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{title:"General information",infos:[["Name",o.name],["Category",(0,a.jsx)(k,{type:"folder-".concat(r.FLOW),name:W(o.category),def:"none"},"info_2")],["Description",o.description||""],["Tags",o.tags||""],["Flow type",(0,a.jsx)(k,{type:o.flowType,name:(t=o.flowType)?"PRODUCT_FLOW"===t?"Product":"ELEMENTARY_FLOW"===t?"Elementary flow":"Waste":""},1)],["Infrastructure flow",o.infrastructureFlow?"true":"false"]]}),(0,a.jsx)(L,{}),(0,a.jsx)(U,{title:"Additional information",infos:[["CAS Number",o.casNumber||"none"],["Formula",o.formula||"none"],["Synonyms",o.synonyms||"none"],["Location",(null===(n=o.location)||void 0===n?void 0:n.name)||"none"]]})]})}function eo(e){let{data:n}=e,t=(0,m.useMemo)(()=>{let e=e=>{var t,o,r,a;let i=n.referenceFactor,l=null==i?void 0:null===(t=i.flowProperty)||void 0===t?void 0:null===(o=t.unitGroup)||void 0===o?void 0:o.referenceUnit,c=null==e?void 0:null===(r=e.flowProperty)||void 0===r?void 0:null===(a=r.unitGroup)||void 0===a?void 0:a.referenceUnit;return l&&c?"1.0 ".concat(l.name," = ").concat(e.conversionFactor," ").concat(c.name):""};return n.flowPropertyFactors.map(t=>{var o,i,l,c;return[(0,a.jsx)(k,{type:r.FLOW_PROPERTY,name:(null===(o=t.flowProperty)||void 0===o?void 0:o.name)||""},1),t.conversionFactor+"",(0,a.jsx)(k,{type:r.UNIT_GROUP,name:(null===(i=t.flowProperty)||void 0===i?void 0:null===(l=i.unitGroup)||void 0===l?void 0:null===(c=l.referenceUnit)||void 0===c?void 0:c.name)||""},2),e(t),n.referenceFactor===t?"true":"false"]})},[n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)($,{title:"Flow properties",head:["Name","Conversion factor","Reference unit","Formula","Is reference"],infos:t},1)})}function er(e){var n;let{data:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(U,{title:"General information",infos:[["Name",t.name],["Category",(0,a.jsx)(k,{type:"folder-".concat(r.FLOW_PROPERTY),name:W(t.category),def:"none"},"info_2")],["Description",t.description||""],["Tags",t.tags||""],["Unit group",(0,a.jsx)(k,{type:r.UNIT_GROUP,name:null===(n=t.unitGroup)||void 0===n?void 0:n.name},1)],["Flow property type",t.flowPropertyType]]})})}function ea(e){var n;let{data:t}=e;return(0,m.useMemo)(()=>{},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{title:"General information",infos:[["Name",t.name],["Category",(0,a.jsx)(k,{type:"folder-".concat(r.IMPACT_METHOD),name:W(t.category),def:"none"},"info_2")],["Description",t.description||""],["Tags",t.tags||""],["Source",(0,a.jsx)(k,{type:r.SOURCE,name:null===(n=t.source)||void 0===n?void 0:n.name,def:"none"},1)],["Code",t.code||""]]}),(0,a.jsx)(L,{}),(0,a.jsx)($,{title:"Impact categories",head:["Name","Description","Reference unit"],infos:(t.impactCategories||[]).map(e=>[(0,a.jsx)(k,{type:r.IMPACT_CATEGORY,name:e.name},1),e.description||"",e.referenceUnit])})]})}function ei(e){var n;let{data:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(U,{title:"General information",infos:[["Name",t.name],["Category",(0,a.jsx)(k,{type:"folder-".concat(r.IMPACT_CATEGORY),name:W(t.category),def:"none"},"info_2")],["Description",t.description||""],["Tags",t.tags||""],["Source",(0,a.jsx)(k,{type:r.SOURCE,name:null===(n=t.source)||void 0===n?void 0:n.name,def:"none"},1)],["Code",t.code||""],["Reference unit",t.referenceUnit||""],["Impact direction",t.direction||"Unspecified"]]})})}function el(e){let{data:n}=e,t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,[t,o]=(0,m.useState)([]);return(0,m.useEffect)(()=>{let t=!1;o([]);let r=(0,Z.chunk)(e,n),a=()=>{var e;e=e=>{e&&o(e=>{let o=Math.floor(e.length/n);return(console.info("index:",o),o>=r.length)?(t=!0,e):e.concat(r[o])}),t||a()},window.requestIdleCallback?window.requestIdleCallback(n=>e(n.timeRemaining()>1)):window.requestAnimationFrame?window.requestAnimationFrame(()=>e(!0)):window.setTimeout(()=>e(!0),2*n)};return a(),()=>{t=!0}},[e,n]),t}(n.impactFactors||[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)($,{title:"Characterization factors",head:["Flow","Category","Factor","Unit","Uncertainty","Location"],infos:t.map(e=>{var t,o,i,l,c;return[(0,a.jsx)(k,{name:null===(t=e.flow)||void 0===t?void 0:t.name,type:(null===(o=e.flow)||void 0===o?void 0:o.flowType)||r.FLOW},1),W(null===(i=e.flow)||void 0===i?void 0:i.category),e.formula||e.value||"",e.unit?"".concat(n.referenceUnit||"1","/").concat(e.unit.name):"",Y(e.uncertainty),(null===(l=e.flow)||void 0===l?void 0:null===(c=l.location)||void 0===c?void 0:c.name)||""]})})})}let ec={[r.PRODUCT_SYSTEM]:function(e){let{data:n}=e;return(0,a.jsx)(D,{map:{"General information":ee,Parameters:en},data:n})},[r.PROCESS]:function(e){let{data:n,json:t}=e;return(0,a.jsx)(D,{map:{"General information":z,"Inputs/Outputs":Q,"Administrative information":V,"Modeling and validation":J,Parameters:X,Allocation:K},data:n})},[r.FLOW]:function(e){let{data:n,json:t}=e;return(0,a.jsx)(D,{map:{"General information":et,"Flow properties":eo},data:n})},[r.FLOW_PROPERTY]:function(e){let{data:n}=e;return(0,a.jsx)(D,{map:{"General infomation":er},data:n})},[r.IMPACT_METHOD]:function(e){let{data:n}=e;return(0,a.jsx)(D,{map:{"General infomation":ea},data:n})},[r.IMPACT_CATEGORY]:function(e){let{data:n}=e;return(0,a.jsx)(D,{map:{"General infomation":ei,"Characterization factors":el},data:n})}},es={};function ed(e){return(0,a.jsx)("div",{className:"flex-1 p-5 overflow-auto",children:(0,a.jsx)(F,{data:e.json})})}function eu(e){if(!e)return;let n=e.data;return"".concat(e.modelType,"_").concat(n.id)}function em(e){let{id:n}=e,{active:t}=y(),o=(0,m.useRef)(!0),[[r,i],l]=(0,m.useState)([void 0,void 0]),[c,d]=(0,m.useState)(!1),u=function(){let e=(0,m.useRef)(!0);return(0,m.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}();(0,m.useEffect)(()=>{if(o.current){for(let e in es)delete es[e];o.current=!1}if(!t||!t.data)return()=>{};let r=eu(t);if(d(!0),!es[r]){var a;es[r]=(0,P.AC)(n,t.modelType,t.data.id,null===(a=t.data)||void 0===a?void 0:a.fromMethod).then(e=>{let n=(0,I.tV)(e);return n._key=r,[n,e]})}es[r].then(e=>{console.info("value:",e),u.current&&l(e)}).catch(()=>{delete es[r]}).finally(()=>{console.info("first:",u.current),u.current&&d(!1)})},[t,n]);let f=ec[(null==t?void 0:t.modelType)||""]||ed;return t?c?(0,a.jsx)(s.g,{}):r&&eu(t)===r._key?(0,a.jsx)(f,{data:ec[(null==t?void 0:t.modelType)||""]?r:i,json:i}):null:null}let ef=(e,n)=>({data:{id:e.id.toString(),isLeaf:0===e.children.length,isOpenByDefault:e.modelType==r.PRODUCT_SYSTEM||0===n,name:e.name,nestingLevel:n,node:e},nestingLevel:n,node:e});function ep(e){let{style:n,data:{name:t,nestingLevel:o,isLeaf:i,node:l},isOpen:c,setOpen:s}=e,{active:d,add:m}=y();return(0,a.jsxs)("div",{style:{...n,marginLeft:"".concat(20*o,"px"),width:"max-content",paddingRight:20,background:l===d?"rgba(34, 122, 48, 0.1)":"none"},className:u()("flex items-center py-[2px]",{"":l===d}),children:[(0,a.jsx)("button",{onClick:()=>s(!c),className:u()("text-sm mr-[6px]",{invisible:i}),children:c?(0,a.jsx)(f.ZXJ,{}):(0,a.jsx)(f.jfD,{})}),(0,a.jsxs)("div",{onClick:()=>{"content"==l.type&&Object.keys(ec).includes(l.modelType)&&m(l),"folder"==l.type&&s(!c)},className:u()("flex text-sm gap-1 items-center cursor-pointer"),children:[(0,a.jsx)(N,{type:"folder"==l.type?"folder-".concat(l.modelType):l.modelType===r.FLOW.valueOf()?l.data.flowType||"FLOW":l.modelType}),(0,a.jsx)("span",{className:u()("text-black whitespace-nowrap"),children:t})]})]})}function ex(e){let{node:n}=e,t=(0,m.useCallback)(function*(){for(let e=0;e<n.children.length;e++)yield ef(n.children[e],0);for(;;){let t=yield;for(let o=0;o<t.node.children.length;o++)yield ef(t.node.children[o],t.nestingLevel+1)}},[n]);return(0,a.jsx)(p.Z,{children:e=>{let{height:n,width:o}=e;return(0,a.jsx)(x.NC,{useIsScrolling:!0,width:o,height:n,itemSize:18,treeWalker:t,children:ep})}})}function ev(){let{active:e,navs:n,del:t,setActive:o}=y();return(0,a.jsx)("div",{className:"flex-shrink-0 flex border-b border-solid border-b-gray-14 overflow-x-auto",children:n.map((n,r)=>(0,a.jsxs)("div",{onClick:()=>o(n),className:u()("flex gap-1  text-sm w-min leading-[14px] p-[.625rem] cursor-pointer",{"bg-gray-bg border border-solid border-gray-14 border-b-0":n===e}),children:[(0,a.jsx)(N,{type:n.modelType}),(0,a.jsx)("span",{className:"text-black whitespace-nowrap overflow-hidden text-ellipsis max-w-[600px]",children:n.name}),(0,a.jsx)(T.q5L,{className:"text-black cursor-pointer",onClick:e=>{t(n),e.stopPropagation()}})]},"tabs_".concat(r)))})}var ey=t(7361),eg=t(3190),eh=t(2493),ej=function(){let e=(0,eg.useRouter)(),n=e.query.id,{value:t,loading:o}=(0,ey.k)(()=>n?(0,P.Iv)(n):Promise.resolve(void 0),[n]),d=(0,m.useMemo)(()=>{if(!t)return;let[e,n]=t,o={id:"root",children:[],type:"folder",name:"database",modelType:"database"},a={},i={},l=(0,I.tV)(e);l.forEach(e=>{if(e.modelType){a[e.id]=e,i[e.modelType]||(i[e.modelType]={});let n=e.category?e.category.id:"null";i[e.modelType][n]||(i[e.modelType][n]=[]),i[e.modelType][n].push(e)}});let c=[r.PRODUCT_SYSTEM,r.PROCESS,r.FLOW,r.EPD],s=[r.IMPACT_METHOD,r.IMPACT_CATEGORY,r.SOCIAL_INDICATOR,r.PARAMETER,r.DQ_SYSTEM],d=[r.FLOW_PROPERTY,r.UNIT_GROUP,r.CURRENCY,r.ACTOR,r.SOURCE,r.LOCATION],u=(e,t)=>{let o=e.toString();i[o]||(i[o]={});let r=(i[o][t]||[]).map(n=>({id:n.refId+"_"+n.id,children:u(e,n.id),name:n.name,type:"folder",modelType:n.modelType,data:n}));n[o.toString()]||(n[o]={});let a=(n[o][t+""]||[]).map(e=>({id:e.refId+"_"+e.id,children:[],name:e.name,type:"content",modelType:e.type,data:e}));return B().sortBy([...r,...a],"name")},m=e=>{let n=[],t={};return e.forEach(e=>{"folder"===e.type?t[e.name]?t[e.name].children=m(t[e.name].children.concat(e.children)):(t[e.name]=e,n.push(e)):n.push(e)}),B().sortBy(n,"name")},f=(e,n)=>{if(null!=e){let t={id:e,name:e,type:"folder",modelType:e,children:[]};o.children.push(t),t.children=n.map(e=>({id:e,name:G[e],type:"folder",modelType:e,children:m(u(e,"null"))}))}else n.forEach(e=>{o.children.push({id:e,name:G[e],type:"folder",modelType:e,children:m(u(e,"null"))})})};return f(null,c),f("Indicators and parameters",s),f("Background data",d),console.info("root:",o),o},[t]),u=(0,i.to)(),f=(0,c.R)();return(0,a.jsxs)(l.T$,{isManager:!0,className:"h-0 flex py-0 !px-0",style:{maxHeight:"calc(100vh - ".concat(u+f,"px)")},children:[o&&(0,a.jsx)(s.I,{}),!!d&&(0,a.jsx)(g,{children:(0,a.jsx)(h.Provider,{value:{descriptores:t[1]},children:(0,a.jsxs)(eh.Z,{className:"split flex w-full",sizes:[1,99],minSize:260,snapOffset:1,gutterSize:6,gutterStyle:()=>({backgroundColor:"#f3f3f3",cursor:"col-resize"}),children:[(0,a.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,a.jsx)("div",{className:"border-b border-solid border-b-gray-16",children:(0,a.jsxs)("div",{className:"flex gap-[6px] text-sm w-min leading-[14px] p-[.625rem] bg-gray-bg border border-solid border-gray-14",children:[(0,a.jsx)(C.SxP,{className:"text-gray-9 fixGrColor"}),(0,a.jsx)("span",{className:"text-black",children:"Navigation"})]})}),(0,a.jsx)("div",{className:"flex-1 p-3",children:!!d&&(0,a.jsx)(ex,{node:d})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(ev,{}),(0,a.jsx)(em,{id:n})]})]})})})]})}}},function(e){e.O(0,[713,769,7307,6574,6740,1420,6556,3758,2295,2009,4159,570,9774,2888,179],function(){return e(e.s=8722)}),_N_E=e.O()}]);